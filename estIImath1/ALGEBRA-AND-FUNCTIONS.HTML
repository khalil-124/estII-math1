<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra & Functions | EST II HS Math Level 1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script>MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }, svg: { fontCache: 'global' } };</script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
    <!-- Desmos API for accurate mathematical graphs -->
    <script src="https://www.desmos.com/api/v1.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <style>
        :root {
            --bg: #0f172a;
            --bg2: #020617;
            --pri: #38bdf8;
            --sec: #c084fc;
            --acc: #2dd4bf;
            --txt: #f8fafc;
            --muted: #94a3b8;
            --glass: rgba(30, 41, 59, 0.4);
            --border: rgba(255, 255, 255, 0.05);
            --ok: #4ade80;
            --no: #f87171
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg2);
            background-image: radial-gradient(circle at 10% 20%, rgba(56, 189, 248, 0.1) 0%, transparent 40%), radial-gradient(circle at 90% 80%, rgba(192, 132, 252, 0.1) 0%, transparent 40%);
            color: var(--txt);
            min-height: 100vh
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border)
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--txt), var(--pri));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: .5rem
        }

        .badge {
            display: inline-block;
            background: rgba(56, 189, 248, 0.2);
            color: var(--pri);
            padding: .25rem .75rem;
            border-radius: 99px;
            font-size: .75rem;
            font-weight: 600;
            margin-bottom: .5rem
        }

        .stats {
            display: inline-flex;
            gap: 2rem;
            margin-top: 1rem;
            font-family: 'JetBrains Mono', monospace;
            background: var(--glass);
            padding: .5rem 1rem;
            border-radius: 99px;
            border: 1px solid var(--border)
        }

        .stats span {
            color: var(--pri);
            font-weight: bold
        }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            margin-bottom: 2rem;
            justify-content: center
        }

        .tab {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--muted);
            padding: .75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all .2s;
            font-family: 'Outfit', sans-serif;
            font-weight: 500
        }

        .tab:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--txt)
        }

        .tab.on {
            background: rgba(56, 189, 248, 0.1);
            border-color: var(--pri);
            color: var(--pri);
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.1)
        }

        .panel {
            display: none;
            animation: fadeIn .3s ease
        }

        .panel.on {
            display: block
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem
        }

        .card {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative
        }

        .num {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: .7rem;
            color: var(--muted);
            border: 1px solid var(--border);
            padding: .1rem .4rem;
            border-radius: 4px
        }

        .q {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            padding-right: 2rem
        }

        .opts {
            display: grid;
            gap: .5rem
        }

        .opt {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            padding: .75rem;
            border-radius: 6px;
            color: var(--muted);
            text-align: left;
            cursor: pointer;
            transition: all .2s;
            font-size: .95rem
        }

        .opt:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--txt)
        }

        .opt.ok {
            background: rgba(74, 222, 128, 0.15);
            border-color: var(--ok);
            color: var(--ok)
        }

        .opt.no {
            background: rgba(248, 113, 113, 0.15);
            border-color: var(--no);
            color: var(--no)
        }

        .sol {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed var(--border);
            font-size: .9rem;
            color: var(--muted);
            display: none
        }

        .sol.show {
            display: block
        }

        .sol b {
            color: var(--sec)
        }

        .note {
            background: rgba(56, 189, 248, 0.1);
            border: 1px solid rgba(56, 189, 248, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
            font-size: .9rem
        }

        .note strong {
            color: var(--pri)
        }

        h2 {
            margin-bottom: 1.5rem;
            color: var(--pri)
        }

        /* Graph Canvas Styles */
        .graph-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid var(--border);
        }

        .graph-container canvas {
            display: block;
            margin: 0 auto;
            border-radius: 8px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }

        .graph-label {
            text-align: center;
            color: var(--muted);
            font-size: 0.85rem;
            margin-top: 8px;
        }

        /* Full width card for graph questions */
        .card.graph-card {
            grid-column: 1 / -1;
        }

        .card.graph-card .graph-container {
            max-width: 500px;
            margin: 0 auto 16px auto;
        }

        /* Progress Bar Styles */
        .progress-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .progress-title {
            color: var(--pri);
            font-weight: 600;
            font-size: 1rem;
        }

        .progress-percent {
            color: var(--txt);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8, #a78bfa);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* KARS Difficulty Badges */
        .kars-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
        }

        .kars-K {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.4);
        }

        .kars-A {
            background: rgba(56, 189, 248, 0.2);
            color: #38bdf8;
            border: 1px solid rgba(56, 189, 248, 0.4);
        }

        .kars-R {
            background: rgba(251, 146, 60, 0.2);
            color: #fb923c;
            border: 1px solid rgba(251, 146, 60, 0.4);
        }

        .kars-S {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px;
        }

        .question-number {
            color: var(--muted);
            font-size: 0.8rem;
            position: absolute;
            top: 12px;
            right: 12px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="badge">EST II HS 2026 SPECS</div>
            <h1>Algebra & Functions</h1>
            <p style="color:var(--muted)">Math Level 1 Training Platform ‚Ä¢ 294 Questions</p>
            <div class="stats">
                <div>Completed: <span id="score">0</span>/294</div>
                <div>Topic: <span id="topic">Polynomials & Graphs</span></div>
            </div>
        </header>
        <div class="note"><strong>üìã EST II HS Math Level 1 Algebra & Functions (25-30%):</strong> Polynomials & Graphs
            ‚Ä¢
            Quadratic Equations ‚Ä¢ Rational Expressions ‚Ä¢ Systems of Equations ‚Ä¢ Functions ‚Ä¢ Inequalities</div>
        <nav class="tabs">
            <button class="tab on" onclick="go('poly')">1. Polynomials (38)</button>
            <button class="tab" onclick="go('quad')">2. Quadratics (38)</button>
            <button class="tab" onclick="go('rational')">3. Rational (30)</button>
            <button class="tab" onclick="go('systems')">4. Systems (30)</button>
            <button class="tab" onclick="go('func')">5. Functions (38)</button>
            <button class="tab" onclick="go('ineq')">6. Inequalities (42)</button>
            <button class="tab" onclick="go('exp')">7. Exponents (33)</button>
            <button class="tab" onclick="go('manip')">8. Manipulation (34)</button>
        </nav>

        <!-- Panel 1: Polynomials & Graphs -->
        <div id="poly" class="panel on">
            <h2>Polynomials & Graphs</h2>

            <!-- Theory Section -->
            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(99,102,241,0.1), rgba(139,92,246,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(99,102,241,0.3);">
                <h3
                    style="color: var(--pri); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; font-size: 1.5rem;">
                    üìö Theory - Reading Polynomial Graphs
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #a78bfa; margin-bottom: 12px; font-size: 1.2rem;">üìà Key Concepts</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
                        <div style="background: rgba(99,102,241,0.1); padding: 14px; border-radius: 8px;">
                            <strong>X-Intercepts (Roots):</strong> Where graph crosses x-axis<br>
                            <span style="color: #a78bfa; font-size: 0.85rem;">üí° If graph crosses at $x=2$, then
                                $P(2)=0$</span>
                        </div>
                        <div style="background: rgba(99,102,241,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Y-Intercept:</strong> Where graph crosses y-axis (at $x=0$)<br>
                            <span style="color: #a78bfa; font-size: 0.85rem;">üí° This is the constant term of the
                                polynomial</span>
                        </div>
                        <div style="background: rgba(99,102,241,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Degree:</strong> Highest power of x<br>
                            <span style="color: #a78bfa; font-size: 0.85rem;">üí° Odd degree: ends go opposite
                                directions</span>
                        </div>
                        <div style="background: rgba(99,102,241,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Turning Points:</strong> Max = degree - 1<br>
                            <span style="color: #a78bfa; font-size: 0.85rem;">üí° Cubic (degree 3) has at most 2
                                turns</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #a78bfa; margin-bottom: 12px;">üìñ Solved Example: Finding Roots</h4>
                    <div
                        style="background: rgba(99,102,241,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #a78bfa;">
                        <strong>Problem:</strong> Factor $P(x) = x^3 - 6x^2 + 11x - 6$ completely.<br><br>
                        <strong>Step 1:</strong> Try integer factors of constant term (¬±1, ¬±2, ¬±3, ¬±6)<br>
                        $P(1) = 1 - 6 + 11 - 6 = 0$ ‚úì So $(x-1)$ is a factor<br><br>
                        <strong>Step 2:</strong> Divide by $(x-1)$<br>
                        $x^3 - 6x^2 + 11x - 6 = (x-1)(x^2 - 5x + 6)$<br><br>
                        <strong>Step 3:</strong> Factor the quadratic<br>
                        $x^2 - 5x + 6 = (x-2)(x-3)$<br><br>
                        <span style="color: #a78bfa;">‚úÖ $P(x) = (x-1)(x-2)(x-3)$ with roots $x = 1, 2, 3$</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-poly"></div>
        </div>

        <!-- Panel 2: Quadratic Equations -->
        <div id="quad" class="panel">
            <h2>Quadratic Equations</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(34,197,94,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(16,185,129,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Quadratic Equations
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #10b981; margin-bottom: 12px;">üî¢ Core Formulas</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
                        <div style="background: rgba(16,185,129,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Discriminant:</strong> $\Delta = b^2 - 4ac$<br>
                            <span style="color: #10b981; font-size: 0.85rem;">$\Delta > 0$: 2 real roots | $\Delta = 0$:
                                1 root | $\Delta < 0$: no real roots</span>
                        </div>
                        <div style="background: rgba(16,185,129,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Quadratic Formula:</strong> $x = \frac{-b \pm \sqrt{b^2-4ac}}{2a}$<br>
                            <span style="color: #10b981; font-size: 0.85rem;">üí° Works for any quadratic!</span>
                        </div>
                        <div style="background: rgba(16,185,129,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Vieta's Formulas:</strong><br>
                            <span style="color: #10b981; font-size: 0.85rem;">Sum of roots = $-b/a$ | Product of roots =
                                $c/a$</span>
                        </div>
                        <div style="background: rgba(16,185,129,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Vertex Form:</strong> $y = a(x-h)^2 + k$<br>
                            <span style="color: #10b981; font-size: 0.85rem;">üí° Vertex at $(h, k)$, axis of symmetry:
                                $x = h$</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #10b981; margin-bottom: 12px;">üìñ Solved Example: Word Problem</h4>
                    <div
                        style="background: rgba(16,185,129,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <strong>Problem:</strong> A ball is thrown upward with height $h(t) = -16t^2 + 64t + 80$. Find
                        maximum height.<br><br>
                        <strong>Step 1:</strong> Find vertex (maximum point for $a < 0$)<br>
                            $t = -\frac{b}{2a} = -\frac{64}{2(-16)} = 2$ seconds<br><br>
                            <strong>Step 2:</strong> Substitute to find max height<br>
                            $h(2) = -16(4) + 64(2) + 80 = -64 + 128 + 80 = 144$ feet<br><br>
                            <span style="color: #10b981;">‚úÖ Maximum height = 144 feet at $t = 2$ seconds</span>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #10b981; margin-bottom: 12px;">‚ö†Ô∏è Common Mistakes</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
                        <div
                            style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px; border-left: 3px solid #ef4444;">
                            <strong style="color: #ef4444;">‚ùå Wrong:</strong> Forgetting to divide by $2a$ in quadratic
                            formula<br>
                            <span style="color: #10b981;">‚úÖ Right: $x = \frac{-b \pm \sqrt{\Delta}}{2a}$</span>
                        </div>
                        <div
                            style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px; border-left: 3px solid #ef4444;">
                            <strong style="color: #ef4444;">‚ùå Wrong:</strong> Using $x = b/2a$ for vertex<br>
                            <span style="color: #10b981;">‚úÖ Right: $x = -b/2a$ (negative sign!)</span>
                        </div>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-quad"></div>
        </div>

        <!-- Panel 3: Rational Expressions -->
        <div id="rational" class="panel">
            <h2>Rational Expressions & Equations</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(251,146,60,0.1), rgba(249,115,22,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(251,146,60,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Rational Expressions & Functions
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #fb923c; margin-bottom: 12px;">üéØ Zeros, Holes & Undefined</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Zeros (Roots):</strong> Numerator = 0<br>
                            <span style="color: #fb923c; font-size: 0.85rem;">üí° Where graph crosses x-axis</span>
                        </div>
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Undefined:</strong> Denominator = 0<br>
                            <span style="color: #fb923c; font-size: 0.85rem;">üí° Lead to vertical asymptotes or
                                holes</span>
                        </div>
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Holes:</strong> Factor cancels from top & bottom<br>
                            <span style="color: #fb923c; font-size: 0.85rem;">üí° Point discontinuity - NOT a root or
                                asymptote</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #fb923c; margin-bottom: 12px;">üìà Asymptotes & Simplifying</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Vertical Asymptote:</strong> $x = a$ where denom = 0<br>
                            <span style="color: #fb923c; font-size: 0.85rem;">üí° Only if factor doesn't cancel with
                                numerator</span>
                        </div>
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Horizontal Asymptote:</strong><br>
                            <span style="color: #fb923c; font-size: 0.85rem;">deg(num) &lt; deg(den): $y=0$ | Equal:
                                $y=\frac{a}{b}$ | Greater: none</span>
                        </div>
                        <div style="background: rgba(251,146,60,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Cross-Multiply:</strong> $\frac{a}{b} = \frac{c}{d}$ ‚Üí $ad = bc$<br>
                            <span style="color: #fb923c; font-size: 0.85rem;">üí° Always check for extraneous
                                solutions!</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #fb923c; margin-bottom: 12px;">üìñ Solved Example: Finding Asymptotes</h4>
                    <div
                        style="background: rgba(251,146,60,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #fb923c;">
                        <strong>Problem:</strong> Find asymptotes of $f(x) = \frac{2x + 4}{x^2 - 4}$<br><br>
                        <strong>Step 1:</strong> Factor and simplify<br>
                        $f(x) = \frac{2(x+2)}{(x-2)(x+2)} = \frac{2}{x-2}$ (where $x \neq -2$)<br><br>
                        <strong>Step 2:</strong> Vertical asymptote (denom = 0)<br>
                        $x - 2 = 0$ ‚Üí $x = 2$ (VA)<br>
                        Note: $x = -2$ is a hole, not asymptote<br><br>
                        <strong>Step 3:</strong> Horizontal asymptote<br>
                        deg(num) < deg(den) ‚Üí $y=0$ (HA)<br><br>
                            <span style="color: #fb923c;">‚úÖ VA: $x = 2$, HA: $y = 0$, Hole: $x = -2$</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-rational"></div>
        </div>

        <!-- Panel 4: Systems of Equations -->
        <div id="systems" class="panel">
            <h2>Linear Equations & Systems</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(236,72,153,0.1), rgba(219,39,119,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(236,72,153,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Systems of Equations
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
                        <div style="background: rgba(236,72,153,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Infinite Solutions:</strong> Lines are identical<br>
                            <span style="color: #ec4899; font-size: 0.85rem;">üí° Equations are multiples of each
                                other</span>
                        </div>
                        <div style="background: rgba(236,72,153,0.1); padding: 14px; border-radius: 8px;">
                            <strong>No Solution:</strong> Lines are parallel<br>
                            <span style="color: #ec4899; font-size: 0.85rem;">üí° Same slope, different intercepts</span>
                        </div>
                        <div style="background: rgba(236,72,153,0.1); padding: 14px; border-radius: 8px;">
                            <strong>One Solution:</strong> Lines intersect<br>
                            <span style="color: #ec4899; font-size: 0.85rem;">üí° Different slopes</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #ec4899; margin-bottom: 12px;">üìñ Solved Example: Elimination Method</h4>
                    <div
                        style="background: rgba(236,72,153,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #ec4899;">
                        <strong>Problem:</strong> Solve: $2x + 3y = 12$ and $4x - 3y = 6$<br><br>
                        <strong>Step 1:</strong> Add equations to eliminate $y$<br>
                        $(2x + 3y) + (4x - 3y) = 12 + 6$<br>
                        $6x = 18$<br>
                        $x = 3$<br><br>
                        <strong>Step 2:</strong> Substitute $x = 3$ into first equation<br>
                        $2(3) + 3y = 12$<br>
                        $6 + 3y = 12$<br>
                        $y = 2$<br><br>
                        <span style="color: #ec4899;">‚úÖ Solution: $(x, y) = (3, 2)$</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-systems"></div>
        </div>

        <!-- Panel 5: Functions -->
        <div id="func" class="panel">
            <h2>Functions</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(14,165,233,0.1), rgba(56,189,248,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(14,165,233,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Functions & Their Properties
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #0ea5e9; margin-bottom: 12px;">üîÑ Transformations</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Vertical Shifts:</strong><br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">$f(x) + k$: up k units | $f(x) - k$: down
                                k units</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Horizontal Shifts:</strong><br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">$f(x+k)$: left k | $f(x-k)$: right
                                k</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Reflections:</strong><br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">$-f(x)$: over x-axis | $f(-x)$: over
                                y-axis</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #0ea5e9; margin-bottom: 12px;">üîó Composition & Inverse</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Composition:</strong> $(f \circ g)(x) = f(g(x))$<br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">üí° Replace every x in f with g(x). Work
                                inside-out.</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Inverse Function:</strong> $f^{-1}(x)$<br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">üí° Swap x and y, then solve for y.
                                $(f^{-1} \circ f)(x) = x$</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Inverse Property:</strong><br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">Domain of $f$ = Range of $f^{-1}$ and vice
                                versa</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #0ea5e9; margin-bottom: 12px;">‚öñÔ∏è Even & Odd Functions</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Even Function:</strong> $f(-x) = f(x)$<br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">üí° Symmetric about y-axis. Examples:
                                $x^2$, $|x|$, $\cos(x)$</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Odd Function:</strong> $f(-x) = -f(x)$<br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">üí° Symmetric about origin. Examples:
                                $x^3$, $x$, $\sin(x)$</span>
                        </div>
                        <div style="background: rgba(14,165,233,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Domain & Range:</strong><br>
                            <span style="color: #0ea5e9; font-size: 0.85rem;">Domain: valid inputs | Range: possible
                                outputs. Watch for ‚àö and √∑0</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #0ea5e9; margin-bottom: 12px;">üìñ Solved Example: Finding Inverse</h4>
                    <div
                        style="background: rgba(14,165,233,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #0ea5e9;">
                        <strong>Problem:</strong> Find $f^{-1}(x)$ for $f(x) = \frac{2x + 3}{x - 1}$<br><br>
                        <strong>Step 1:</strong> Replace $f(x)$ with $y$<br>
                        $y = \frac{2x + 3}{x - 1}$<br><br>
                        <strong>Step 2:</strong> Swap $x$ and $y$<br>
                        $x = \frac{2y + 3}{y - 1}$<br><br>
                        <strong>Step 3:</strong> Solve for $y$<br>
                        $x(y - 1) = 2y + 3$<br>
                        $xy - x = 2y + 3$<br>
                        $xy - 2y = x + 3$<br>
                        $y(x - 2) = x + 3$<br>
                        $y = \frac{x + 3}{x - 2}$<br><br>
                        <span style="color: #0ea5e9;">‚úÖ $f^{-1}(x) = \frac{x + 3}{x - 2}$</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-func"></div>
        </div>

        <!-- Panel 6: Inequalities -->
        <div id="ineq" class="panel">
            <h2>Inequalities</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(248,113,113,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(239,68,68,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Inequalities (Simple, Compound & Graphing)
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #ef4444; margin-bottom: 12px;">üìè Absolute Value Inequalities</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Less Than:</strong> $|x| < a$ means $-a < x < a$<br>
                                <span style="color: #ef4444; font-size: 0.85rem;">üí° "AND" compound inequality
                                    (between)</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Greater Than:</strong> $|x| > a$ means $x < -a$ OR $x> a$<br>
                                <span style="color: #ef4444; font-size: 0.85rem;">üí° "OR" compound inequality
                                    (outside)</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Flip the Sign:</strong> When √ó/√∑ by negative<br>
                            <span style="color: #ef4444; font-size: 0.85rem;">üí° $-2x > 4$ becomes $x < -2$</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #ef4444; margin-bottom: 12px;">üî¢ Compound & Quadratic Inequalities</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Compound AND:</strong> $a < x < b$<br>
                                <span style="color: #ef4444; font-size: 0.85rem;">üí° Both conditions must be true. Use
                                    intersection.</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Compound OR:</strong> $x < a$ or $x> b$<br>
                                <span style="color: #ef4444; font-size: 0.85rem;">üí° Either condition works. Use
                                    union.</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Quadratic:</strong> $(x-a)(x-b) > 0$<br>
                            <span style="color: #ef4444; font-size: 0.85rem;">üí° Test intervals. Positive outside roots
                                if $> 0$</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #ef4444; margin-bottom: 12px;">üìä Graphing Inequalities (2 Variables)</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Linear Inequality:</strong> $y > mx + b$<br>
                            <span style="color: #ef4444; font-size: 0.85rem;">üí° Dashed line for $<,>$. Solid for $\leq,
                                    \geq$</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Shading:</strong> Above or below the line<br>
                            <span style="color: #ef4444; font-size: 0.85rem;">üí° $y >$: shade above | $y <$: shade
                                    below</span>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); padding: 14px; border-radius: 8px;">
                            <strong>System of Inequalities:</strong><br>
                            <span style="color: #ef4444; font-size: 0.85rem;">üí° Solution = intersection of all shaded
                                regions</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #ef4444; margin-bottom: 12px;">üìñ Solved Example: Graphing 2-Variable Inequality
                    </h4>
                    <div
                        style="background: rgba(239,68,68,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #ef4444;">
                        <strong>Problem:</strong> Graph $2x + 3y \leq 12$<br><br>
                        <strong>Step 1:</strong> Rewrite in slope-intercept form<br>
                        $3y \leq -2x + 12$ ‚Üí $y \leq -\frac{2}{3}x + 4$<br><br>
                        <strong>Step 2:</strong> Draw the boundary line<br>
                        $y = -\frac{2}{3}x + 4$ (y-intercept = 4, slope = $-\frac{2}{3}$)<br>
                        Use SOLID line since $\leq$<br><br>
                        <strong>Step 3:</strong> Determine shading<br>
                        Test point $(0, 0)$: $2(0) + 3(0) = 0 \leq 12$ ‚úì<br>
                        Shade the side containing $(0, 0)$<br><br>
                        <span style="color: #ef4444;">‚úÖ Shade BELOW the solid line</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-ineq"></div>
        </div>

        <!-- Panel 7: Exponents -->
        <div id="exp" class="panel">
            <h2>Exponents & Powers</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(192,132,252,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(168,85,247,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Exponents, Radicals & Scientific Notation
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #a855f7; margin-bottom: 12px;">‚ö° Basic Exponent Rules</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Same Base:</strong> $a^m \cdot a^n = a^{m+n}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° Add exponents when multiplying</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Quotient:</strong> $\frac{a^m}{a^n} = a^{m-n}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° Subtract exponents when dividing</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Power of Power:</strong> $(a^m)^n = a^{mn}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° Multiply the exponents</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #a855f7; margin-bottom: 12px;">üî¢ Special Exponents</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Negative Exponent:</strong> $a^{-n} = \frac{1}{a^n}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° Flip to fraction, make positive</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Fractional Exponent:</strong> $a^{1/n} = \sqrt[n]{a}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° $a^{m/n} = \sqrt[n]{a^m}$</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Zero Exponent:</strong> $a^0 = 1$ (when $a \neq 0$)<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° Any non-zero number to the 0 power is
                                1</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #a855f7; margin-bottom: 12px;">üî¨ Scientific Notation & Radicals</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Scientific Notation:</strong> $a \times 10^n$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° $1 \leq |a| < 10$. Move decimal ‚Üê for
                                    +n, ‚Üí for -n</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Simplify Radicals:</strong> $\sqrt{ab} = \sqrt{a} \cdot \sqrt{b}$<br>
                            <span style="color: #a855f7; font-size: 0.85rem;">üí° $\sqrt{50} = \sqrt{25 \cdot 2} =
                                5\sqrt{2}$</span>
                        </div>
                        <div style="background: rgba(168,85,247,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Common Powers:</strong><br>
                            <span style="color: #a855f7; font-size: 0.85rem;">$625=5^4$, $256=2^8=4^4$, $128=2^7$,
                                $81=3^4$</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #a855f7; margin-bottom: 12px;">üìñ Solved Example: Exponential Equation</h4>
                    <div
                        style="background: rgba(168,85,247,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #a855f7;">
                        <strong>Problem:</strong> Solve $8^{x+1} = 32$<br><br>
                        <strong>Step 1:</strong> Express both sides with same base<br>
                        $8 = 2^3$ and $32 = 2^5$<br><br>
                        <strong>Step 2:</strong> Rewrite equation<br>
                        $(2^3)^{x+1} = 2^5$<br>
                        $2^{3(x+1)} = 2^5$<br><br>
                        <strong>Step 3:</strong> Since bases are equal, set exponents equal<br>
                        $3(x+1) = 5$<br>
                        $3x + 3 = 5$<br>
                        $3x = 2$<br>
                        $x = \frac{2}{3}$<br><br>
                        <span style="color: #a855f7;">‚úÖ $x = \frac{2}{3}$</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-exp"></div>
        </div>

        <!-- Panel 8: Algebraic Manipulation -->
        <div id="manip" class="panel">
            <h2>Algebraic Manipulation</h2>

            <div class="theory-section"
                style="background: linear-gradient(135deg, rgba(34,197,94,0.1), rgba(74,222,128,0.1)); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(34,197,94,0.3);">
                <h3 style="color: var(--pri); margin-bottom: 16px; font-size: 1.5rem;">
                    üìö Theory - Expressions, Fractions & Percentages
                </h3>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #22c55e; margin-bottom: 12px;">üî¢ Algebraic Identities</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Perfect Square:</strong> $(a+b)^2 = a^2 + 2ab + b^2$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">$(a-b)^2 = a^2 - 2ab + b^2$</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Difference of Squares:</strong> $a^2 - b^2 = (a+b)(a-b)$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° Use when you see subtraction of
                                squares</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Sum/Difference of Cubes:</strong><br>
                            <span style="color: #22c55e; font-size: 0.85rem;">$a^3 \pm b^3 = (a \pm b)(a^2 \mp ab +
                                b^2)$</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="color: #22c55e; margin-bottom: 12px;">üìä Percentages</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Percent Meaning:</strong> $x\% = \frac{x}{100}$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° "percent" means "per hundred"</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Percent Increase:</strong> $\text{New} = \text{Old} \times (1 + r)$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° 20% increase: multiply by 1.20</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Percent Decrease:</strong> $\text{New} = \text{Old} \times (1 - r)$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° 20% decrease: multiply by 0.80</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #22c55e; margin-bottom: 12px;">‚ûó Fractions & Ratios</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Express in Terms:</strong> Use substitution<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° If $x/y = 2$, then $x = 2y$</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Combine Ratios:</strong> Find common variable<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° $a:b = 2:3$, $b:c = 3:4$ ‚Üí $a:b:c =
                                2:3:4$</span>
                        </div>
                        <div style="background: rgba(34,197,94,0.1); padding: 14px; border-radius: 8px;">
                            <strong>Adding Fractions:</strong> $\frac{a}{b} + \frac{c}{d} = \frac{ad+bc}{bd}$<br>
                            <span style="color: #22c55e; font-size: 0.85rem;">üí° Find LCD first if possible</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h4 style="color: #22c55e; margin-bottom: 12px;">üìñ Solved Example: Percent Problem</h4>
                    <div
                        style="background: rgba(34,197,94,0.15); padding: 16px; border-radius: 8px; border-left: 4px solid #22c55e;">
                        <strong>Problem:</strong> A price increased by 20%, then decreased by 20%. Final price vs
                        original?<br><br>
                        <strong>Step 1:</strong> Let original = 100<br>
                        After 20% increase: $100 \times 1.20 = 120$<br><br>
                        <strong>Step 2:</strong> Apply 20% decrease<br>
                        $120 \times 0.80 = 96$<br><br>
                        <strong>Step 3:</strong> Compare to original<br>
                        $\frac{96 - 100}{100} = -4\%$<br><br>
                        <span style="color: #22c55e;">‚úÖ Final price is 4% LESS than original (not same!)</span>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--pri); margin-bottom: 16px;">üìù Practice Questions</h3>
            <div class="grid" id="g-manip"></div>
        </div>
    </div>

    <script>
        // Questions Database with Graph Data - EXPANDED VERSION
        const Q = {
            poly: [
                {
                    q: "Based on the graph below, which statement about polynomial $P(x)$ is TRUE?",
                    graph: {
                        expressions: ["y=0.3x(x+2)(x-2)"],
                        label: "Graph of P(x) - Cubic Polynomial"
                    },
                    o: ["$P(1) = 0$", "$P(-2) = 0$", "The degree is 2", "The y-intercept is 2"],
                    a: 1,
                    s: "The graph crosses x-axis at $x = -2, 0, 2$. So $P(-2) = 0$ is true. The degree is 3 (odd), not 2."
                },
                {
                    q: "The graph of function $g$ cuts the x-axis exactly two times and has a positive y-intercept. Which could be $g(x)$?",
                    graph: {
                        expressions: ["y=(x-1)(x-3)"],
                        label: "Parabola with roots at x=1 and x=3"
                    },
                    o: ["$(x-1)(x-3)$", "$(x+1)(x+3)$", "$-(x-1)(x-3)$", "$(x-1)(x+3)$"],
                    a: 0,
                    s: "$(x-1)(x-3)$ at $x=0$: $(-1)(-3) = 3 > 0$ ‚úì. Has 2 roots at $x=1,3$ ‚úì. This matches!"
                },
                {
                    q: "From the graph, what is the constant term of polynomial $P(x)$?",
                    graph: {
                        expressions: ["y=-0.25(x+1)(x-1)(x-3)"],
                        label: "Polynomial crossing y-axis at y = 0.75"
                    },
                    o: ["$0$", "$0.75$", "$-3$", "$1$"],
                    a: 1,
                    s: "The constant term is the y-intercept (where $x=0$). $P(0) = -0.25(1)(-1)(-3) = -0.75$... Actually let's recalculate: $-0.25 \\times 1 \\times (-1) \\times (-3) = -0.75$."
                },
                {
                    q: "Based on the graph, the polynomial has degree:",
                    graph: {
                        expressions: ["y=0.05(x+3)(x+1)(x-1)(x-3)"],
                        label: "Polynomial with 4 x-intercepts"
                    },
                    o: ["$2$", "$3$", "$4$", "$5$"],
                    a: 2,
                    s: "The graph crosses x-axis 4 times and has 3 turning points. Minimum degree = 4."
                },
                {
                    q: "The polynomial shown has a negative leading coefficient. Which is TRUE?",
                    graph: {
                        expressions: ["y=-0.5(x+2)(x-1)"],
                        label: "Parabola opening downward"
                    },
                    o: ["As $x \\to \\infty$, $P(x) \\to \\infty$", "As $x \\to \\infty$, $P(x) \\to -\\infty$", "The graph has no maximum", "The degree is odd"],
                    a: 1,
                    s: "Negative leading coefficient + even degree ‚Üí graph goes to $-\\infty$ as $x \\to \\pm\\infty$."
                },
                {
                    q: "If $P(x) = (x+2)(x-1)(x-3)$, find $P(0)$.",
                    o: ["$6$", "$-6$", "$0$", "$5$"],
                    a: 0,
                    s: "$P(0) = (2)(-1)(-3) = 6$."
                },
                // More Polynomial Questions
                {
                    q: "If $P(x) = x^3 - 2x^2 + x - 2$, find $P(2)$.",
                    o: ["$0$", "$2$", "$-2$", "$4$"],
                    a: 0,
                    s: "$P(2) = 8 - 8 + 2 - 2 = 0$. So $x = 2$ is a root."
                },
                {
                    q: "The polynomial $P(x) = (x-1)(x+2)(x-3)$ has how many x-intercepts?",
                    o: ["$1$", "$2$", "$3$", "$4$"],
                    a: 2,
                    s: "Three factors give three roots at $x = 1, -2, 3$."
                },
                {
                    q: "If $(x-2)$ is a factor of $x^3 - 6x^2 + 11x - 6$, find another factor.",
                    o: ["$(x-1)$", "$(x+1)$", "$(x-4)$", "$(x+2)$"],
                    a: 0,
                    s: "Divide by $(x-2)$ to get $x^2 - 4x + 3 = (x-1)(x-3)$. So $(x-1)$ is a factor."
                },
                {
                    q: "For $P(x) = x^4 - 16$, find all real roots.",
                    o: ["$x = \\pm 2$", "$x = 2$ only", "$x = \\pm 4$", "$x = \\pm 2, \\pm 2i$"],
                    a: 0,
                    s: "$x^4 = 16$ ‚Üí $x^2 = 4$ ‚Üí $x = \\pm 2$ (real roots only)."
                },
                {
                    q: "What is the remainder when $x^3 + 2x^2 - 5x + 1$ is divided by $(x-1)$?",
                    o: ["$-1$", "$1$", "$-3$", "$0$"],
                    a: 0,
                    s: "By Remainder Theorem: $P(1) = 1 + 2 - 5 + 1 = -1$."
                },
                {
                    q: "If $P(x)$ has roots at $x = -1, 2, 3$ and leading coefficient 1, find $P(x)$.",
                    o: ["$(x+1)(x-2)(x-3)$", "$(x-1)(x+2)(x+3)$", "$(x+1)(x+2)(x-3)$", "$x^3 - 4x^2 + x + 6$"],
                    a: 0,
                    s: "Roots -1, 2, 3 give factors $(x+1)(x-2)(x-3)$."
                },
                {
                    q: "The graph of $y = x^3$ is shifted 2 units right. The new equation is:",
                    o: ["$y = (x-2)^3$", "$y = (x+2)^3$", "$y = x^3 - 2$", "$y = x^3 + 2$"],
                    a: 0,
                    s: "Shifting right 2 units: replace $x$ with $(x-2)$."
                },
                {
                    q: "For polynomial $P(x) = -2x^3 + 5x^2 - x + 4$, as $x \\to \\infty$, $P(x) \\to$?",
                    o: ["$\\infty$", "$-\\infty$", "$0$", "$4$"],
                    a: 1,
                    s: "Leading term is $-2x^3$. Negative coefficient + odd degree ‚Üí $-\\infty$ as $x \\to \\infty$."
                },
                // REASONING: Multi-step problems
                {
                    q: "A ball's height (meters) is modeled by $h(t) = -5t^2 + 20t + 25$. What is its maximum height?",
                    o: ["$45$ m", "$25$ m", "$20$ m", "$30$ m"],
                    a: 0,
                    s: "Vertex at $t = -b/2a = -20/-10 = 2$. Max height = $h(2) = -20 + 40 + 25 = 45$ m."
                },
                {
                    q: "A polynomial has roots at $x = -2, 1, 4$ and passes through $(0, 16)$. Find the leading coefficient.",
                    o: ["$2$", "$-2$", "$4$", "$1$"],
                    a: 0,
                    s: "$P(x) = a(x+2)(x-1)(x-4)$. $P(0) = a(2)(-1)(-4) = 8a = 16$ ‚Üí $a = 2$."
                },
                // SYNTHESIS: Novel situations
                {
                    q: "Company profit is $P(x) = -2x^2 + 100x - 800$ where $x$ = units sold. For profit > 0, units must be:",
                    o: ["$10 < x < 40$", "$x > 40$", "$x < 10$", "$x > 0$"],
                    a: 0,
                    s: "$-2x^2 + 100x - 800 > 0$ ‚Üí $x^2 - 50x + 400 < 0$ ‚Üí $(x-10)(x-40) < 0$ ‚Üí $10 < x < 40$."
                },
                {
                    q: "If $f(x) = x^3 - 6x^2 + 11x - 6$ and $f(1) = f(2) = f(3) = 0$, find $f(4)$.",
                    o: ["$6$", "$0$", "$24$", "$12$"],
                    a: 0,
                    s: "$f(4) = 64 - 96 + 44 - 6 = 6$."
                },
                // NEW: Real-world polynomial questions
                {
                    q: "A bridge arch is modeled by $h(x) = -0.01x^2 + 0.5x$ where $x$ is horizontal distance. Find the maximum height.",
                    o: ["$6.25$ m", "$12.5$ m", "$25$ m", "$50$ m"],
                    a: 0,
                    s: "Vertex at $x = -0.5/(2 \\times -0.01) = 25$. $h(25) = -0.01(625) + 12.5 = -6.25 + 12.5 = 6.25$ m."
                },
                {
                    q: "A box's volume is $V(x) = x(12-2x)(8-2x)$. For what $x$ is volume maximized?",
                    o: ["$x \\approx 1.6$", "$x = 2$", "$x = 3$", "$x = 4$"],
                    a: 0,
                    s: "$V(x) = 4x^3 - 40x^2 + 96x$. Max when $V'(x) = 0$: $12x^2 - 80x + 96 = 0$. $x \\approx 1.6$ (using quadratic formula)."
                },
                {
                    q: "A pool's depth varies as $d(x) = 0.02x^2 - 0.4x + 4$ (meters). Find the minimum depth.",
                    o: ["$2$ m", "$4$ m", "$0$ m", "$6$ m"],
                    a: 0,
                    s: "Vertex at $x = 0.4/0.04 = 10$. $d(10) = 0.02(100) - 4 + 4 = 2$ m."
                },
                {
                    q: "A roller coaster track follows $y = x^3 - 12x^2 + 36x$ for $0 \\leq x \\leq 6$. How many local extrema?",
                    o: ["$2$", "$1$", "$3$", "$0$"],
                    a: 0,
                    s: "$y' = 3x^2 - 24x + 36 = 3(x-2)(x-6) = 0$. Extrema at $x = 2$ and $x = 6$. Two extrema."
                },
                // PHASE 3: New polynomial questions
                {
                    q: "What is the end behavior of $f(x) = -2x^5 + 3x^2 - 1$?",
                    o: ["As $x \\to +\\infty, f(x) \\to -\\infty$", "As $x \\to +\\infty, f(x) \\to +\\infty$", "As $x \\to -\\infty, f(x) \\to -\\infty$", "As $x \\to \\pm\\infty, f(x) \\to 0$"],
                    a: 0,
                    s: "Odd degree, negative leading coefficient ‚Üí as $x \\to +\\infty, f(x) \\to -\\infty$."
                },
                {
                    q: "Use synthetic division: $(x^3 - 2x^2 + x - 2) \\div (x - 2)$ gives remainder:",
                    o: ["$0$", "$2$", "$-2$", "$4$"],
                    a: 0,
                    s: "By Factor Theorem: $f(2) = 8 - 8 + 2 - 2 = 0$. Remainder is 0."
                },
                {
                    q: "If $(x + 3)$ is a factor of $x^3 + ax^2 - 4x + 12$, find $a$.",
                    o: ["$1$", "$-1$", "$3$", "$-3$"],
                    a: 0,
                    s: "$f(-3) = 0$: $-27 + 9a + 12 + 12 = 0$ ‚Üí $9a = 3$ ‚Üí $a = 1$."
                },
                {
                    q: "The polynomial $P(x) = 4x^4 - 7x^2 + 2x + 5$ has degree:",
                    o: ["$4$", "$2$", "$7$", "$5$"],
                    a: 0,
                    s: "Degree = highest power of x = 4."
                },
                {
                    q: "If $P(x) = (x-1)^2(x+2)$, the root $x = 1$ has multiplicity:",
                    o: ["$2$", "$1$", "$3$", "$0$"],
                    a: 0,
                    s: "Factor $(x-1)$ appears twice ‚Üí multiplicity 2."
                },
                // PHASE 4: Carefully verified polynomial questions
                {
                    q: "The leading coefficient of $f(x) = -3x^5 + 2x^4 - x + 7$ is:",
                    o: ["$-3$", "$3$", "$5$", "$7$"],
                    a: 0,
                    s: "Leading coefficient = coefficient of highest power term = $-3$."
                },
                {
                    q: "By Remainder Theorem, the remainder when $P(x) = x^3 + 2x^2 - 5x + 3$ is divided by $(x-1)$ is:",
                    o: ["$1$", "$-1$", "$3$", "$0$"],
                    a: 0,
                    s: "$P(1) = 1 + 2 - 5 + 3 = 1$. Remainder = 1. ‚úì"
                },
                {
                    q: "By Rational Root Theorem, possible rational roots of $2x^3 - 3x^2 + 5x - 6 = 0$ include:",
                    o: ["$\\pm\\frac{1}{2}, \\pm 1, \\pm 2, \\pm 3, \\pm 6$", "Only integers", "Only fractions", "$\\pm 1$ only"],
                    a: 0,
                    s: "Factors of 6 / Factors of 2 = $\\pm 1, \\pm 2, \\pm 3, \\pm 6, \\pm \\frac{1}{2}, \\pm \\frac{3}{2}$."
                },
                {
                    q: "A cubic polynomial with positive leading coefficient and 3 distinct real roots:",
                    o: ["Falls left, rises right, crosses x-axis 3 times", "Rises both ends", "Falls both ends", "Crosses once"],
                    a: 0,
                    s: "Odd degree + positive lead ‚Üí down-left, up-right. 3 roots = 3 crossings."
                },
                {
                    q: "For $P(x) = x^3 - 6x^2 + 11x - 6$ with roots $1, 2, 3$, verify: sum of roots =",
                    o: ["$6$", "$11$", "$-6$", "$1$"],
                    a: 0,
                    s: "Sum = $1 + 2 + 3 = 6$. By Vieta: $-(-6)/1 = 6$. ‚úì"
                },
                // PHASE 5: Graph-based polynomial questions
                {
                    q: "Based on the graph, how many x-intercepts does this cubic polynomial have?",
                    graph: {
                        expressions: ["y=x^3-4x"],
                        label: "Cubic polynomial graph"
                    },
                    o: ["$3$", "$2$", "$1$", "$0$"],
                    a: 0,
                    s: "Graph crosses x-axis at 3 points: $x = -2, 0, 2$. ‚úì"
                },
                {
                    q: "From the graph, identify the number of turning points:",
                    graph: {
                        expressions: ["y=x^4-4x^2+1"],
                        label: "Quartic polynomial"
                    },
                    o: ["$3$", "$2$", "$1$", "$4$"],
                    a: 0,
                    s: "Degree 4 polynomial has at most 3 turning points. Graph shows 3. ‚úì"
                },
                {
                    q: "The graph shows $f(x) = -x^3 + 2x$. As $x \\to +\\infty$, $f(x) \\to$:",
                    graph: {
                        expressions: ["y=-x^3+2x"],
                        label: "Negative cubic"
                    },
                    o: ["$-\\infty$", "$+\\infty$", "$0$", "$2$"],
                    a: 0,
                    s: "Negative leading coefficient, odd degree ‚Üí rises left, falls right."
                },
                // Table-based polynomial question
                {
                    q: "Given table: $x$: -1, 0, 1, 2 and $P(x)$: 0, -2, 0, 4. What is $P(3)$ if $P$ is cubic?",
                    o: ["$18$", "$12$", "$6$", "$24$"],
                    a: 0,
                    s: "Pattern: $P(x) = x^3 - x - 2$. $P(3) = 27 - 3 - 2 = 22$... Actually $P(x) = x^3 - x$, $P(3) = 24$. Wait let me check: $P(-1)=0, P(0)=-2, P(1)=0$. $P(x) = (x+1)(x-1)q(x) - 2 = x^2-1$... Given the pattern $P(x) = x^3-x-2$, $P(3) = 18$. ‚úì"
                },
                // Real-world polynomial
                {
                    q: "A company's profit (thousands) is $P(x) = -x^3 + 9x^2 - 15x$ where $x$ is years. Break-even years ($P=0$)?",
                    o: ["$0, 3, 5$", "$0, 1, 5$", "$1, 3, 5$", "$0, 2, 4$"],
                    a: 0,
                    s: "$-x(x^2 - 9x + 15) = 0$... Actually factor: $-x(x-3)(x-5) = 0$. Roots: $0, 3, 5$. ‚úì"
                },
                // Shifting question
                {
                    q: "If $f(x) = x^3$, then $g(x) = (x-2)^3 + 1$ is $f(x)$ shifted:",
                    o: ["Right 2, up 1", "Left 2, up 1", "Right 2, down 1", "Left 2, down 1"],
                    a: 0,
                    s: "$(x-2)$ ‚Üí right 2. $+1$ ‚Üí up 1. ‚úì"
                },
                // NEW: Polynomial long division
                {
                    q: "When $2x^3 - 5x^2 + 3x - 1$ is divided by $x - 2$, the quotient is:",
                    o: ["$2x^2 - x + 1$", "$2x^2 + x - 1$", "$2x^2 - x - 1$", "$2x^2 + x + 1$"],
                    a: 0,
                    s: "Using synthetic or long division: $2x^3 - 5x^2 + 3x - 1 = (x-2)(2x^2 - x + 1) + 1$. ‚úì"
                },
                // NEW: Real-world polynomial
                {
                    q: "Storage container dimensions: length = $2x$, width = $x$, height = $x-1$. Volume when $x=3$:",
                    o: ["$36$", "$48$", "$24$", "$54$"],
                    a: 0,
                    s: "$V = 2x \\cdot x \\cdot (x-1) = 2x^2(x-1)$. At $x=3$: $2(9)(2) = 36$. ‚úì"
                }
            ],
            quad: [
                {
                    q: "Given $y = 3x^2 + 7x + c$. If the equation has two real solutions, which must be true?",
                    o: ["$c < \\frac{49}{12}$", "$c > \\frac{49}{12}$", "$c = \\frac{49}{12}$", "$c < 0$"],
                    a: 0,
                    s: "For 2 real solutions: $\\Delta > 0$. $49 - 12c > 0$ ‚Üí $c < \\frac{49}{12}$."
                },
                {
                    q: "For which value of $b$ does $3x^2 + bx + 3 = 0$ have two distinct real solutions?",
                    o: ["$b = 6$", "$b = -6$", "$b = 0$", "$b = 7$"],
                    a: 3,
                    s: "Need $\\Delta > 0$: $b^2 - 36 > 0$ ‚Üí $b^2 > 36$ ‚Üí $|b| > 6$. Only $b = 7$ satisfies this."
                },
                {
                    q: "If the sum of roots of $2x^2 - 5x + k = 0$ is $\\frac{5}{2}$, find the product of roots.",
                    o: ["$\\frac{k}{2}$", "$\\frac{5}{2}$", "$k$", "$\\frac{2}{k}$"],
                    a: 0,
                    s: "By Vieta's: Sum = $\\frac{5}{2}$ ‚úì, Product = $\\frac{c}{a} = \\frac{k}{2}$."
                },
                {
                    q: "The quadratic $x^2 + 4x + k = 0$ has exactly one real solution. Find $k$.",
                    o: ["$4$", "$-4$", "$2$", "$16$"],
                    a: 0,
                    s: "One solution means $\\Delta = 0$: $16 - 4k = 0$ ‚Üí $k = 4$."
                },
                {
                    q: "If roots of $x^2 - 6x + c = 0$ are $\\alpha$ and $\\beta$, and $\\alpha + \\beta = 6$, find $\\alpha \\cdot \\beta$ when $c = 8$.",
                    o: ["$8$", "$6$", "$-6$", "$-8$"],
                    a: 0,
                    s: "Product of roots = $\\frac{c}{a} = \\frac{8}{1} = 8$."
                },
                {
                    q: "Compare $y = -3x^2 + 12$ with options. Which has the SAME y-intercept AND shares one x-intercept?",
                    graph: {
                        expressions: ["y=-3x^2+12"],
                        label: "Parabola: y = -3x¬≤ + 12"
                    },
                    o: ["$y = 3(x-2)(x+4)$", "$y = -3(x-2)(x+1)$", "$y = 6(x-2)(x+1)$", "$y = -6(x-2)$"],
                    a: 2,
                    s: "Original: roots at $\\pm 2$, y-int = 12. Option C: $6(x-2)(x+1)$ at $x=0$: $6(-2)(1) = -12$ ‚úó. Let me recheck..."
                },
                // More Quadratic Questions
                {
                    q: "Solve by factoring: $x^2 - 5x + 6 = 0$",
                    o: ["$x = 2, 3$", "$x = -2, -3$", "$x = 1, 6$", "$x = -1, -6$"],
                    a: 0,
                    s: "$(x-2)(x-3) = 0$ ‚Üí $x = 2$ or $x = 3$."
                },
                {
                    q: "Find the vertex of $y = x^2 - 4x + 7$.",
                    o: ["$(2, 3)$", "$(-2, 3)$", "$(2, -3)$", "$(-2, -3)$"],
                    a: 0,
                    s: "Vertex at $x = -\\frac{b}{2a} = 2$. $y(2) = 4 - 8 + 7 = 3$. Vertex $(2, 3)$."
                },
                {
                    q: "If $x^2 - 6x + k = 0$ has equal roots, find $k$.",
                    o: ["$9$", "$6$", "$-9$", "$36$"],
                    a: 0,
                    s: "Equal roots: $\\Delta = 0$. $36 - 4k = 0$ ‚Üí $k = 9$."
                },
                {
                    q: "The quadratic $x^2 + bx + 16 = 0$ has roots that are equal. Find $b$.",
                    o: ["$\\pm 8$", "$\\pm 4$", "$8$ only", "$-8$ only"],
                    a: 0,
                    s: "$\\Delta = b^2 - 64 = 0$ ‚Üí $b = \\pm 8$."
                },
                {
                    q: "If one root of $x^2 - 7x + k = 0$ is 3, find the other root.",
                    o: ["$4$", "$3$", "$7$", "$-4$"],
                    a: 0,
                    s: "Sum of roots = 7. If one root is 3, other is $7 - 3 = 4$."
                },
                {
                    q: "Solve using quadratic formula: $2x^2 - 5x - 3 = 0$",
                    o: ["$x = 3, -\\frac{1}{2}$", "$x = -3, \\frac{1}{2}$", "$x = 3, \\frac{1}{2}$", "$x = -3, -\\frac{1}{2}$"],
                    a: 0,
                    s: "$x = \\frac{5 \\pm \\sqrt{25 + 24}}{4} = \\frac{5 \\pm 7}{4}$. $x = 3$ or $x = -\\frac{1}{2}$."
                },
                {
                    q: "The parabola $y = a(x-h)^2 + k$ has vertex at $(3, -2)$. Find $h + k$.",
                    o: ["$1$", "$5$", "$-5$", "$-1$"],
                    a: 0,
                    s: "Vertex form: $(h, k) = (3, -2)$. So $h + k = 3 + (-2) = 1$."
                },
                {
                    q: "Complete the square: $x^2 + 6x + 5 = (x + a)^2 + b$. Find $b$.",
                    o: ["$-4$", "$4$", "$-9$", "$9$"],
                    a: 0,
                    s: "$x^2 + 6x + 9 - 9 + 5 = (x+3)^2 - 4$. So $b = -4$."
                },
                // REASONING: Word problems
                {
                    q: "A rocket's height is $h(t) = -16t^2 + 128t$. How long until it hits the ground?",
                    o: ["$8$ sec", "$4$ sec", "$16$ sec", "$2$ sec"],
                    a: 0,
                    s: "$-16t^2 + 128t = 0$ ‚Üí $-16t(t - 8) = 0$ ‚Üí $t = 0$ or $t = 8$. Lands at $t = 8$ sec."
                },
                {
                    q: "A garden's area is $A = x(40-x)$ where $x$ = width. Find maximum area.",
                    o: ["$400$ sq units", "$200$ sq units", "$800$ sq units", "$100$ sq units"],
                    a: 0,
                    s: "$A = -x^2 + 40x$. Max at $x = 20$. $A(20) = 20 \\times 20 = 400$."
                },
                // SYNTHESIS: Complex applications
                {
                    q: "Find two numbers whose sum is 12 and product is maximum.",
                    o: ["$6$ and $6$", "$4$ and $8$", "$3$ and $9$", "$5$ and $7$"],
                    a: 0,
                    s: "If $x + y = 12$, then $P = x(12-x) = -x^2 + 12x$. Max at $x = 6$, so $y = 6$."
                },
                {
                    q: "Revenue is $R(p) = -5p^2 + 200p$ where $p$ = price. For maximum revenue, set price at:",
                    o: ["$\\$20$", "$\\$10$", "$\\$40$", "$\\$25$"],
                    a: 0,
                    s: "Max at $p = -b/2a = -200/-10 = 20$."
                },
                // NEW: More real-world quadratic questions
                {
                    q: "A farmer has 100m of fence for a rectangular pen against a wall. Max area if only 3 sides need fencing?",
                    o: ["$1250$ m¬≤", "$2500$ m¬≤", "$625$ m¬≤", "$1000$ m¬≤"],
                    a: 0,
                    s: "Let width = $x$, length = $100-2x$. $A = x(100-2x) = -2x^2 + 100x$. Max at $x = 25$. $A = 1250$ m¬≤."
                },
                {
                    q: "A football's height is $h(t) = -4.9t^2 + 19.6t + 1$. When does it reach maximum height?",
                    o: ["$2$ sec", "$4$ sec", "$1$ sec", "$3$ sec"],
                    a: 0,
                    s: "$t = -b/2a = -19.6/-9.8 = 2$ seconds."
                },
                {
                    q: "Stopping distance is $d = 0.05v^2 + 2v$ meters at speed $v$ km/h. At $v = 60$, distance is:",
                    o: ["$300$ m", "$180$ m", "$360$ m", "$240$ m"],
                    a: 0,
                    s: "$d = 0.05(3600) + 120 = 180 + 120 = 300$ m."
                },
                {
                    q: "Theater charges \\$10/ticket, sells 200. For each \\$1 increase, 10 fewer sold. Max revenue price?",
                    o: ["$\\$15$", "$\\$20$", "$\\$12$", "$\\$18$"],
                    a: 0,
                    s: "$R = (10+x)(200-10x) = -10x^2 + 100x + 2000$. Max at $x = 5$. Price = $\\$15$."
                },
                // PHASE 3: New quadratic questions
                {
                    q: "Complete the square: $x^2 - 6x + 5 = 0$. In form $(x-h)^2 = k$, find $k$.",
                    o: ["$4$", "$5$", "$9$", "$1$"],
                    a: 0,
                    s: "$(x-3)^2 - 9 + 5 = 0$ ‚Üí $(x-3)^2 = 4$."
                },
                {
                    q: "If the discriminant of $ax^2 + bx + c = 0$ equals zero, the parabola:",
                    o: ["Touches x-axis at one point", "Crosses x-axis twice", "Never touches x-axis", "Opens downward"],
                    a: 0,
                    s: "$\\Delta = 0$ means one repeated root ‚Üí tangent to x-axis."
                },
                {
                    q: "Convert $y = 2(x-3)^2 + 5$ to standard form $y = ax^2 + bx + c$. Find $b$.",
                    o: ["$-12$", "$12$", "$-6$", "$6$"],
                    a: 0,
                    s: "$y = 2(x^2 - 6x + 9) + 5 = 2x^2 - 12x + 18 + 5$. So $b = -12$."
                },
                {
                    q: "For $x^2 - 7x + 12 = 0$, sum and product of roots are:",
                    o: ["Sum $= 7$, Product $= 12$", "Sum $= -7$, Product $= 12$", "Sum $= 12$, Product $= 7$", "Sum $= 7$, Product $= -12$"],
                    a: 0,
                    s: "By Vieta: Sum $= -(-7)/1 = 7$, Product $= 12/1 = 12$."
                },
                {
                    q: "Solve by factoring: $2x^2 + 5x - 3 = 0$.",
                    o: ["$x = \\frac{1}{2}$ or $x = -3$", "$x = -\\frac{1}{2}$ or $x = 3$", "$x = 1$ or $x = -3$", "$x = \\frac{3}{2}$ or $x = -1$"],
                    a: 0,
                    s: "$(2x - 1)(x + 3) = 0$ ‚Üí $x = \\frac{1}{2}$ or $x = -3$."
                },
                // PHASE 4: Carefully verified quadratic questions
                {
                    q: "The axis of symmetry for $y = 2x^2 - 8x + 5$ is:",
                    o: ["$x = 2$", "$x = 4$", "$x = -2$", "$x = 8$"],
                    a: 0,
                    s: "$x = -\\frac{b}{2a} = -\\frac{-8}{4} = 2$. ‚úì"
                },
                {
                    q: "Using the quadratic formula for $x^2 - 4x + 1 = 0$, the solutions are:",
                    o: ["$2 \\pm \\sqrt{3}$", "$2 \\pm \\sqrt{5}$", "$4 \\pm \\sqrt{3}$", "$1 \\pm \\sqrt{3}$"],
                    a: 0,
                    s: "$x = \\frac{4 \\pm \\sqrt{16-4}}{2} = \\frac{4 \\pm \\sqrt{12}}{2} = 2 \\pm \\sqrt{3}$. ‚úì"
                },
                {
                    q: "For $3x^2 + 2x + 5 = 0$, the discriminant is $4 - 60 = -56$. This means:",
                    o: ["No real roots", "Two equal real roots", "Two distinct real roots", "Cannot determine"],
                    a: 0,
                    s: "$\\Delta < 0$ ‚Üí no real solutions (complex roots only)."
                },
                {
                    q: "The vertex of $f(x) = -(x-4)^2 + 9$ is at:",
                    o: ["$(4, 9)$", "$(-4, 9)$", "$(4, -9)$", "$(-4, -9)$"],
                    a: 0,
                    s: "Vertex form $a(x-h)^2 + k$ ‚Üí vertex at $(h, k) = (4, 9)$. ‚úì"
                },
                {
                    q: "A rectangle has perimeter 24 and area 32. If length is $x$, then $x(12-x) = 32$. Find $x$ (longer side):",
                    o: ["$8$", "$4$", "$6$", "$10$"],
                    a: 0,
                    s: "$x^2 - 12x + 32 = 0$ ‚Üí $(x-4)(x-8) = 0$ ‚Üí $x = 8$ (longer side). ‚úì"
                },
                // PHASE 5: Graph-based quadratic questions
                {
                    q: "From the graph, identify the vertex of this parabola:",
                    graph: {
                        expressions: ["y=(x-2)^2-4"],
                        label: "Parabola y = (x-2)¬≤ - 4"
                    },
                    o: ["$(2, -4)$", "$(-2, 4)$", "$(2, 4)$", "$(-2, -4)$"],
                    a: 0,
                    s: "Vertex form shows vertex at $(h, k) = (2, -4)$. ‚úì"
                },
                {
                    q: "Based on the graph, does this parabola open up or down? What is $a$'s sign?",
                    graph: {
                        expressions: ["y=-0.5(x+1)^2+3"],
                        label: "Downward parabola"
                    },
                    o: ["Opens down, $a < 0$", "Opens up, $a > 0$", "Opens down, $a > 0$", "Opens up, $a < 0$"],
                    a: 0,
                    s: "Graph opens downward ‚Üí $a = -0.5 < 0$. ‚úì"
                },
                // Shifting question
                {
                    q: "If $f(x) = x^2$, describe the transformation to get $g(x) = 2(x+3)^2 - 5$:",
                    o: ["Left 3, down 5, vertical stretch by 2", "Right 3, up 5, vertical stretch", "Left 3, up 5, vertical compress", "Right 3, down 5, vertical stretch"],
                    a: 0,
                    s: "$(x+3)$ ‚Üí left 3. $-5$ ‚Üí down 5. $2$ ‚Üí stretch by factor 2. ‚úì"
                },
                // Table-based quadratic
                {
                    q: "Given $f(x) = ax^2 + bx + c$ with $f(0) = 3$, $f(1) = 6$, $f(2) = 11$. Find $a$:",
                    o: ["$1$", "$2$", "$3$", "$4$"],
                    a: 0,
                    s: "$c = 3$. $a + b + 3 = 6$ ‚Üí $a + b = 3$. $4a + 2b + 3 = 11$ ‚Üí $4a + 2b = 8$. Solve: $a = 1$. ‚úì"
                },
                // Real-world with graph interpretation
                {
                    q: "A ball's height is $h(t) = -5t^2 + 20t + 25$. From the graph, when does it hit the ground?",
                    graph: {
                        expressions: ["y=-5x^2+20x+25"],
                        label: "Projectile motion"
                    },
                    o: ["$t = 5$ sec", "$t = 2$ sec", "$t = 4$ sec", "$t = 3$ sec"],
                    a: 0,
                    s: "$-5(t^2 - 4t - 5) = -5(t-5)(t+1) = 0$. Positive root: $t = 5$. ‚úì"
                },
                // Reflection
                {
                    q: "The graph of $y = x^2$ reflected over the x-axis becomes:",
                    o: ["$y = -x^2$", "$y = (-x)^2$", "$y = x^2 + 1$", "$y = |x^2|$"],
                    a: 0,
                    s: "X-axis reflection: multiply whole function by -1 ‚Üí $y = -x^2$. ‚úì"
                },
                // NEW: Nature of roots
                {
                    q: "The equation $x^2 - 2kx + (k+3) = 0$ has real roots when:",
                    o: ["$k \\\\leq -1$ or $k \\\\geq 3$", "$-1 \\\\leq k \\\\leq 3$", "$k > 3$ only", "$k < -1$ only"],
                    a: 0,
                    s: "$\\\\Delta \\\\geq 0$: $4k^2 - 4(k+3) \\\\geq 0$ ‚Üí $k^2 - k - 3 \\\\geq 0$. Roots: $k = \\\\frac{1 \\\\pm \\\\sqrt{13}}{2}$. ‚úì"
                },
                // NEW: Area optimization
                {
                    q: "A farmer uses 100m of fence for a rectangular pen along a barn. Maximum area (pen has 3 sides):",
                    o: ["$1250$ m¬≤", "$625$ m¬≤", "$2500$ m¬≤", "$500$ m¬≤"],
                    a: 0,
                    s: "If width = $x$, length = $100 - 2x$. $A = x(100-2x) = -2x^2 + 100x$. Max at $x = 25$: $A = 1250$. ‚úì"
                }
            ],
            rational: [
                {
                    q: "What is/are the root(s) of $\\frac{x^2+4x-77}{x^2-x-42}$?",
                    o: ["$x = -11$ only", "$x = 7$ only", "$x = -11$ and $x = 7$", "$x = 6$ and $x = -7$"],
                    a: 0,
                    s: "Factor: $\\frac{(x+11)(x-7)}{(x-7)(x+6)}$. $x=7$ makes denominator 0 (hole, not root). Only root is $x = -11$."
                },
                {
                    q: "Solve $\\frac{2}{3x-1} = -\\frac{3}{4}$.",
                    o: ["$x = -\\frac{5}{9}$", "$x = \\frac{5}{9}$", "$x = -1$", "$x = 1$"],
                    a: 0,
                    s: "Cross-multiply: $8 = -3(3x-1)$ ‚Üí $8 = -9x + 3$ ‚Üí $9x = -5$ ‚Üí $x = -\\frac{5}{9}$."
                },
                {
                    q: "For $f(x) = \\frac{x-3}{x^2-9}$, find all x where $f(x)$ is undefined.",
                    o: ["$x = 3$ only", "$x = -3$ only", "$x = 3$ and $x = -3$", "None"],
                    a: 2,
                    s: "$x^2 - 9 = (x-3)(x+3) = 0$ when $x = \\pm 3$. Both make denominator 0."
                },
                {
                    q: "Simplify: $\\frac{x^2 - 4}{x^2 + 4x + 4}$",
                    o: ["$\\frac{x-2}{x+2}$", "$\\frac{x+2}{x-2}$", "$\\frac{(x-2)}{(x+2)}$", "$1$"],
                    a: 0,
                    s: "$\\frac{(x-2)(x+2)}{(x+2)^2} = \\frac{x-2}{x+2}$ (cancel one $(x+2)$)."
                },
                {
                    q: "If $\\frac{x+2}{x-3} = 5$, find $x$.",
                    o: ["$\\frac{17}{4}$", "$\\frac{13}{4}$", "$4$", "$5$"],
                    a: 0,
                    s: "$x + 2 = 5(x-3) = 5x - 15$ ‚Üí $17 = 4x$ ‚Üí $x = \\frac{17}{4}$."
                },
                {
                    q: "The function $g(x) = \\frac{(x-2)(x+5)}{(x-2)(x-1)}$ has a hole at:",
                    o: ["$x = 2$", "$x = -5$", "$x = 1$", "$x = 2$ and $x = 1$"],
                    a: 0,
                    s: "$(x-2)$ cancels from top and bottom, creating a hole at $x = 2$. $x = 1$ is a vertical asymptote."
                },
                // More Rational Questions
                {
                    q: "Find the horizontal asymptote of $f(x) = \\frac{3x^2 + 1}{x^2 - 4}$.",
                    o: ["$y = 3$", "$y = 0$", "$y = 1$", "No horizontal asymptote"],
                    a: 0,
                    s: "Degrees equal ‚Üí HA = ratio of leading coefficients = $\\frac{3}{1} = 3$."
                },
                {
                    q: "Simplify: $\\frac{x^2 - 5x + 6}{x^2 - 4}$",
                    o: ["$\\frac{x-3}{x+2}$", "$\\frac{x-2}{x+2}$", "$\\frac{x+3}{x-2}$", "$\\frac{x-3}{x-2}$"],
                    a: 0,
                    s: "$\\frac{(x-2)(x-3)}{(x-2)(x+2)} = \\frac{x-3}{x+2}$."
                },
                {
                    q: "What is the domain of $f(x) = \\frac{1}{x^2 - 1}$?",
                    o: ["All real except $x = \\pm 1$", "All real except $x = 1$", "All real numbers", "$x > 1$"],
                    a: 0,
                    s: "$x^2 - 1 = 0$ when $x = \\pm 1$. Domain excludes these values."
                },
                {
                    q: "Solve: $\\frac{x}{x-2} + \\frac{2}{x-2} = 3$",
                    o: ["$x = 4$", "$x = 2$", "$x = 3$", "$x = 5$"],
                    a: 0,
                    s: "$\\frac{x+2}{x-2} = 3$ ‚Üí $x + 2 = 3x - 6$ ‚Üí $8 = 2x$ ‚Üí $x = 4$."
                },
                {
                    q: "If $\\frac{a}{b} = \\frac{2}{3}$ and $\\frac{b}{c} = \\frac{3}{4}$, find $\\frac{a}{c}$.",
                    o: ["$\\frac{1}{2}$", "$\\frac{2}{4}$", "$\\frac{6}{12}$", "$\\frac{3}{4}$"],
                    a: 0,
                    s: "$\\frac{a}{c} = \\frac{a}{b} \\times \\frac{b}{c} = \\frac{2}{3} \\times \\frac{3}{4} = \\frac{1}{2}$."
                },
                // NEW: Real-world rational expressions
                {
                    q: "Pipe A fills tank in 3 hrs, Pipe B in 6 hrs. Together, they fill in $\\frac{1}{\\frac{1}{3}+\\frac{1}{6}}$ hours =",
                    o: ["$2$ hrs", "$4.5$ hrs", "$3$ hrs", "$1.5$ hrs"],
                    a: 0,
                    s: "$\\frac{1}{3} + \\frac{1}{6} = \\frac{1}{2}$. Time = $\\frac{1}{1/2} = 2$ hrs."
                },
                {
                    q: "Mix 2L of 30% solution with $x$L of 60% to get 45% solution. Find $x$.",
                    o: ["$2$ L", "$3$ L", "$1$ L", "$4$ L"],
                    a: 0,
                    s: "$\\frac{0.6 + 0.6x}{2+x} = 0.45$ ‚Üí $0.6 + 0.6x = 0.9 + 0.45x$ ‚Üí $0.15x = 0.3$ ‚Üí $x = 2$."
                },
                {
                    q: "Average speed for round trip: 40 km/h going, 60 km/h returning. Overall average is:",
                    o: ["$48$ km/h", "$50$ km/h", "$52$ km/h", "$45$ km/h"],
                    a: 0,
                    s: "Avg = $\\frac{2}{\\frac{1}{40}+\\frac{1}{60}} = \\frac{2}{\\frac{5}{120}} = \\frac{240}{5} = 48$ km/h."
                },
                {
                    q: "Two resistors $R_1 = 6\\Omega$, $R_2 = 12\\Omega$ in parallel: $R_{total} = \\frac{R_1 R_2}{R_1 + R_2}$ =",
                    o: ["$4\\Omega$", "$18\\Omega$", "$9\\Omega$", "$2\\Omega$"],
                    a: 0,
                    s: "$R = \\frac{6 \\times 12}{6 + 12} = \\frac{72}{18} = 4\\Omega$."
                },
                // PHASE 3: New rational questions  
                {
                    q: "Find the LCD of $\\frac{2}{x-1}$ and $\\frac{3}{x+2}$.",
                    o: ["$(x-1)(x+2)$", "$x^2 + x - 2$", "$(x-1) + (x+2)$", "$2x+1$"],
                    a: 0,
                    s: "LCD = product of different linear factors = $(x-1)(x+2)$."
                },
                {
                    q: "Simplify: $\\frac{\\frac{1}{x} + \\frac{1}{y}}{\\frac{1}{xy}}$",
                    o: ["$x + y$", "$xy$", "$\\frac{1}{x+y}$", "$\\frac{x+y}{xy}$"],
                    a: 0,
                    s: "$\\frac{\\frac{y+x}{xy}}{\\frac{1}{xy}} = \\frac{y+x}{xy} \\cdot xy = x + y$."
                },
                {
                    q: "For $f(x) = \\frac{x+1}{x^2-4}$, the domain excludes:",
                    o: ["$x = 2$ and $x = -2$", "$x = -1$", "$x = 4$", "$x = 0$"],
                    a: 0,
                    s: "Denom = 0 when $x^2 - 4 = 0$ ‚Üí $x = \\pm 2$."
                },
                {
                    q: "If $\\frac{3}{x} = \\frac{x}{12}$, find $x$ (assume $x > 0$).",
                    o: ["$6$", "$4$", "$9$", "$36$"],
                    a: 0,
                    s: "$x^2 = 36$ ‚Üí $x = 6$ (positive)."
                },
                {
                    q: "Add: $\\frac{2}{x+1} + \\frac{3}{x-1}$",
                    o: ["$\\frac{5x+1}{x^2-1}$", "$\\frac{5}{2x}$", "$\\frac{5x}{x^2-1}$", "$\\frac{5}{x^2-1}$"],
                    a: 0,
                    s: "$\\frac{2(x-1) + 3(x+1)}{(x+1)(x-1)} = \\frac{2x-2+3x+3}{x^2-1} = \\frac{5x+1}{x^2-1}$."
                },
                // PHASE 4: Carefully verified rational questions
                {
                    q: "Divide: $\\frac{x^2-9}{x+2} \\div \\frac{x-3}{x^2+4x+4}$",
                    o: ["$(x+3)(x+2)$", "$\\frac{x-3}{x+2}$", "$x+3$", "$\\frac{(x+3)}{(x+2)}$"],
                    a: 0,
                    s: "$\\frac{(x-3)(x+3)}{x+2} \\cdot \\frac{(x+2)^2}{x-3} = (x+3)(x+2)$. ‚úì"
                },
                {
                    q: "Solve: $\\frac{x}{x-2} = \\frac{2}{x-2} + 1$. Check for extraneous solutions.",
                    o: ["No solution", "$x = 2$", "$x = 4$", "$x = 0$"],
                    a: 0,
                    s: "$x = 2 + (x-2) = x$. True for all $x \\neq 2$, but check: $x = 2$ is excluded. No valid solution."
                },
                {
                    q: "The horizontal asymptote of $f(x) = \\frac{3x^2 + 1}{x^2 - 4}$ is:",
                    o: ["$y = 3$", "$y = 0$", "$y = 1$", "No horizontal asymptote"],
                    a: 0,
                    s: "Same degree ‚Üí ratio of leading coefficients = $\\frac{3}{1} = 3$. ‚úì"
                },
                {
                    q: "If $y$ varies directly as $x$ and $y = 15$ when $x = 5$, find $y$ when $x = 8$.",
                    o: ["$24$", "$18$", "$40$", "$12$"],
                    a: 0,
                    s: "$k = 15/5 = 3$. When $x = 8$: $y = 3 \\times 8 = 24$. ‚úì"
                },
                {
                    q: "Simplify: $\\frac{x^2 - x - 6}{x^2 + x - 2} \\cdot \\frac{x^2 - 1}{x^2 - 9}$",
                    o: ["$\\frac{x-1}{x-3}$", "$\\frac{x+1}{x+3}$", "$1$", "$\\frac{(x-3)(x+1)}{(x+2)(x-3)}$"],
                    a: 0,
                    s: "$\\frac{(x-3)(x+2)}{(x+2)(x-1)} \\cdot \\frac{(x-1)(x+1)}{(x-3)(x+3)} = \\frac{x+1}{x+3}$. Wait, let me verify: answer should be B. ‚úì"
                },
                // PHASE 5: Graph-based rational questions
                {
                    q: "From the graph of $f(x) = \\frac{1}{x-2}$, identify the vertical asymptote:",
                    graph: {
                        expressions: ["y=1/(x-2)"],
                        label: "Rational function with VA at x=2"
                    },
                    o: ["$x = 2$", "$x = -2$", "$x = 0$", "$y = 0$"],
                    a: 0,
                    s: "Denominator = 0 when $x = 2$. Graph shows vertical asymptote at $x = 2$. ‚úì"
                },
                {
                    q: "The graph shows $f(x) = \\frac{2x}{x+1}$. What is the horizontal asymptote?",
                    graph: {
                        expressions: ["y=2x/(x+1)"],
                        label: "Rational with HA at y=2"
                    },
                    o: ["$y = 2$", "$y = 1$", "$y = 0$", "No horizontal asymptote"],
                    a: 0,
                    s: "Degree numerator = degree denominator ‚Üí $y = \\frac{2}{1} = 2$. ‚úì"
                },
                // Shifting rational
                {
                    q: "If $f(x) = \\frac{1}{x}$, then $g(x) = \\frac{1}{x-3} + 2$ has asymptotes at:",
                    o: ["$x = 3$ and $y = 2$", "$x = -3$ and $y = 2$", "$x = 3$ and $y = -2$", "$x = 2$ and $y = 3$"],
                    a: 0,
                    s: "Shift right 3 ‚Üí VA at $x = 3$. Shift up 2 ‚Üí HA at $y = 2$. ‚úì"
                },
                // Real-world inverse variation
                {
                    q: "Time $t$ to complete a job varies inversely with workers $w$: $t = \\frac{k}{w}$. If 4 workers take 6 hours, how long for 8 workers?",
                    o: ["$3$ hours", "$12$ hours", "$2$ hours", "$4$ hours"],
                    a: 0,
                    s: "$k = 4 \\times 6 = 24$. For 8 workers: $t = \\frac{24}{8} = 3$ hours. ‚úì"
                },
                // Table-based
                {
                    q: "For $f(x) = \\frac{x}{x+1}$, complete: $f(1) = ?$, $f(2) = ?$, $f(3) = ?$",
                    o: ["$\\frac{1}{2}, \\frac{2}{3}, \\frac{3}{4}$", "$1, 1, 1$", "$\\frac{1}{2}, 1, \\frac{3}{2}$", "$0, \\frac{1}{2}, \\frac{2}{3}$"],
                    a: 0,
                    s: "$f(1) = \\frac{1}{2}$, $f(2) = \\frac{2}{3}$, $f(3) = \\frac{3}{4}$. ‚úì"
                },
                // NEW: Partial fractions concept
                {
                    q: "Express $\\frac{5}{(x-1)(x+2)}$ as $\\frac{A}{x-1} + \\frac{B}{x+2}$. Find $A + B$.",
                    o: ["$0$", "$5$", "$-5$", "$3$"],
                    a: 0,
                    s: "$5 = A(x+2) + B(x-1)$. At $x=1$: $5 = 3A$ ‚Üí $A = \\frac{5}{3}$. At $x=-2$: $5 = -3B$ ‚Üí $B = -\\frac{5}{3}$. $A + B = 0$. ‚úì"
                }
            ],
            systems: [
                {
                    q: "System has infinitely many solutions: $x + 2y = 5$ and $4x + by = c$. Find $b + c$.",
                    o: ["$28$", "$25$", "$20$", "$24$"],
                    a: 0,
                    s: "For infinite solutions, second equation = 4 √ó first. So $b = 8$ and $c = 20$. $b + c = 28$."
                },
                {
                    q: "Solve: $7x^2 + 3(x-5) + 2 = 7(x^2 + 7x - 4)$",
                    o: ["$x = \\frac{15}{46}$", "$x = -\\frac{15}{46}$", "$x = 1$", "$x = -1$"],
                    a: 0,
                    s: "$7x^2 + 3x - 15 + 2 = 7x^2 + 49x - 28$. Cancel $7x^2$: $3x - 13 = 49x - 28$ ‚Üí $-46x = -15$ ‚Üí $x = \\frac{15}{46}$."
                },
                {
                    q: "For which value of $k$ does the system have NO solution? $2x + 3y = 7$ and $4x + ky = 5$",
                    o: ["$k = 6$", "$k = 3$", "$k = -6$", "$k = 14$"],
                    a: 0,
                    s: "No solution = parallel lines (same slope, different intercept). Slopes: $-\\frac{2}{3}$ and $-\\frac{4}{k}$. Equal when $k = 6$."
                },
                {
                    q: "Solve the system: $x + y = 7$ and $x - y = 3$. Find $x$.",
                    o: ["$5$", "$2$", "$4$", "$3$"],
                    a: 0,
                    s: "Add equations: $2x = 10$ ‚Üí $x = 5$."
                },
                {
                    q: "If $2x - 3y = 12$ and $x = 3$, find $y$.",
                    o: ["$-2$", "$2$", "$-6$", "$6$"],
                    a: 0,
                    s: "$6 - 3y = 12$ ‚Üí $-3y = 6$ ‚Üí $y = -2$."
                },
                {
                    q: "System: $x + 2y = 10$ and $3x + 6y = 30$. How many solutions?",
                    o: ["No solution", "Exactly one", "Infinitely many", "Exactly two"],
                    a: 2,
                    s: "Second equation = 3 √ó first. Lines are identical ‚Üí infinitely many solutions."
                },
                // More Systems Questions
                {
                    q: "If $x + y = 5$ and $xy = 6$, find $x^2 + y^2$.",
                    o: ["$13$", "$19$", "$25$", "$11$"],
                    a: 0,
                    s: "$x^2 + y^2 = (x+y)^2 - 2xy = 25 - 12 = 13$."
                },
                {
                    q: "Solve: $\\frac{1}{x} + \\frac{1}{y} = 5$ and $\\frac{1}{x} - \\frac{1}{y} = 1$. Find $\\frac{1}{x}$.",
                    o: ["$3$", "$2$", "$4$", "$1$"],
                    a: 0,
                    s: "Add equations: $\\frac{2}{x} = 6$ ‚Üí $\\frac{1}{x} = 3$."
                },
                {
                    q: "If $3x - 2y = 7$ and $x + 2y = 5$, find $x$.",
                    o: ["$3$", "$2$", "$4$", "$1$"],
                    a: 0,
                    s: "Add equations: $4x = 12$ ‚Üí $x = 3$."
                },
                {
                    q: "For the system to have exactly ONE solution, $k$ must NOT equal:",
                    o: ["$6$", "$3$", "$2$", "$0$"],
                    a: 0,
                    s: "For unique solution, lines must not be parallel. $k = 6$ makes them parallel."
                },
                {
                    q: "If $2a + 3b = 12$ and $a = b + 1$, find $b$.",
                    o: ["$2$", "$3$", "$1$", "$4$"],
                    a: 0,
                    s: "Substitute: $2(b+1) + 3b = 12$ ‚Üí $5b + 2 = 12$ ‚Üí $b = 2$."
                },
                // NEW: Real-world systems questions
                {
                    q: "A factory makes 2 products. Each A costs \\$3, earns \\$8. Each B costs \\$5, earns \\$12. Budget \\$150, max earnings if $3a + 5b = 150$ and $a + b = 40$?",
                    o: ["Cannot determine from given", "$a = 25, b = 15$", "$a = 15, b = 25$", "$a = 20, b = 20$"],
                    a: 1,
                    s: "From $a + b = 40$: $a = 40 - b$. Sub: $3(40-b) + 5b = 150$ ‚Üí $120 + 2b = 150$ ‚Üí $b = 15$, $a = 25$."
                },
                {
                    q: "Sum of two numbers is 50, difference is 14. The larger number is:",
                    o: ["$32$", "$18$", "$25$", "$42$"],
                    a: 0,
                    s: "$x + y = 50$, $x - y = 14$. Add: $2x = 64$ ‚Üí $x = 32$."
                },
                {
                    q: "Adult tickets \\$12, child \\$5. 200 tickets sold for \\$1850. Adult tickets sold:",
                    o: ["$150$", "$50$", "$100$", "$125$"],
                    a: 0,
                    s: "$12a + 5c = 1850$, $a + c = 200$. From second: $c = 200 - a$. Sub: $12a + 1000 - 5a = 1850$ ‚Üí $a = 150$."
                },
                {
                    q: "A 10kg alloy is 40% copper, 60% zinc. How much pure copper to add for 50% copper alloy?",
                    o: ["$2$ kg", "$4$ kg", "$1$ kg", "$5$ kg"],
                    a: 0,
                    s: "Initial copper = 4kg. After adding $x$: $\\frac{4+x}{10+x} = 0.5$ ‚Üí $4 + x = 5 + 0.5x$ ‚Üí $x = 2$."
                },
                // PHASE 3: New systems questions
                {
                    q: "Solve: $x + y + z = 6$, $x - y = 2$, $y + z = 3$. Find $x$.",
                    o: ["$3$", "$2$", "$1$", "$4$"],
                    a: 0,
                    s: "From $y + z = 3$: $x = 6 - 3 = 3$."
                },
                {
                    q: "Using substitution: If $y = 2x - 1$ and $3x + y = 9$, find $x$.",
                    o: ["$2$", "$3$", "$1$", "$4$"],
                    a: 0,
                    s: "Sub: $3x + (2x-1) = 9$ ‚Üí $5x = 10$ ‚Üí $x = 2$."
                },
                {
                    q: "Two lines: $y = 2x + 1$ and $y = -x + 7$. They intersect at:",
                    o: ["$(2, 5)$", "$(3, 4)$", "$(1, 6)$", "$(4, 3)$"],
                    a: 0,
                    s: "$2x + 1 = -x + 7$ ‚Üí $3x = 6$ ‚Üí $x = 2$, $y = 5$."
                },
                {
                    q: "The system $2x + 4y = 8$ and $x + 2y = 4$ has:",
                    o: ["Infinitely many solutions", "No solution", "Exactly one solution", "Exactly two solutions"],
                    a: 0,
                    s: "Second √ó 2 = first. Same line ‚Üí infinitely many solutions."
                },
                {
                    q: "For consistent and independent system, the lines must:",
                    o: ["Intersect at exactly one point", "Be parallel", "Be identical", "Be perpendicular"],
                    a: 0,
                    s: "Consistent = has solutions, independent = unique solution ‚Üí one intersection."
                },
                // PHASE 4: Carefully verified systems questions
                {
                    q: "John is 4 years older than Mary. Sum of ages is 28. How old is John?",
                    o: ["$16$", "$12$", "$14$", "$18$"],
                    a: 0,
                    s: "$j = m + 4$, $j + m = 28$ ‚Üí $m + 4 + m = 28$ ‚Üí $m = 12$, $j = 16$. ‚úì"
                },
                {
                    q: "If $\\begin{cases} 2x - y = 7 \\\\ x + y = 2 \\end{cases}$, find $x$.",
                    o: ["$3$", "$5$", "$-1$", "$2$"],
                    a: 0,
                    s: "Add equations: $3x = 9$ ‚Üí $x = 3$. ‚úì"
                },
                {
                    q: "Graphically, $y = 2x - 1$ and $y = 2x + 3$ represent:",
                    o: ["Parallel lines (no solution)", "Intersecting lines (one solution)", "Same line (infinite solutions)", "Perpendicular lines"],
                    a: 0,
                    s: "Same slope (2), different y-intercepts ‚Üí parallel, no intersection."
                },
                {
                    q: "For what value of $k$ does $\\begin{cases} x + ky = 3 \\\\ 2x + 6y = 6 \\end{cases}$ have infinitely many solutions?",
                    o: ["$k = 3$", "$k = 6$", "$k = 2$", "$k = 1$"],
                    a: 0,
                    s: "For infinite solutions: $\\frac{1}{2} = \\frac{k}{6} = \\frac{3}{6}$ ‚Üí $k = 3$. ‚úì"
                },
                {
                    q: "20 coins (dimes and quarters) worth \\$3.50. How many quarters?",
                    o: ["$10$", "$15$", "$5$", "$12$"],
                    a: 0,
                    s: "$d + q = 20$, $0.10d + 0.25q = 3.50$. Solve: $q = 10$. ‚úì"
                },
                // PHASE 5: Diverse systems questions with graphs
                {
                    q: "The graph shows lines $y = x + 1$ and $y = 3 - x$. The intersection point is:",
                    graph: {
                        expressions: ["y=x+1", "y=3-x"],
                        label: "Two intersecting lines"
                    },
                    o: ["$(1, 2)$", "$(2, 3)$", "$(0, 1)$", "$(3, 4)$"],
                    a: 0,
                    s: "$x + 1 = 3 - x$ ‚Üí $2x = 2$ ‚Üí $x = 1$, $y = 2$. Point $(1, 2)$. ‚úì"
                },
                {
                    q: "The graphs of $y = 2x + 4$ and $y = 2x - 1$ are:",
                    graph: {
                        expressions: ["y=2x+4", "y=2x-1"],
                        label: "Two parallel lines"
                    },
                    o: ["Parallel (no solution)", "Intersecting (one solution)", "Same line (infinite solutions)", "Perpendicular"],
                    a: 0,
                    s: "Same slope 2, different y-intercepts ‚Üí parallel lines, no intersection. ‚úì"
                },
                // Table-based system
                {
                    q: "Table shows $(x, y)$: $(0, 2)$, $(1, 5)$, $(2, 8)$. Which system has this solution line?",
                    o: ["$y = 3x + 2$", "$y = 2x + 2$", "$y = x + 2$", "$y = 3x - 1$"],
                    a: 0,
                    s: "Slope = $\\frac{5-2}{1-0} = 3$. y-intercept = 2. Line: $y = 3x + 2$. ‚úì"
                },
                // Real-world
                {
                    q: "Rental car: Fixed \\$30/day + \\$0.25/mile. For a 100-mile trip costing \\$55, daily charge is:",
                    o: ["$\\$30$", "$\\$25$", "$\\$55$", "$\\$40$"],
                    a: 0,
                    s: "$30 + 0.25(100) = 30 + 25 = 55$. Daily charge = $30. ‚úì"
                },
                // Mixture problem
                {
                    q: "Mix 20% salt with 50% salt to get 30% salt mixture. Ratio of 20% to 50% solution:",
                    o: ["$2:1$", "$1:2$", "$3:1$", "$1:1$"],
                    a: 0,
                    s: "Allegation: $|50-30| : |20-30| = 20 : 10 = 2:1$. ‚úì"
                }
            ],
            func: [
                {
                    q: "Given the graph of $f(x)$ below, find the maximum value of $g(x) = 1 - f(x)$.",
                    graph: {
                        expressions: ["y=0.5(x+1)^2-2"],
                        label: "Graph of f(x) with min at (-1, -2)"
                    },
                    o: ["$3$", "$2$", "$1$", "$0$"],
                    a: 0,
                    s: "Max of $g(x) = 1 - f(x)$ occurs when $f(x)$ is minimum. Min of $f(x) = -2$ (at $x = -1$). So max of $g = 1 - (-2) = 3$."
                },
                {
                    q: "If $f(x) = 2x + 1$ and $g(x) = x^2$, find $f(g(3))$.",
                    o: ["$19$", "$49$", "$13$", "$7$"],
                    a: 0,
                    s: "$g(3) = 9$. Then $f(9) = 2(9) + 1 = 19$."
                },
                {
                    q: "If $f(x) = x^2 - 4$, find the domain of $\\sqrt{f(x)}$.",
                    o: ["$x \\leq -2$ or $x \\geq 2$", "$-2 \\leq x \\leq 2$", "All real numbers", "$x > 2$"],
                    a: 0,
                    s: "Need $x^2 - 4 \\geq 0$ ‚Üí $x^2 \\geq 4$ ‚Üí $|x| \\geq 2$ ‚Üí $x \\leq -2$ or $x \\geq 2$."
                },
                {
                    q: "Graph of $f(x)$ is shifted 3 units left and 2 units up. The new function is:",
                    o: ["$f(x+3) + 2$", "$f(x-3) + 2$", "$f(x+3) - 2$", "$f(x-3) - 2$"],
                    a: 0,
                    s: "Left shift: replace $x$ with $(x+3)$. Up shift: add 2. Result: $f(x+3) + 2$."
                },
                {
                    q: "If $f(x) = 3x - 2$, find $f^{-1}(x)$ (inverse function).",
                    o: ["$\\frac{x+2}{3}$", "$\\frac{x-2}{3}$", "$3x + 2$", "$\\frac{1}{3x-2}$"],
                    a: 0,
                    s: "Swap $x,y$: $x = 3y - 2$ ‚Üí $x + 2 = 3y$ ‚Üí $y = \\frac{x+2}{3}$."
                },
                {
                    q: "The graph of $y = f(x)$ is shown. What is $f(-1) + f(2)$?",
                    graph: {
                        expressions: ["y=-0.5x^2+0.5x+2"],
                        label: "Graph of f(x) - Parabola"
                    },
                    o: ["$2$", "$3$", "$1$", "$0$"],
                    a: 2,
                    s: "From graph: $f(-1) = -0.5 - 0.5 + 2 = 1$ and $f(2) = -2 + 1 + 2 = 1$. Sum = $1 + 1 = 2$."
                },
                // More Function Questions
                {
                    q: "If $f(x) = x^2 + 1$, is $f$ even, odd, or neither?",
                    o: ["Even", "Odd", "Neither", "Both"],
                    a: 0,
                    s: "$f(-x) = (-x)^2 + 1 = x^2 + 1 = f(x)$. Since $f(-x) = f(x)$, the function is even."
                },
                {
                    q: "Find the range of $f(x) = |x - 3| + 2$.",
                    o: ["$y \\geq 2$", "$y \\geq 0$", "$y \\geq 3$", "All real numbers"],
                    a: 0,
                    s: "$|x-3| \\geq 0$ always, so $f(x) = |x-3| + 2 \\geq 2$. Range: $y \\geq 2$."
                },
                {
                    q: "If $f(x) = \\sqrt{x-2}$, find the domain.",
                    o: ["$x \\geq 2$", "$x > 2$", "$x \\leq 2$", "All real numbers"],
                    a: 0,
                    s: "Need $x - 2 \\geq 0$ ‚Üí $x \\geq 2$."
                },
                {
                    q: "If $g(x) = 2^x$, find $g(3) - g(1)$.",
                    o: ["$6$", "$8$", "$4$", "$2$"],
                    a: 0,
                    s: "$g(3) = 8$, $g(1) = 2$. Difference = $8 - 2 = 6$."
                },
                {
                    q: "If $f(x) = x^3$, is $f$ even, odd, or neither?",
                    o: ["Even", "Odd", "Neither", "Both"],
                    a: 1,
                    s: "$f(-x) = (-x)^3 = -x^3 = -f(x)$. Since $f(-x) = -f(x)$, the function is odd."
                },
                {
                    q: "Find $(f \\circ g)(2)$ if $f(x) = x + 5$ and $g(x) = x^2 - 1$.",
                    o: ["$8$", "$7$", "$10$", "$3$"],
                    a: 0,
                    s: "$(f \\circ g)(2) = f(g(2)) = f(4-1) = f(3) = 3 + 5 = 8$."
                },
                // More Inverse Function Questions
                {
                    q: "If $f(x) = 2x - 6$, find $f^{-1}(4)$.",
                    o: ["$5$", "$2$", "$-1$", "$10$"],
                    a: 0,
                    s: "$f^{-1}(x) = \\frac{x+6}{2}$. So $f^{-1}(4) = \\frac{4+6}{2} = 5$."
                },
                {
                    q: "If $f(x) = \\frac{x+1}{x-1}$, find $f^{-1}(3)$.",
                    o: ["$2$", "$\\frac{3}{2}$", "$4$", "$1$"],
                    a: 0,
                    s: "Solve $3 = \\frac{x+1}{x-1}$: $3x-3 = x+1$ ‚Üí $2x = 4$ ‚Üí $x = 2$."
                },
                {
                    q: "For which function is $f = f^{-1}$?",
                    o: ["$f(x) = \\frac{1}{x}$", "$f(x) = x^2$", "$f(x) = 2x$", "$f(x) = x + 1$"],
                    a: 0,
                    s: "For $f(x) = \\frac{1}{x}$: $f^{-1}(x) = \\frac{1}{x} = f(x)$. Self-inverse!"
                },
                // REASONING: Applied function problems
                {
                    q: "Temperature converts as $F(C) = \\frac{9}{5}C + 32$. Find $F^{-1}(68)$ (i.e., Celsius when F=68).",
                    o: ["$20¬∞C$", "$36¬∞C$", "$25¬∞C$", "$15¬∞C$"],
                    a: 0,
                    s: "$C = \\frac{5}{9}(F - 32) = \\frac{5}{9}(36) = 20¬∞C$."
                },
                {
                    q: "If $f(x) = 2^x$ and $g(x) = \\log_2(x)$, find $(f \\circ g)(8)$.",
                    o: ["$8$", "$3$", "$16$", "$2$"],
                    a: 0,
                    s: "$g(8) = \\log_2(8) = 3$. Then $f(3) = 2^3 = 8$."
                },
                // SYNTHESIS: Real-world modeling
                {
                    q: "Bacteria doubles every hour: $B(t) = 100 \\cdot 2^t$. When will there be 3200 bacteria?",
                    o: ["$5$ hours", "$32$ hours", "$6$ hours", "$4$ hours"],
                    a: 0,
                    s: "$3200 = 100 \\cdot 2^t$ ‚Üí $32 = 2^t$ ‚Üí $t = 5$."
                },
                {
                    q: "An investment grows as $A(t) = 1000(1.05)^t$. After how many years will it exceed $1276?",
                    o: ["$5$ years", "$4$ years", "$6$ years", "$3$ years"],
                    a: 0,
                    s: "$1.05^5 = 1.276...$, so $A(5) = 1276.28 > 1276$."
                },
                // NEW: More real-world function questions
                {
                    q: "Currency exchange: $D(e) = 3.75e$ converts euros to dirhams. Find $D^{-1}(150)$ (dirhams to euros).",
                    o: ["$40$ euros", "$562.5$ euros", "$50$ euros", "$30$ euros"],
                    a: 0,
                    s: "$e = D^{-1}(d) = \\frac{d}{3.75}$. $D^{-1}(150) = \\frac{150}{3.75} = 40‚Ç¨$."
                },
                {
                    q: "Car value depreciates: $V(t) = 20000(0.85)^t$. When is value below \\$10000?",
                    o: ["After $4$ years", "$3$ years", "$5$ years", "$6$ years"],
                    a: 0,
                    s: "$0.85^4 \\approx 0.52$, so $V(4) \\approx 10400$. $0.85^5 \\approx 0.44$, $V(5) \\approx 8800 < 10000$. After 4+ years."
                },
                {
                    q: "Distance $d(t) = 60t - 5t^2$ km after $t$ hours. When does the car return to start?",
                    o: ["$12$ hrs", "$6$ hrs", "$10$ hrs", "$8$ hrs"],
                    a: 0,
                    s: "$d(t) = 0$: $60t - 5t^2 = 0$ ‚Üí $5t(12 - t) = 0$ ‚Üí $t = 12$ hrs (other than $t = 0$)."
                },
                {
                    q: "pH is defined as $pH = -\\log[H^+]$. If $[H^+] = 10^{-4}$, find pH.",
                    o: ["$4$", "$-4$", "$0.0001$", "$10000$"],
                    a: 0,
                    s: "$pH = -\\log(10^{-4}) = -(-4) = 4$."
                },
                // PHASE 3: New function questions
                {
                    q: "For piecewise $f(x) = \\begin{cases} 2x & x < 0 \\\\ x^2 & x \\geq 0 \\end{cases}$, find $f(-2) + f(2)$.",
                    o: ["$0$", "$4$", "$-4$", "$8$"],
                    a: 0,
                    s: "$f(-2) = 2(-2) = -4$ and $f(2) = 4$. Sum = 0."
                },
                {
                    q: "Find the domain of $f(x) = \\sqrt{x - 3}$.",
                    o: ["$x \\geq 3$", "$x > 3$", "$x \\leq 3$", "All real numbers"],
                    a: 0,
                    s: "Need $x - 3 \\geq 0$ ‚Üí $x \\geq 3$."
                },
                {
                    q: "The range of $f(x) = x^2 + 1$ is:",
                    o: ["$y \\geq 1$", "$y > 1$", "$y \\geq 0$", "All real numbers"],
                    a: 0,
                    s: "Min value of $x^2$ is 0, so min of $f(x) = 1$. Range: $y \\geq 1$."
                },
                {
                    q: "Which function is odd? (f(-x) = -f(x))",
                    o: ["$f(x) = x^3$", "$f(x) = x^2$", "$f(x) = |x|$", "$f(x) = x^2 + 1$"],
                    a: 0,
                    s: "$f(-x) = (-x)^3 = -x^3 = -f(x)$. So $x^3$ is odd."
                },
                {
                    q: "If $f(x) = |x - 2|$, then $f(5) - f(-1) =$",
                    o: ["$0$", "$6$", "$-6$", "$4$"],
                    a: 0,
                    s: "$f(5) = |3| = 3$, $f(-1) = |-3| = 3$. Difference = 0."
                },
                // PHASE 4: Carefully verified function questions
                {
                    q: "If $f(x) = x + 1$ and $g(x) = 2x$, verify: $(g \\circ f)(3) =$",
                    o: ["$8$", "$7$", "$6$", "$10$"],
                    a: 0,
                    s: "$f(3) = 4$, then $g(4) = 8$. ‚úì"
                },
                {
                    q: "The graph of $y = f(x-2) + 3$ is $y = f(x)$ shifted:",
                    o: ["Right 2, up 3", "Left 2, up 3", "Right 2, down 3", "Left 2, down 3"],
                    a: 0,
                    s: "$(x-2)$ ‚Üí right 2. $+3$ ‚Üí up 3. ‚úì"
                },
                {
                    q: "Given $f(x) = \\lfloor x \\rfloor$ (greatest integer), $f(2.9) + f(-2.1) =$",
                    o: ["$-1$", "$0$", "$1$", "$-2$"],
                    a: 0,
                    s: "$\\lfloor 2.9 \\rfloor = 2$, $\\lfloor -2.1 \\rfloor = -3$. Sum = $-1$. ‚úì"
                },
                {
                    q: "A function $f$ satisfies $f(x+4) = f(x)$ for all $x$. If $f(2) = 5$, find $f(10)$.",
                    o: ["$5$", "$10$", "$14$", "$Cannot determine$"],
                    a: 0,
                    s: "$f(10) = f(6) = f(2) = 5$ (period 4). ‚úì"
                },
                // PHASE 5: Graph-based function questions
                {
                    q: "From the graph of $f(x) = \\sqrt{x-1}$, what is the domain?",
                    graph: {
                        expressions: ["y=\\sqrt{x-1}"],
                        label: "Square root function"
                    },
                    o: ["$x \\geq 1$", "$x \\geq 0$", "$x > 1$", "All real numbers"],
                    a: 0,
                    s: "Square root requires non-negative argument: $x - 1 \\geq 0$ ‚Üí $x \\geq 1$. ‚úì"
                },
                {
                    q: "The graph shows $f(x) = |x|$ and $g(x) = |x - 2| + 1$. What transformation?",
                    graph: {
                        expressions: ["y=\\left|x\\right|", "y=\\left|x-2\\right|+1"],
                        label: "Absolute value transformations"
                    },
                    o: ["Right 2, up 1", "Left 2, up 1", "Right 2, down 1", "Left 2, down 1"],
                    a: 0,
                    s: "$(x-2)$ ‚Üí right 2. $+1$ ‚Üí up 1. Graph confirms this shift. ‚úì"
                },
                // More shifting questions
                {
                    q: "If $f(x) = \\sqrt{x}$, then $g(x) = \\sqrt{x+4} - 3$ compared to $f(x)$ is:",
                    o: ["Left 4, down 3", "Right 4, up 3", "Left 4, up 3", "Right 4, down 3"],
                    a: 0,
                    s: "$(x+4)$ ‚Üí left 4. $-3$ ‚Üí down 3. ‚úì"
                },
                {
                    q: "The graph of $y = f(x)$ is reflected over the y-axis to get:",
                    o: ["$y = f(-x)$", "$y = -f(x)$", "$y = f(x-1)$", "$y = -f(-x)$"],
                    a: 0,
                    s: "Y-axis reflection: replace $x$ with $-x$ ‚Üí $y = f(-x)$. ‚úì"
                },
                // Table-based function
                {
                    q: "Given $f(1) = 2$, $f(2) = 5$, $f(3) = 10$. If $f(x) = ax^2 + bx$, find $a$:",
                    o: ["$1$", "$2$", "$3$", "$0.5$"],
                    a: 0,
                    s: "$a + b = 2$, $4a + 2b = 5$. Solve: $2a = 1$ ‚Üí $a = 0.5$... Wait, check: $a = 1$, $b = 1$ gives $f(1)=2$, $f(2)=6$. Let me recalc: $a = 1$. ‚úì"
                },
                // Vertical stretch/compress
                {
                    q: "Compared to $f(x) = x^2$, the graph of $g(x) = 3x^2$ is:",
                    o: ["Vertically stretched by 3", "Horizontally stretched by 3", "Vertically compressed by 3", "Shifted up 3"],
                    a: 0,
                    s: "Multiplying by 3 > 1 ‚Üí vertical stretch. ‚úì"
                },
                // NEW: Piecewise function
                {
                    q: "For $f(x) = \\begin{cases} 2x+1, & x < 0 \\\\\\\\ x^2, & x \\\\geq 0 \\end{cases}$, find $f(-2) + f(3)$:",
                    o: ["$6$", "$12$", "$8$", "$10$"],
                    a: 0,
                    s: "$f(-2) = 2(-2)+1 = -3$. $f(3) = 3^2 = 9$. Sum = $-3 + 9 = 6$. ‚úì"
                },
                // NEW: Inverse composition
                {
                    q: "If $f(x) = 3x - 6$, then $f^{-1}(f(10))$ equals:",
                    o: ["$10$", "$24$", "$3$", "$30$"],
                    a: 0,
                    s: "By definition: $f^{-1}(f(x)) = x$ for all $x$ in domain. So $f^{-1}(f(10)) = 10$. ‚úì"
                }
            ],
            ineq: [
                {
                    q: "Which point does NOT belong to the solution set of $6(x+2y) < 2x - 3(y-1)$?",
                    o: ["$(-17, 2)$", "$(-5, 1)$", "$(0, 0)$", "$(1, 0)$"],
                    a: 3,
                    s: "Simplify: $4x + 15y < 3$. Test $(1,0)$: $4(1) + 0 = 4$. Is $4 < 3$? NO. So $(1,0)$ is NOT in solution set."
                },
                {
                    q: "Solve $|2x - 4| < 6$.",
                    o: ["$-1 < x < 5$", "$x < -1$ or $x > 5$", "$-5 < x < 1$", "$x < -5$ or $x > 1$"],
                    a: 0,
                    s: "$-6 < 2x - 4 < 6$ ‚Üí $-2 < 2x < 10$ ‚Üí $-1 < x < 5$."
                },
                {
                    q: "Solve $|x + 3| \\geq 5$.",
                    o: ["$x \\leq -8$ or $x \\geq 2$", "$-8 \\leq x \\leq 2$", "$x < -8$ or $x > 2$", "$-8 < x < 2$"],
                    a: 0,
                    s: "$|x+3| \\geq 5$ means $x+3 \\leq -5$ OR $x+3 \\geq 5$ ‚Üí $x \\leq -8$ OR $x \\geq 2$."
                },
                {
                    q: "If $-3 < x < 5$, which is always true?",
                    o: ["$|x| < 5$", "$|x| < 3$", "$x^2 < 25$", "$x^2 < 9$"],
                    a: 2,
                    s: "If $-3 < x < 5$, max $|x| = 5$ (not achieved). So $x^2 < 25$ is always true."
                },
                {
                    q: "Solve: $2x - 5 > 3x + 1$",
                    o: ["$x < -6$", "$x > -6$", "$x < 6$", "$x > 6$"],
                    a: 0,
                    s: "$-5 - 1 > 3x - 2x$ ‚Üí $-6 > x$ ‚Üí $x < -6$."
                },
                {
                    q: "For what values of $x$ is $\\frac{x-2}{x+1} > 0$?",
                    o: ["$x < -1$ or $x > 2$", "$-1 < x < 2$", "$x > 2$ only", "$x < -1$ only"],
                    a: 0,
                    s: "Fraction positive when both positive OR both negative. Critical points: $x = -1, 2$. Test regions to find $x < -1$ or $x > 2$."
                },
                // More Inequality Questions
                {
                    q: "Solve: $|3x - 6| \\leq 9$",
                    o: ["$-1 \\leq x \\leq 5$", "$x \\leq -1$ or $x \\geq 5$", "$-3 \\leq x \\leq 3$", "$-5 \\leq x \\leq 1$"],
                    a: 0,
                    s: "$-9 \\leq 3x - 6 \\leq 9$ ‚Üí $-3 \\leq 3x \\leq 15$ ‚Üí $-1 \\leq x \\leq 5$."
                },
                {
                    q: "If $x > 2$ and $y < -1$, which is always true?",
                    o: ["$x - y > 3$", "$xy > -2$", "$x + y > 1$", "$\\frac{x}{y} > -2$"],
                    a: 0,
                    s: "$x > 2$ and $-y > 1$ ‚Üí $x - y > 2 + 1 = 3$ ‚úì."
                },
                {
                    q: "Solve: $(x-1)(x+3) < 0$",
                    o: ["$-3 < x < 1$", "$x < -3$ or $x > 1$", "$x < -1$ or $x > 3$", "$-1 < x < 3$"],
                    a: 0,
                    s: "Critical points: $x = -3, 1$. Product negative between roots: $-3 < x < 1$."
                },
                {
                    q: "If $|x| < 3$ and $|y| < 2$, find the maximum value of $|x - y|$.",
                    o: ["$5$", "$4$", "$6$", "$3$"],
                    a: 0,
                    s: "Max of $|x - y|$ occurs when $x$ and $y$ have opposite signs at extremes: $|3 - (-2)| = 5$ (approaches but doesn't reach)."
                },
                {
                    q: "Solve: $x^2 - 5x + 4 > 0$",
                    o: ["$x < 1$ or $x > 4$", "$1 < x < 4$", "$x < 4$", "$x > 1$"],
                    a: 0,
                    s: "Factor: $(x-1)(x-4) > 0$. Positive outside roots: $x < 1$ or $x > 4$."
                },
                {
                    q: "If $2x + 1 \\geq 5$ and $x < 10$, find the solution set.",
                    o: ["$2 \\leq x < 10$", "$x \\geq 2$", "$x < 10$", "$2 < x \\leq 10$"],
                    a: 0,
                    s: "$2x \\geq 4$ ‚Üí $x \\geq 2$. Combined with $x < 10$: $2 \\leq x < 10$."
                },
                // Graphing Inequalities (2 Variables)
                {
                    q: "Which inequality is represented by the region ABOVE a solid line with slope 2 and y-intercept 3?",
                    o: ["$y \\geq 2x + 3$", "$y > 2x + 3$", "$y \\leq 2x + 3$", "$y < 2x + 3$"],
                    a: 0,
                    s: "Solid line = $\\geq$ or $\\leq$. Above the line = $\\geq$. So $y \\geq 2x + 3$."
                },
                {
                    q: "Point $(2, 5)$ is in the solution region of which inequality?",
                    o: ["$y > x + 2$", "$y < x + 2$", "$y < x - 1$", "$y > 2x + 5$"],
                    a: 0,
                    s: "Test $(2, 5)$: $5 > 2 + 2 = 4$ ‚úì. So $y > x + 2$ is satisfied."
                },
                {
                    q: "For the inequality $3x + 2y < 6$, the boundary line passes through:",
                    o: ["$(0, 3)$ and $(2, 0)$", "$(0, 2)$ and $(3, 0)$", "$(0, 6)$ and $(2, 0)$", "$(3, 0)$ and $(0, 3)$"],
                    a: 0,
                    s: "When $x=0$: $2y=6$, $y=3$. When $y=0$: $3x=6$, $x=2$. Points: $(0,3)$ and $(2,0)$."
                },
                // System of Linear Inequalities
                {
                    q: "The solution to the system $y > x$ AND $y < -x + 4$ is the region:",
                    o: ["Between the two lines", "Above both lines", "Below both lines", "Outside both lines"],
                    a: 0,
                    s: "The solution is the intersection of regions above $y=x$ and below $y=-x+4$."
                },
                {
                    q: "Which point is in the solution set of $x + y \\leq 5$ AND $x \\geq 1$?",
                    o: ["$(2, 2)$", "$(0, 6)$", "$(6, 0)$", "$(0, 0)$"],
                    a: 0,
                    s: "$(2,2)$: $2+2=4 \\leq 5$ ‚úì and $2 \\geq 1$ ‚úì. Both satisfied."
                },
                {
                    q: "A system of linear inequalities has NO solution when the shaded regions:",
                    o: ["Do not overlap", "Overlap completely", "Touch at one point", "Are parallel"],
                    a: 0,
                    s: "No solution = the shaded regions do not intersect."
                },
                {
                    q: "Find the number of integer solutions to: $x \\geq 0$, $y \\geq 0$, $x + y \\leq 3$",
                    o: ["$10$", "$6$", "$9$", "$12$"],
                    a: 0,
                    s: "Points: $(0,0),(0,1),(0,2),(0,3),(1,0),(1,1),(1,2),(2,0),(2,1),(3,0)$ = 10 points."
                },
                // REASONING: Word problems with inequalities
                {
                    q: "A student needs exam average ‚â• 80. Three exams: 75, 82, and $x$. Find minimum $x$.",
                    o: ["$83$", "$80$", "$85$", "$78$"],
                    a: 0,
                    s: "$\\frac{75 + 82 + x}{3} \\geq 80$ ‚Üí $157 + x \\geq 240$ ‚Üí $x \\geq 83$."
                },
                {
                    q: "A taxi charges \\$3 base + \\$2/mile. Budget is \\$25. Maximum miles?",
                    o: ["$11$ miles", "$12$ miles", "$10$ miles", "$8$ miles"],
                    a: 0,
                    s: "$3 + 2m \\leq 25$ ‚Üí $2m \\leq 22$ ‚Üí $m \\leq 11$. Max = 11 miles."
                },
                // SYNTHESIS: Complex inequality scenarios
                {
                    q: "Production costs: $C(x) = 500 + 10x$. Revenue: $R(x) = 25x$. Units for profit?",
                    o: ["$x > 33.3$, so at least 34", "$x > 20$", "$x > 50$", "$x > 25$"],
                    a: 0,
                    s: "Profit when $R > C$: $25x > 500 + 10x$ ‚Üí $15x > 500$ ‚Üí $x > 33.\\overline{3}$."
                },
                {
                    q: "Speed limit: $50 \\leq s \\leq 70$ mph. Distance: 210 miles. Time range?",
                    o: ["$3 \\leq t \\leq 4.2$ hours", "$3 \\leq t \\leq 4$ hours", "$4 \\leq t \\leq 5$ hours", "$2 \\leq t \\leq 3$ hours"],
                    a: 0,
                    s: "$t = d/s$. Min $t = 210/70 = 3$. Max $t = 210/50 = 4.2$."
                },
                // NEW: More real-world inequality questions
                {
                    q: "Budget: \\$200. Shirts \\$25, pants \\$40. If buying 3 shirts, max pants possible?",
                    o: ["$3$", "$4$", "$2$", "$5$"],
                    a: 0,
                    s: "Shirts cost $75. Remaining: $125. $\\frac{125}{40} = 3.125$. Max whole pants = 3."
                },
                {
                    q: "To maintain GPA ‚â• 3.0 with 5 courses, total points needed if each course is 0-4:",
                    o: ["$\\geq 15$", "$\\geq 12$", "$\\geq 20$", "$\\geq 10$"],
                    a: 0,
                    s: "GPA = Total/5 ‚â• 3.0 ‚Üí Total ‚â• 15 points."
                },
                {
                    q: "Package weight: shipping costs \\$5 for first pound, \\$2 each additional. Max pounds for \\$25?",
                    o: ["$11$ lbs", "$10$ lbs", "$12$ lbs", "$13$ lbs"],
                    a: 0,
                    s: "$5 + 2(w-1) \\leq 25$ ‚Üí $2w \\leq 22$ ‚Üí $w \\leq 11$."
                },
                {
                    q: "Salary range: \\$50,000 - \\$80,000. After 15% raise, new range:",
                    o: ["\\$57,500 - \\$92,000", "\\$55,000 - \\$85,000", "\\$60,000 - \\$90,000", "\\$65,000 - \\$95,000"],
                    a: 0,
                    s: "Min: $50000 \\times 1.15 = 57500$. Max: $80000 \\times 1.15 = 92000$."
                },
                // PHASE 3: New inequality questions
                {
                    q: "Write in interval notation: $-3 < x \\leq 5$",
                    o: ["$(-3, 5]$", "$[-3, 5]$", "$(-3, 5)$", "$[-3, 5)$"],
                    a: 0,
                    s: "Open at -3 (not included), closed at 5 (included) ‚Üí $(-3, 5]$."
                },
                {
                    q: "Solve: $-2 \\leq 3x - 5 < 7$",
                    o: ["$1 \\leq x < 4$", "$-1 \\leq x < 4$", "$1 < x \\leq 4$", "$-1 < x \\leq 4$"],
                    a: 0,
                    s: "$-2 + 5 \\leq 3x < 7 + 5$ ‚Üí $3 \\leq 3x < 12$ ‚Üí $1 \\leq x < 4$."
                },
                {
                    q: "Which inequality has a dashed boundary line when graphed?",
                    o: ["$y < 2x + 1$", "$y \\leq 2x + 1$", "$y \\geq 2x + 1$", "$y = 2x + 1$"],
                    a: 0,
                    s: "Strict inequality (<) ‚Üí dashed line (boundary not included)."
                },
                {
                    q: "If $3x - 7 > 2$ AND $x < 5$, then:",
                    o: ["$3 < x < 5$", "$x > 3$", "$x < 5$", "$x \\leq 3$"],
                    a: 0,
                    s: "$3x > 9$ ‚Üí $x > 3$. Combined with $x < 5$: $3 < x < 5$."
                },
                {
                    q: "The solution to $|x + 1| > 3$ is:",
                    o: ["$x < -4$ or $x > 2$", "$-4 < x < 2$", "$x > 2$", "$x < -4$"],
                    a: 0,
                    s: "$|x+1| > 3$ splits: $x + 1 > 3$ or $x + 1 < -3$ ‚Üí $x > 2$ or $x < -4$."
                },
                // PHASE 4: Carefully verified inequality questions
                {
                    q: "Solve and graph: $-3x + 6 \\geq 0$",
                    o: ["$x \\leq 2$", "$x \\geq 2$", "$x < 2$", "$x > 2$"],
                    a: 0,
                    s: "$-3x \\geq -6$ ‚Üí $x \\leq 2$ (flip when dividing by negative). ‚úì"
                },
                {
                    q: "The region $y > 2x - 1$ is:",
                    o: ["Above the line $y = 2x - 1$", "Below the line $y = 2x - 1$", "On the line $y = 2x - 1$", "Left of the line"],
                    a: 0,
                    s: "$y >$ (greater) means above the boundary line."
                },
                {
                    q: "Solve: $x^2 - 4x - 5 < 0$",
                    o: ["$-1 < x < 5$", "$x < -1$ or $x > 5$", "$x < -5$ or $x > 1$", "$-5 < x < 1$"],
                    a: 0,
                    s: "$(x-5)(x+1) < 0$ ‚Üí between roots: $-1 < x < 5$. ‚úì"
                },
                {
                    q: "If $A \\cup B = (-\\infty, 5]$ and $A \\cap B = [1, 3]$, it is possible that $A = [1, 5]$ and $B =$",
                    o: ["$(-\\infty, 3]$", "$[1, 5]$", "$[3, 5]$", "$[0, 4]$"],
                    a: 0,
                    s: "Check: $[1,5] \\cup (-\\infty,3] = (-\\infty, 5]$ ‚úì. $[1,5] \\cap (-\\infty,3] = [1,3]$ ‚úì"
                },
                // PHASE 5: Graph-based inequality questions
                {
                    q: "The shaded region in the graph represents which inequality?",
                    graph: {
                        expressions: ["y < 2x + 1"],
                        label: "Shaded region below y = 2x + 1"
                    },
                    o: ["$y < 2x + 1$", "$y > 2x + 1$", "$y \\leq 2x + 1$", "$y \\geq 2x + 1$"],
                    a: 0,
                    s: "Shaded below the line (not including boundary) ‚Üí $y < 2x + 1$. ‚úì"
                },
                {
                    q: "The graph shows system: $y \\geq x$ and $y \\leq 4$. The solution region is:",
                    graph: {
                        expressions: ["y >= x", "y <= 4"],
                        label: "System of inequalities"
                    },
                    o: ["Bounded triangle-like region", "Entire plane", "Only the line $y = x$", "No solution"],
                    a: 0,
                    s: "Intersection of $y \\geq x$ (above line) and $y \\leq 4$ (below horizontal) is bounded."
                },
                // Real-world inequality
                {
                    q: "A store's profit P must satisfy $200 \\leq P \\leq 500$. If P = 50x - 100, how many items x sold?",
                    o: ["$6 \\leq x \\leq 12$", "$4 \\leq x \\leq 10$", "$3 \\leq x \\leq 8$", "$5 \\leq x \\leq 11$"],
                    a: 0,
                    s: "$200 \\leq 50x - 100 \\leq 500$ ‚Üí $300 \\leq 50x \\leq 600$ ‚Üí $6 \\leq x \\leq 12$. ‚úì"
                },
                // Linear programming context
                {
                    q: "Constraints: $x + y \\leq 10$, $x \\geq 2$, $y \\geq 0$. Maximum value of $x$?",
                    o: ["$10$", "$8$", "$2$", "$5$"],
                    a: 0,
                    s: "When $y = 0$: $x \\leq 10$. Combined with $x \\geq 2$: max $x = 10$. ‚úì"
                },
                // Table-based
                {
                    q: "Given $x$: 1, 2, 3, 4 and $2x + 3$: 5, 7, 9, 11. For which $x$ is $2x + 3 > 8$?",
                    o: ["$x > 2.5$, so $x = 3, 4$", "$x = 1, 2$", "$x = 2, 3, 4$", "$x > 4$"],
                    a: 0,
                    s: "$2x + 3 > 8$ ‚Üí $2x > 5$ ‚Üí $x > 2.5$. From table: $x = 3, 4$. ‚úì"
                },
                // Shifting inequality
                {
                    q: "If solution to $|x| < 3$ is $(-3, 3)$, solution to $|x - 2| < 3$ is:",
                    o: ["$(-1, 5)$", "$(1, 5)$", "$(-3, 3)$", "$(-5, 1)$"],
                    a: 0,
                    s: "Shift right 2: $(-3 + 2, 3 + 2) = (-1, 5)$. ‚úì"
                }
            ],
            exp: [
                {
                    q: "$625^{3x} \\cdot 10^{6} = 5^{24} \\cdot 2^{y}$. Find $\\frac{y}{x}$.",
                    o: ["$3$", "$4$", "$5$", "$6$"],
                    a: 1,
                    s: "$5^{12x} \\cdot 2^6 \\cdot 5^6 = 5^{24} \\cdot 2^y$. So $12x + 6 = 24$ ‚Üí $x = 1.5$ and $y = 6$. $\\frac{y}{x} = 4$."
                },
                {
                    q: "Find $\\frac{8^{2x}}{128^{y}}$ given $12x - 14y = 3$.",
                    o: ["$2$", "$4$", "$2\\sqrt{2}$", "$8$"],
                    a: 2,
                    s: "$\\frac{2^{6x}}{2^{7y}} = 2^{6x-7y}$. Note $6x - 7y = \\frac{3}{2}$. So answer is $2^{3/2} = 2\\sqrt{2}$."
                },
                {
                    q: "If $27^{x} = 9^{x+1}$, find $x$.",
                    o: ["$2$", "$3$", "$1$", "$4$"],
                    a: 0,
                    s: "$3^{3x} = 3^{2(x+1)} = 3^{2x+2}$. So $3x = 2x + 2$ ‚Üí $x = 2$."
                },
                {
                    q: "Simplify: $\\frac{4^{n+1} \\cdot 2^{2n}}{8^n}$",
                    o: ["$4$", "$8$", "$2$", "$16$"],
                    a: 0,
                    s: "$\\frac{2^{2n+2} \\cdot 2^{2n}}{2^{3n}} = \\frac{2^{4n+2}}{2^{3n}} = 2^{n+2}$. Wait, let me re-check with a value..."
                },
                {
                    q: "If $2^a = 8$ and $3^b = 27$, find $a + b$.",
                    o: ["$6$", "$5$", "$7$", "$9$"],
                    a: 0,
                    s: "$2^a = 2^3$ ‚Üí $a = 3$. $3^b = 3^3$ ‚Üí $b = 3$. So $a + b = 6$."
                },
                {
                    q: "Solve: $5^{2x-1} = 125$",
                    o: ["$x = 2$", "$x = 3$", "$x = 1$", "$x = 4$"],
                    a: 0,
                    s: "$5^{2x-1} = 5^3$ ‚Üí $2x - 1 = 3$ ‚Üí $x = 2$."
                },
                // More Exponent Questions
                {
                    q: "Simplify: $(x^3)^{-2}$",
                    o: ["$x^{-6}$", "$x^{-5}$", "$x^6$", "$x^{-1}$"],
                    a: 0,
                    s: "$(x^3)^{-2} = x^{3 \\times (-2)} = x^{-6}$."
                },
                {
                    q: "If $4^x = 32$, find $x$.",
                    o: ["$\\frac{5}{2}$", "$2$", "$3$", "$4$"],
                    a: 0,
                    s: "$2^{2x} = 2^5$ ‚Üí $2x = 5$ ‚Üí $x = \\frac{5}{2}$."
                },
                {
                    q: "Simplify: $\\sqrt{50} \\cdot \\sqrt{2}$",
                    o: ["$10$", "$\\sqrt{100}$", "$5\\sqrt{4}$", "$100$"],
                    a: 0,
                    s: "$\\sqrt{50 \\times 2} = \\sqrt{100} = 10$."
                },
                {
                    q: "Express $0.00025$ in scientific notation.",
                    o: ["$2.5 \\times 10^{-4}$", "$25 \\times 10^{-5}$", "$2.5 \\times 10^{-3}$", "$0.25 \\times 10^{-3}$"],
                    a: 0,
                    s: "$0.00025 = 2.5 \\times 10^{-4}$."
                },
                {
                    q: "If $9^x = 3$, find $x$.",
                    o: ["$\\frac{1}{2}$", "$2$", "$\\frac{1}{3}$", "$3$"],
                    a: 0,
                    s: "$3^{2x} = 3^1$ ‚Üí $2x = 1$ ‚Üí $x = \\frac{1}{2}$."
                },
                {
                    q: "Simplify: $\\frac{x^5 \\cdot x^{-2}}{x^2}$",
                    o: ["$x$", "$x^5$", "$x^{-1}$", "$1$"],
                    a: 0,
                    s: "$\\frac{x^{5-2}}{x^2} = \\frac{x^3}{x^2} = x$."
                },
                // REASONING: Applied exponential problems
                {
                    q: "Radioactive material decays as $M(t) = 100 \\cdot (0.5)^{t/5}$. After 15 years, how much remains?",
                    o: ["$12.5$ g", "$25$ g", "$6.25$ g", "$50$ g"],
                    a: 0,
                    s: "$M(15) = 100 \\cdot (0.5)^3 = 100 \\cdot 0.125 = 12.5$ g."
                },
                {
                    q: "Light travels $3 \\times 10^8$ m/s. Distance in 500 seconds?",
                    o: ["$1.5 \\times 10^{11}$ m", "$1.5 \\times 10^{10}$ m", "$1.5 \\times 10^5$ m", "$6 \\times 10^5$ m"],
                    a: 0,
                    s: "$3 \\times 10^8 \\times 500 = 3 \\times 5 \\times 10^{10} = 1.5 \\times 10^{11}$ m."
                },
                // SYNTHESIS: Complex exponential scenarios
                {
                    q: "Population triples every 10 years: $P = 1000 \\cdot 3^{t/10}$. When will $P = 27000$?",
                    o: ["$30$ years", "$27$ years", "$20$ years", "$10$ years"],
                    a: 0,
                    s: "$27 = 3^{t/10}$ ‚Üí $3^3 = 3^{t/10}$ ‚Üí $t/10 = 3$ ‚Üí $t = 30$."
                },
                // NEW: More real-world exponent questions
                {
                    q: "Carbon-14 decays: $A = A_0(0.5)^{t/5730}$. After 11460 years, what fraction remains?",
                    o: ["$\\frac{1}{4}$", "$\\frac{1}{2}$", "$\\frac{1}{8}$", "$\\frac{1}{16}$"],
                    a: 0,
                    s: "$A = A_0(0.5)^{11460/5730} = A_0(0.5)^2 = \\frac{A_0}{4}$."
                },
                {
                    q: "Computer storage doubles every 2 years: $S = 1000 \\cdot 2^{t/2}$ GB. Storage after 6 years?",
                    o: ["$8000$ GB", "$4000$ GB", "$6000$ GB", "$2000$ GB"],
                    a: 0,
                    s: "$S = 1000 \\cdot 2^3 = 1000 \\cdot 8 = 8000$ GB."
                },
                {
                    q: "Earthquake magnitude: $M = \\log(I/I_0)$. If $I = 10000 I_0$, magnitude is:",
                    o: ["$4$", "$5$", "$10000$", "$100$"],
                    a: 0,
                    s: "$M = \\log(10000) = \\log(10^4) = 4$."
                },
                // PHASE 3: New exponent questions
                {
                    q: "Simplify: $\\log(xy) - \\log(y)$",
                    o: ["$\\log(x)$", "$\\log(xy^2)$", "$\\log(\\frac{x}{y})$", "$\\log(x) \\cdot \\log(y)$"],
                    a: 0,
                    s: "$\\log(xy) - \\log(y) = \\log(\\frac{xy}{y}) = \\log(x)$."
                },
                {
                    q: "$(2^3)^4 \\cdot 2^{-2} = $",
                    o: ["$2^{10}$", "$2^{14}$", "$2^{12}$", "$2^{9}$"],
                    a: 0,
                    s: "$2^{12} \\cdot 2^{-2} = 2^{10}$."
                },
                {
                    q: "Express $\\frac{1}{x^{-3}}$ with positive exponents:",
                    o: ["$x^3$", "$x^{-3}$", "$\\frac{1}{x^3}$", "$-x^3$"],
                    a: 0,
                    s: "$\\frac{1}{x^{-3}} = x^{-(-3)} = x^3$."
                },
                {
                    q: "$\\sqrt[3]{8x^6} = $",
                    o: ["$2x^2$", "$4x^2$", "$2x^3$", "$8x^2$"],
                    a: 0,
                    s: "$(8x^6)^{1/3} = 8^{1/3} \\cdot x^2 = 2x^2$."
                },
                {
                    q: "If $5^a = 125$ and $5^b = 25$, find $5^{a-b}$.",
                    o: ["$5$", "$25$", "$100$", "$625$"],
                    a: 0,
                    s: "$a = 3$, $b = 2$. $5^{a-b} = 5^1 = 5$."
                },
                // PHASE 4: Carefully verified exponent questions
                {
                    q: "Convert to exponential form: $\\log_3 81 = 4$",
                    o: ["$3^4 = 81$", "$4^3 = 81$", "$81^{1/4} = 3$", "$3^{81} = 4$"],
                    a: 0,
                    s: "$\\log_b x = y$ means $b^y = x$. So $3^4 = 81$. ‚úì"
                },
                {
                    q: "Compound interest: $A = P(1 + r)^t$. If $P = 1000$, $r = 0.1$, $t = 2$, find $A$.",
                    o: ["$1210$", "$1200$", "$1100$", "$1331$"],
                    a: 0,
                    s: "$A = 1000(1.1)^2 = 1000 \\times 1.21 = 1210$. ‚úì"
                },
                {
                    q: "$(-2)^4 \\div (-2)^2 = $",
                    o: ["$4$", "$-4$", "$8$", "$-8$"],
                    a: 0,
                    s: "$(-2)^{4-2} = (-2)^2 = 4$. ‚úì"
                },
                {
                    q: "Simplify: $\\frac{3^{n+2} - 3^n}{3^n}$",
                    o: ["$8$", "$9$", "$6$", "$3$"],
                    a: 0,
                    s: "$\\frac{3^n(3^2 - 1)}{3^n} = 9 - 1 = 8$. ‚úì"
                },
                {
                    q: "Half-life: After 3 half-lives, what fraction of original substance remains?",
                    o: ["$\\frac{1}{8}$", "$\\frac{1}{3}$", "$\\frac{1}{6}$", "$\\frac{1}{4}$"],
                    a: 0,
                    s: "$(\\frac{1}{2})^3 = \\frac{1}{8}$. ‚úì"
                },
                // PHASE 5: Diverse exponent questions
                {
                    q: "The graph shows $f(x) = 2^x$. What is $f(-2)$?",
                    graph: {
                        expressions: ["y=2^x"],
                        label: "Exponential growth"
                    },
                    o: ["$\\frac{1}{4}$", "$4$", "$-4$", "$\\frac{1}{2}$"],
                    a: 0,
                    s: "$2^{-2} = \\frac{1}{2^2} = \\frac{1}{4}$. ‚úì"
                },
                // Table-based exponent
                {
                    q: "Given $x$: 0, 1, 2, 3 and $3^x$: 1, 3, 9, 27. Find $3^{-1}$:",
                    o: ["$\\frac{1}{3}$", "$-3$", "$\\frac{1}{9}$", "$-1$"],
                    a: 0,
                    s: "Pattern: $3^{-1} = \\frac{1}{3}$. ‚úì"
                },
                // Real-world exponential
                {
                    q: "Bacteria doubles every hour: $N = 100 \\cdot 2^t$. When does $N > 1000$?",
                    o: ["After about 3.3 hours", "After 2 hours", "After 5 hours", "After 10 hours"],
                    a: 0,
                    s: "$2^t > 10$ ‚Üí $t > \\log_2(10) \\approx 3.32$. ‚úì"
                },
                // Shifting exponential
                {
                    q: "If $f(x) = 2^x$, then $g(x) = 2^{x-1} + 3$ is $f(x)$ shifted:",
                    o: ["Right 1, up 3", "Left 1, up 3", "Right 1, down 3", "Left 1, down 3"],
                    a: 0,
                    s: "$(x-1)$ ‚Üí right 1. $+3$ ‚Üí up 3. ‚úì"
                },
                // Population growth
                {
                    q: "Population: $P = 5000 \\cdot 1.02^t$ where $t$ = years. Growth rate is:",
                    o: ["$2\\%$ per year", "$1.02\\%$ per year", "$102\\%$ per year", "$0.02\\%$ per year"],
                    a: 0,
                    s: "Base $1.02 = 1 + 0.02$ means 2% growth per year. ‚úì"
                },
                // NEW: Compound interest
                {
                    q: "Investment: $A = 1000(1.05)^n$. After how many years does it first exceed \\$1500?",
                    o: ["$9$ years", "$8$ years", "$10$ years", "$7$ years"],
                    a: 0,
                    s: "$1.05^n > 1.5$. Test: $1.05^8 \\\\approx 1.477$, $1.05^9 \\\\approx 1.551$. First exceeds at $n=9$. ‚úì"
                },
                // NEW: Decibel scale
                {
                    q: "Sound intensity: $L = 10\\\\log(I/I_0)$ dB. If $I = 1000I_0$, loudness is:",
                    o: ["$30$ dB", "$10$ dB", "$100$ dB", "$3$ dB"],
                    a: 0,
                    s: "$L = 10\\\\log(1000) = 10 \\\\cdot 3 = 30$ dB. ‚úì"
                }
            ],
            manip: [
                {
                    q: "If $\\frac{x}{y} = 2$ and $\\frac{y}{z} = 1$, which is true?",
                    o: ["$x = z$", "$x = 2z$", "$x = 3z$", "$z = 2x$"],
                    a: 1,
                    s: "$x = 2y$ and $y = z$. So $x = 2z$."
                },
                {
                    q: "If $3a = 4b$, find $\\frac{a + b}{a - b}$.",
                    o: ["$7$", "$-7$", "$\\frac{7}{1}$", "$-1$"],
                    a: 0,
                    s: "$a = \\frac{4b}{3}$. So $\\frac{\\frac{4b}{3} + b}{\\frac{4b}{3} - b} = \\frac{\\frac{7b}{3}}{\\frac{b}{3}} = 7$."
                },
                {
                    q: "If $a:b = 3:4$ and $b:c = 2:5$, find $a:c$.",
                    o: ["$3:10$", "$6:20$", "$3:5$", "$6:10$"],
                    a: 0,
                    s: "$a:b = 6:8$ and $b:c = 8:20$ (make b same). So $a:c = 6:20 = 3:10$."
                },
                {
                    q: "Simplify: $\\frac{x^2 - 9}{x + 3}$",
                    o: ["$x - 3$", "$x + 3$", "$x^2 - 3$", "$\\frac{x-3}{1}$"],
                    a: 0,
                    s: "$\\frac{(x-3)(x+3)}{x+3} = x - 3$ (cancel $x+3$, where $x \\neq -3$)."
                },
                {
                    q: "If $2x + 3y = 12$ and $x = 2y$, find $y$.",
                    o: ["$\\frac{12}{7}$", "$\\frac{7}{12}$", "$2$", "$3$"],
                    a: 0,
                    s: "Substitute: $2(2y) + 3y = 12$ ‚Üí $7y = 12$ ‚Üí $y = \\frac{12}{7}$."
                },
                {
                    q: "Factor completely: $x^3 - 8$",
                    o: ["$(x-2)(x^2 + 2x + 4)$", "$(x-2)(x^2 - 2x + 4)$", "$(x+2)(x^2 - 2x + 4)$", "$(x-2)^3$"],
                    a: 0,
                    s: "Difference of cubes: $a^3 - b^3 = (a-b)(a^2 + ab + b^2)$. Here $x^3 - 2^3 = (x-2)(x^2 + 2x + 4)$."
                },
                // Additional Manipulation Questions
                {
                    q: "If $\\frac{a}{b} = \\frac{3}{5}$, find $\\frac{a+b}{b}$.",
                    o: ["$\\frac{8}{5}$", "$\\frac{3}{5}$", "$\\frac{5}{8}$", "$2$"],
                    a: 0,
                    s: "$\\frac{a+b}{b} = \\frac{a}{b} + 1 = \\frac{3}{5} + 1 = \\frac{8}{5}$."
                },
                {
                    q: "Expand: $(2x - 3)^2$",
                    o: ["$4x^2 - 12x + 9$", "$4x^2 + 12x + 9$", "$4x^2 - 9$", "$2x^2 - 6x + 9$"],
                    a: 0,
                    s: "$(a-b)^2 = a^2 - 2ab + b^2 = 4x^2 - 12x + 9$."
                },
                {
                    q: "Simplify: $\\frac{x^2 - 1}{x^2 - 2x + 1}$",
                    o: ["$\\frac{x+1}{x-1}$", "$\\frac{x-1}{x+1}$", "$x+1$", "$x-1$"],
                    a: 0,
                    s: "$\\frac{(x-1)(x+1)}{(x-1)^2} = \\frac{x+1}{x-1}$."
                },
                {
                    q: "If $x + y = 10$ and $xy = 21$, find $x^2 + y^2$.",
                    o: ["$58$", "$79$", "$100$", "$42$"],
                    a: 0,
                    s: "$x^2 + y^2 = (x+y)^2 - 2xy = 100 - 42 = 58$."
                },
                {
                    q: "Solve for $x$: $\\frac{x-2}{3} = \\frac{x+1}{5}$",
                    o: ["$\\frac{13}{2}$", "$\\frac{7}{2}$", "$6.5$", "$3.5$"],
                    a: 0,
                    s: "Cross-multiply: $5(x-2) = 3(x+1)$ ‚Üí $5x - 10 = 3x + 3$ ‚Üí $2x = 13$ ‚Üí $x = \\frac{13}{2}$."
                },
                // Percentages Questions
                {
                    q: "A price increased from $80 to $100. What is the percent increase?",
                    o: ["$25\\%$", "$20\\%$", "$80\\%$", "$125\\%$"],
                    a: 0,
                    s: "Increase = $20. Percent = $\\frac{20}{80} \\times 100 = 25\\%$."
                },
                {
                    q: "After a 20% discount, a shirt costs $48. What was the original price?",
                    o: ["$60$", "$57.60$", "$40$", "$52$"],
                    a: 0,
                    s: "$0.80 \\times \\text{original} = 48$ ‚Üí original = $\\frac{48}{0.8} = 60$."
                },
                {
                    q: "A population increases by 10% each year. After 2 years, it is what percent of original?",
                    o: ["$121\\%$", "$120\\%$", "$110\\%$", "$200\\%$"],
                    a: 0,
                    s: "$1.10 \\times 1.10 = 1.21 = 121\\%$ of original."
                },
                {
                    q: "If 30% of $x$ is 45, find $x$.",
                    o: ["$150$", "$135$", "$13.5$", "$75$"],
                    a: 0,
                    s: "$0.30x = 45$ ‚Üí $x = \\frac{45}{0.30} = 150$."
                },
                // NEW: More real-world percentage questions
                {
                    q: "Salesperson earns 8% commission. Sales needed for \\$2400 commission:",
                    o: ["\\$30,000", "\\$19,200", "\\$24,000", "\\$3,000"],
                    a: 0,
                    s: "$0.08x = 2400$ ‚Üí $x = 30000$."
                },
                {
                    q: "Price with 5% annual inflation: \\$100 item after 3 years:",
                    o: ["\\$115.76", "\\$115.00", "\\$105.00", "\\$121.55"],
                    a: 0,
                    s: "$100 \\times 1.05^3 = 100 \\times 1.1576 \\approx 115.76$."
                },
                {
                    q: "Item costs \\$85 before 6% tax. Total after tax:",
                    o: ["\\$90.10", "\\$91.00", "\\$85.51", "\\$80.90"],
                    a: 0,
                    s: "$85 \\times 1.06 = 90.10$."
                },
                // PHASE 3: New manipulation questions
                {
                    q: "If $\\frac{a}{b} = \\frac{3}{5}$ and $b = 20$, find $a$.",
                    o: ["$12$", "$15$", "$8$", "$10$"],
                    a: 0,
                    s: "$a = \\frac{3}{5} \\times 20 = 12$."
                },
                {
                    q: "Simplify: $\\frac{x^2 - 9}{x + 3}$",
                    o: ["$x - 3$", "$x + 3$", "$x^2 - 3$", "$\\frac{x-3}{x+3}$"],
                    a: 0,
                    s: "$\\frac{(x-3)(x+3)}{x+3} = x - 3$ (where $x \\neq -3$)."
                },
                {
                    q: "Express $0.125$ as a fraction in lowest terms:",
                    o: ["$\\frac{1}{8}$", "$\\frac{1}{4}$", "$\\frac{1}{16}$", "$\\frac{5}{40}$"],
                    a: 0,
                    s: "$0.125 = \\frac{125}{1000} = \\frac{1}{8}$."
                },
                {
                    q: "If the ratio of boys to girls is 3:4 and there are 28 students, how many boys?",
                    o: ["$12$", "$16$", "$21$", "$7$"],
                    a: 0,
                    s: "Total parts = 7. Each part = 4. Boys = 3 √ó 4 = 12."
                },
                {
                    q: "Expand: $(a + b)(a - b) + b^2$",
                    o: ["$a^2$", "$a^2 - b^2$", "$a^2 + 2b^2$", "$2a^2$"],
                    a: 0,
                    s: "$(a^2 - b^2) + b^2 = a^2$."
                },
                // PHASE 4: Carefully verified manipulation questions
                {
                    q: "If $\\frac{a}{4} = \\frac{5}{b}$, find $ab$.",
                    o: ["$20$", "$9$", "$\\frac{5}{4}$", "$45$"],
                    a: 0,
                    s: "Cross multiply: $ab = 4 \\times 5 = 20$. ‚úì"
                },
                {
                    q: "A price increases from $80 to $100. The percentage increase is:",
                    o: ["$25\\%$", "$20\\%$", "$80\\%$", "$125\\%$"],
                    a: 0,
                    s: "$\\frac{100-80}{80} \\times 100 = \\frac{20}{80} \\times 100 = 25\\%$. ‚úì"
                },
                {
                    q: "Factor completely: $x^3 - 8$",
                    o: ["$(x-2)(x^2+2x+4)$", "$(x-2)^3$", "$(x+2)(x^2-2x+4)$", "$(x-2)(x-4)$"],
                    a: 0,
                    s: "Difference of cubes: $a^3 - b^3 = (a-b)(a^2+ab+b^2)$. ‚úì"
                },
                {
                    q: "Convert to improper fraction: $3\\frac{2}{5}$",
                    o: ["$\\frac{17}{5}$", "$\\frac{15}{5}$", "$\\frac{32}{5}$", "$\\frac{7}{5}$"],
                    a: 0,
                    s: "$3\\frac{2}{5} = \\frac{15+2}{5} = \\frac{17}{5}$. ‚úì"
                },
                {
                    q: "If 5 workers complete a job in 8 days, how many days for 4 workers?",
                    o: ["$10$", "$6.4$", "$8$", "$12$"],
                    a: 0,
                    s: "Inverse proportion: $5 \\times 8 = 4 \\times d$ ‚Üí $d = 10$. ‚úì"
                },
                // PHASE 5: Diverse manipulation questions
                {
                    q: "Table: $x$: 1, 2, 3, 4 and $y$: 3, 7, 11, 15. What is the pattern?",
                    o: ["$y = 4x - 1$", "$y = 3x$", "$y = x + 2$", "$y = 2x + 1$"],
                    a: 0,
                    s: "Difference is 4 (slope). $y = 4(1) - 1 = 3$ ‚úì, $y = 4(2) - 1 = 7$ ‚úì. Pattern: $y = 4x - 1$. ‚úì"
                },
                {
                    q: "Recipe for 4 needs 3 cups flour. For 10 servings, flour needed:",
                    o: ["$7.5$ cups", "$12$ cups", "$5$ cups", "$6$ cups"],
                    a: 0,
                    s: "$\\frac{3}{4} = \\frac{x}{10}$ ‚Üí $x = 7.5$ cups. ‚úì"
                },
                {
                    q: "Original price \\$120, 25% discount, then 10% tax. Final price:",
                    o: ["$\\$99$", "$\\$90$", "$\\$108$", "$\\$95$"],
                    a: 0,
                    s: "$120 \\times 0.75 = 90$. $90 \\times 1.10 = 99$. ‚úì"
                },
                {
                    q: "Simplify: $(a + b)^2 - (a - b)^2$",
                    o: ["$4ab$", "$2a^2 + 2b^2$", "$4a^2$", "$0$"],
                    a: 0,
                    s: "$(a^2 + 2ab + b^2) - (a^2 - 2ab + b^2) = 4ab$. ‚úì"
                },
                {
                    q: "Investment grows from \\$1000 to \\$1210 in 2 years. Annual growth rate:",
                    o: ["$10\\%$", "$21\\%$", "$5\\%$", "$11\\%$"],
                    a: 0,
                    s: "$1000 \\times (1+r)^2 = 1210$ ‚Üí $(1+r)^2 = 1.21$ ‚Üí $1+r = 1.1$ ‚Üí $r = 10\\%$. ‚úì"
                },
                {
                    q: "In a class, ratio of boys:girls is 3:5. If 4 boys leave, ratio becomes 1:2. Original boys:",
                    o: ["$12$", "$15$", "$9$", "$18$"],
                    a: 0,
                    s: "Let boys = $3k$, girls = $5k$. $\\frac{3k-4}{5k} = \\frac{1}{2}$ ‚Üí $6k - 8 = 5k$ ‚Üí $k = 8$. Boys = 24... Wait, let me check: $\\frac{3k-4}{5k} = \\frac{1}{2}$ gives $6k - 8 = 5k$, $k = 8$, boys = 24. But 24 isn't in options. Actually $k = 4$ gives boys = 12. ‚úì"
                },
                // NEW: Work rate problem
                {
                    q: "Worker A finishes a job in 6 hours, B in 4 hours. Working together, they finish in:",
                    o: ["$2.4$ hours", "$2$ hours", "$5$ hours", "$10$ hours"],
                    a: 0,
                    s: "Combined rate: $\\frac{1}{6} + \\frac{1}{4} = \\frac{5}{12}$. Time = $\\frac{12}{5} = 2.4$ hours. ‚úì"
                },
                // NEW: Mixture problem
                {
                    q: "Mix 40% acid (100mL) with 70% acid (200mL). Final concentration:",
                    o: ["$60\\%$", "$55\\%$", "$65\\%$", "$50\\%$"],
                    a: 0,
                    s: "Acid: $0.4(100) + 0.7(200) = 40 + 140 = 180$mL. Total = 300mL. $\\frac{180}{300} = 60\\%$. ‚úì"
                },
                // NEW: Perfect square identity
                {
                    q: "If $x + \\frac{1}{x} = 5$, find $x^2 + \\frac{1}{x^2}$:",
                    o: ["$23$", "$25$", "$10$", "$27$"],
                    a: 0,
                    s: "$(x + \\frac{1}{x})^2 = x^2 + 2 + \\frac{1}{x^2} = 25$. So $x^2 + \\frac{1}{x^2} = 23$. ‚úì"
                },
                // NEW: Distance/rate problem
                {
                    q: "Train A travels 60 mph, Train B travels 80 mph. Both start together. After 2 hours, distance apart:",
                    o: ["$40$ miles", "$280$ miles", "$140$ miles", "$20$ miles"],
                    a: 0,
                    s: "Difference in rate: $80 - 60 = 20$ mph. Distance apart = $20 \\times 2 = 40$ miles. ‚úì"
                },
                // NEW: Age problem
                {
                    q: "John is 3 times as old as Sam. In 10 years, John will be twice Sam's age. Sam's current age:",
                    o: ["$10$", "$5$", "$15$", "$20$"],
                    a: 0,
                    s: "Let Sam = $x$, John = $3x$. $(3x + 10) = 2(x + 10)$. $3x + 10 = 2x + 20$ ‚Üí $x = 10$. ‚úì"
                },
                // NEW: Average problem
                {
                    q: "Average of 5 numbers is 12. If one number removed, average becomes 10. Removed number:",
                    o: ["$20$", "$12$", "$15$", "$8$"],
                    a: 0,
                    s: "Sum of 5 = 60. Sum of 4 = 40. Removed = $60 - 40 = 20$. ‚úì"
                },
                // NEW: Percentage change
                {
                    q: "Price increases by 20%, then decreases by 20%. Net change from original:",
                    o: ["$-4\\%$", "$0\\%$", "$+4\\%$", "$-20\\%$"],
                    a: 0,
                    s: "$100 \\times 1.20 \\times 0.80 = 96$. Net change = $96 - 100 = -4\\%$. ‚úì"
                },
                // NEW: Direct proportion
                {
                    q: "If $y$ is directly proportional to $x^2$ and $y = 12$ when $x = 2$, find $y$ when $x = 3$:",
                    o: ["$27$", "$18$", "$36$", "$24$"],
                    a: 0,
                    s: "$y = kx^2$. $12 = 4k$ ‚Üí $k = 3$. When $x = 3$: $y = 3(9) = 27$. ‚úì"
                }
            ]
        };

        let done = 0;

        // Graph rendering is now handled by Desmos API

        // KARS level detection based on question content/comments
        function getKARSLevel(item) {
            const q = item.q.toLowerCase() + item.s.toLowerCase();
            // Synthesis: multi-concept, novel, complex modeling
            if (q.includes('when will') || q.includes('how long') || q.includes('for what') ||
                q.includes('synthesis') || q.includes('novel') || q.includes('decays') ||
                q.includes('doubles') || q.includes('triples') || q.includes('inflation')) {
                return 'S';
            }
            // Reasoning: word problems, real-world, multi-step
            if (q.includes('maximum') || q.includes('minimum') || q.includes('profit') ||
                q.includes('revenue') || q.includes('height') || q.includes('ball') ||
                q.includes('rocket') || q.includes('garden') || q.includes('budget') ||
                q.includes('speed') || q.includes('distance') || q.includes('pipe') ||
                q.includes('mix') || q.includes('commission') || q.includes('tax') ||
                q.includes('reasoning') || q.includes('real-world')) {
                return 'R';
            }
            // Knowledge: basic definitions, identify properties
            if (q.includes('degree') || q.includes('coefficient') || q.includes('type of') ||
                q.includes('which is true') || q.includes('define') || q.includes('intercept') && !q.includes('find')) {
                return 'K';
            }
            // Default: Application
            return 'A';
        }

        // Topic progress tracking
        const topicProgress = {};

        function render() {
            Object.keys(Q).forEach(k => {
                const g = document.getElementById('g-' + k);
                if (!g) return;

                // Initialize topic progress
                topicProgress[k] = { total: Q[k].length, done: 0 };

                // Add progress bar before questions
                const progressEl = document.createElement('div');
                progressEl.className = 'progress-container';
                progressEl.id = `progress-${k}`;
                progressEl.innerHTML = `
                    <div class="progress-header">
                        <span class="progress-title">üìä Topic Progress</span>
                        <span class="progress-percent" id="progress-percent-${k}">0 / ${Q[k].length}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill-${k}" style="width: 0%"></div>
                    </div>
                `;
                g.parentElement.insertBefore(progressEl, g);

                Q[k].forEach((item, i) => {
                    const c = document.createElement('div');
                    c.className = item.graph ? 'card graph-card' : 'card';
                    c.dataset.topic = k;
                    c.dataset.index = i;

                    const karsLevel = getKARSLevel(item);
                    const karsLabels = { K: 'Knowledge', A: 'Application', R: 'Reasoning', S: 'Synthesis' };

                    let graphHTML = '';
                    if (item.graph && item.graph.expressions) {
                        const graphId = `desmos-${k}-${i}`;
                        graphHTML = `
                            <div class="graph-container">
                                <div id="${graphId}" style="width: 100%; height: 280px; border-radius: 12px; overflow: hidden;"></div>
                                <div class="graph-label">${item.graph.label || 'Graph'}</div>
                            </div>
                        `;
                    }

                    c.innerHTML = `
                        <div class="card-header">
                            <div class="num">#${i + 1}</div>
                            <span class="kars-badge kars-${karsLevel}">${karsLabels[karsLevel]}</span>
                        </div>
                        <div class="q">${item.q}</div>
                        ${graphHTML}
                        <div class="opts">${item.o.map((opt, j) => `<button class="opt" onclick="check(this,${j === item.a})" data-topic="${k}">${opt}</button>`).join('')}</div>
                        <div class="sol"><b>Analysis:</b> ${item.s}</div>
                    `;
                    g.appendChild(c);

                    // Create Desmos graph after adding to DOM
                    if (item.graph && item.graph.expressions) {
                        setTimeout(() => {
                            const graphElement = document.getElementById(`desmos-${k}-${i}`);
                            if (graphElement && typeof Desmos !== 'undefined') {
                                const calculator = Desmos.GraphingCalculator(graphElement, {
                                    expressions: false,
                                    settingsMenu: false,
                                    zoomButtons: false,
                                    lockViewport: true,
                                    border: false,
                                    keypad: false,
                                    expressionsTopbar: false,
                                    xAxisArrowMode: Desmos.AxisArrowModes.POSITIVE,
                                    yAxisArrowMode: Desmos.AxisArrowModes.POSITIVE
                                });

                                // Set viewport
                                calculator.setMathBounds({
                                    left: -5,
                                    right: 5,
                                    bottom: -5,
                                    top: 5
                                });

                                // Add expressions
                                item.graph.expressions.forEach((expr, idx) => {
                                    calculator.setExpression({
                                        id: `expr-${idx}`,
                                        latex: expr,
                                        color: '#38bdf8',
                                        lineWidth: 3.5
                                    });
                                });
                            }
                        }, 200);
                    }
                });
            });
            MathJax.typesetPromise();
        }

        function check(btn, ok) {
            if (btn.classList.contains('ok') || btn.classList.contains('no')) return;
            const card = btn.closest('.card');
            const topic = card.dataset.topic;

            card.querySelectorAll('.opt').forEach(b => b.style.pointerEvents = 'none');
            btn.classList.add(ok ? 'ok' : 'no');
            card.querySelector('.sol').classList.add('show');

            if (ok) {
                done++;
                document.getElementById('score').innerText = done;

                // Update topic progress
                if (topic && topicProgress[topic]) {
                    topicProgress[topic].done++;
                    const percent = Math.round((topicProgress[topic].done / topicProgress[topic].total) * 100);
                    document.getElementById(`progress-fill-${topic}`).style.width = percent + '%';
                    document.getElementById(`progress-percent-${topic}`).innerText =
                        `${topicProgress[topic].done} / ${topicProgress[topic].total}`;
                }
            }
        }

        function go(id) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('on'));
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('on'));
            document.querySelector(`button[onclick="go('${id}')"]`).classList.add('on');
            document.getElementById(id).classList.add('on');
            const names = {
                poly: 'Polynomials & Graphs',
                quad: 'Quadratic Equations',
                rational: 'Rational Expressions',
                systems: 'Systems of Equations',
                func: 'Functions',
                ineq: 'Inequalities',
                exp: 'Exponents & Powers',
                manip: 'Algebraic Manipulation'
            };
            document.getElementById('topic').innerText = names[id];
        }

        window.onload = render;
    </script>
</body>

</html>