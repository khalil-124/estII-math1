<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EST II Math Level 1 - Practice Exam 8</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Times+New+Roman&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --est-gray: #6b6b6b;
            --est-dark: #333;
            --est-light: #f5f5f5;
            --est-border: #ccc;
            --correct: #22c55e;
            --incorrect: #ef4444;
            --selected: #3b82f6;
        }

        body {
            font-family: 'Times New Roman', Georgia, serif;
            background: #fff;
            color: #000;
            line-height: 1.6;
        }

        .est-header {
            background: linear-gradient(135deg, #888 0%, #666 100%);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #333;
        }

        .est-logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }

        .est-logo span {
            color: #ddd;
        }

        .high-school {
            font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            color: #fff;
            font-style: italic;
            letter-spacing: 3px;
        }

        .timer-bar {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            padding: 12px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .timer {
            font-family: 'Outfit', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timer-icon {
            font-size: 1.2rem;
        }

        .timer.warning {
            color: #fbbf24;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .progress-info {
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
        }

        .cover-page {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 40px;
            text-align: center;
        }

        .cover-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .cover-subtitle {
            font-size: 1.8rem;
            color: #666;
            margin-bottom: 40px;
        }

        .cover-info {
            background: #f5f5f5;
            border: 2px solid #ccc;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }

        .cover-info h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .cover-info p {
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .start-btn {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.3rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 30px;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .exam-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 40px;
        }

        .exam-container.active {
            display: flex;
            gap: 30px;
        }

        .questions-section {
            flex: 1;
        }

        .navigator-section {
            width: 200px;
            position: sticky;
            top: 80px;
            height: fit-content;
        }

        .question-container {
            background: #fff;
            border: 1px solid #ddd;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .question-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-number {
            background: #333;
            color: white;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.7;
            flex: 1;
        }

        .graph-container {
            margin: 20px 0;
            text-align: center;
            background: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
        }

        .graph-container img {
            max-width: 100%;
            height: auto;
            max-height: 300px;
        }

        .options-list {
            list-style: none;
            margin-top: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:hover {
            background: #f5f5f5;
            border-color: #999;
        }

        .option-item.selected {
            background: #e0e7ff;
            border-color: var(--selected);
        }

        .option-item.correct {
            background: #dcfce7;
            border-color: var(--correct);
        }

        .option-item.incorrect {
            background: #fee2e2;
            border-color: var(--incorrect);
        }

        .option-letter {
            font-weight: bold;
            margin-right: 15px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid currentColor;
            border-radius: 50%;
            font-size: 0.85rem;
        }

        .option-text {
            flex: 1;
        }

        .explanation-box {
            display: none;
            background: #f0fdf4;
            border: 1px solid #86efac;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .explanation-box.show {
            display: block;
        }

        .explanation-title {
            font-weight: bold;
            color: #166534;
            margin-bottom: 8px;
        }

        .explanation-step {
            display: flex;
            gap: 10px;
            margin: 8px 0;
            align-items: flex-start;
        }

        .step-num {
            background: #166534;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .navigator-title {
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }

        .navigator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
        }

        .nav-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .nav-item:hover {
            background: #f0f0f0;
        }

        .nav-item.answered {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .nav-item.current {
            border: 2px solid #333;
            font-weight: bold;
        }

        .nav-item.correct-review {
            background: var(--correct);
            color: white;
        }

        .nav-item.incorrect-review {
            background: var(--incorrect);
            color: white;
        }

        .submit-section {
            text-align: center;
            padding: 30px;
            margin-top: 20px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.2rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .results-container {
            display: none;
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            text-align: center;
            background: #f5f5f5;
            border-radius: 12px;
        }

        .results-container.active {
            display: block;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .results-details {
            margin: 30px 0;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .review-btn {
            background: var(--selected);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            border-radius: 8px;
            margin-top: 20px;
        }

        .est-footer {
            background: #333;
            color: #fff;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
    </style>
</head>

<body>
    <header class="est-header">
        <div class="est-logo">est<span>°</span></div>
        <div class="high-school">HIGH SCHOOL</div>
    </header>

    <div class="cover-page" id="coverPage">
        <h1 class="cover-title">EST II Mathematics</h1>
        <h2 class="cover-subtitle">Level 1 - Practice Exam 8</h2>

        <div class="cover-info">
            <h3>Exam Information</h3>
            <p><strong>Total Questions:</strong> 40 multiple-choice questions</p>
            <p><strong>Time Allowed:</strong> 60 minutes</p>
            <p><strong>Calculator:</strong> Scientific or graphing calculators are permitted</p>
            <p><strong>Scoring:</strong> Each correct answer is worth 1 point</p>
        </div>

        <div class="cover-info">
            <h3>Instructions</h3>
            <p>• Read each question carefully before selecting your answer</p>
            <p>• You may skip questions and return to them later</p>
            <p>• Use the question navigator to track your progress</p>
            <p>• Click "Submit Exam" when you are finished</p>
        </div>

        <button class="start-btn" onclick="startExam()">Start Exam</button>
    </div>

    <div class="timer-bar" id="timerBar" style="display: none;">
        <div class="timer" id="timer">
            <span class="timer-icon">⏱</span>
            <span id="timeDisplay">60:00</span>
        </div>
        <div class="progress-info">
            <span id="answeredCount">0</span> / 40 Answered
        </div>
    </div>

    <div class="exam-container" id="examContainer">
        <div class="questions-section" id="questionsSection"></div>
        <div class="navigator-section">
            <div class="navigator-title">Questions</div>
            <div class="navigator-grid" id="navigatorGrid"></div>
        </div>
    </div>

    <div class="results-container" id="resultsContainer">
        <h2>Exam Complete!</h2>
        <div class="score-circle">
            <div class="score-number" id="scoreNumber">0</div>
            <div class="score-label">out of 40</div>
        </div>
        <div class="results-details">
            <div class="result-row">
                <span>Correct Answers:</span>
                <span id="correctCount">0</span>
            </div>
            <div class="result-row">
                <span>Incorrect Answers:</span>
                <span id="incorrectCount">0</span>
            </div>
            <div class="result-row">
                <span>Unanswered:</span>
                <span id="unansweredCount">0</span>
            </div>
            <div class="result-row">
                <span>Percentage:</span>
                <span id="percentageScore">0%</span>
            </div>
        </div>
        <button class="review-btn" onclick="reviewAnswers()">Review Answers</button>
    </div>

    <footer class="est-footer">
        <span>ESTII-HS Math L1</span>
        <span>Practice Exam 8</span>
        <span>2026</span>
    </footer>

    <script>
                        const questions = [
            // ===== Q1-11: ALGEBRA & FUNCTIONS (27.5%) =====
            {
                id: 1,
                question: "The graph shows f(x) = |x - 2| + 1 with vertex V(2, 1). For what value of k does f(x) = k have exactly one solution?",
                hasGraph: true,
                graphImage: "images/ex8_q1_absvalue.png",
                options: ["0", "1", "2", "3", "No such k"],
                answer: 1,
                explanation: ["f(x) = |x-2| + 1 has minimum at vertex.", "Minimum value is 1 at x = 2.", "f(x) = k has one solution when k = minimum.", "k = 1 gives x = 2 only.", "The answer is B: 1."]
            },
            {
                id: 2,
                question: "If \\(f(x) = (x+1)(x-2)(x+3)\\), what is f(0)?",
                options: ["-6", "-3", "0", "3", "6"],
                answer: 0,
                explanation: ["f(0) = (0+1)(0-2)(0+3).", "= (1)(-2)(3).", "= -6.", "Direct substitution.", "The answer is A: -6."]
            },
            {
                id: 3,
                question: "If \\(3^{2x-1} = 27^{x-2}\\), what is x?",
                options: ["3", "5", "7", "9", "11"],
                answer: 1,
                explanation: ["27 = 3³, so 3^(2x-1) = 3^(3(x-2)).", "2x - 1 = 3x - 6.", "-1 + 6 = 3x - 2x.", "x = 5.", "The answer is B: 5."]
            },
            {
                id: 4,
                question: "The product of roots of \\(x^2 - (k+2)x + 2k = 0\\) is 6. What is the sum of roots?",
                options: ["3", "4", "5", "6", "8"],
                answer: 2,
                explanation: ["Product = c/a = 2k = 6, so k = 3.", "Sum = -b/a = k + 2 = 3 + 2 = 5.", "Using Vieta's formulas.", "Product gives k, then find sum.", "The answer is C: 5."]
            },
            {
                id: 5,
                question: "If \\(f(x) = 2^x\\), what is \\(f(3) - f(1)\\)?",
                options: ["2", "4", "6", "8", "10"],
                answer: 2,
                explanation: ["f(3) = 2³ = 8.", "f(1) = 2¹ = 2.", "f(3) - f(1) = 8 - 2 = 6.", "Simple function evaluation.", "The answer is C: 6."]
            },
            {
                id: 6,
                question: "If \\(f(x) = x^3 - 3x\\), at how many points does the graph of f cross the x-axis?",
                options: ["0", "1", "2", "3", "4"],
                answer: 3,
                explanation: ["f(x) = x³ - 3x = x(x² - 3) = x(x-√3)(x+√3).", "Zeros at x = 0, √3, -√3.", "Three distinct real roots.", "Cubic with 3 x-intercepts.", "The answer is D: 3."]
            },
            {
                id: 7,
                question: "If \\(f(x) = \sqrt{x-2}\\), what is the domain of f?",
                options: ["x ≥ 0", "x ≥ 2", "x > 2", "x ≤ 2", "All real numbers"],
                answer: 1,
                explanation: ["Square root requires non-negative radicand.", "x - 2 ≥ 0.", "x ≥ 2.", "Domain: [2, ∞).", "The answer is B: x ≥ 2."]
            },
            {
                id: 8,
                question: "The function \\(g(x) = x^2 - 6x + k\\) has a minimum value of -4. What is k?",
                options: ["1", "3", "5", "7", "9"],
                answer: 2,
                explanation: ["Complete square: g(x) = (x-3)² - 9 + k.", "Minimum at x = 3 is -9 + k.", "-9 + k = -4.", "k = 5.", "The answer is C: 5."]
            },
            {
                id: 9,
                question: "If \\(2^{x+1} + 2^x = 12\\), what is x?",
                options: ["1", "2", "3", "4", "5"],
                answer: 1,
                explanation: ["2^(x+1) = 2 × 2^x.", "2 × 2^x + 2^x = 12.", "3 × 2^x = 12.", "2^x = 4 = 2².", "x = 2. The answer is B: 2."]
            },
            {
                id: 10,
                question: "If f is a linear function with f(2) = 7 and f(5) = 16, what is f(0)?",
                options: ["1", "2", "3", "4", "5"],
                answer: 0,
                explanation: ["Slope = (16-7)/(5-2) = 9/3 = 3.", "f(x) = 3x + b.", "f(2) = 6 + b = 7, so b = 1.", "f(0) = 3(0) + 1 = 1.", "The answer is A: 1."]
            },
            {
                id: 11,
                question: "For \\(f(x) = \frac{2x+1}{x-3}\\), what is the horizontal asymptote?",
                options: ["y = 0", "y = 1", "y = 2", "y = 3", "No horizontal asymptote"],
                answer: 2,
                explanation: ["For rational functions, if degrees equal...", "Horizontal asymptote = leading coefficients ratio.", "= 2/1 = 2.", "y = 2.", "The answer is C: y = 2."]
            },
            // ===== Q12-20: GEOMETRY (22.5%) - CREATIVE! =====
            {
                id: 12,
                question: "A right triangle has legs 6 and 8, and hypotenuse 10. What is the radius of the inscribed circle?",
                hasGraph: true,
                graphImage: "images/ex8_q12_inscribed.png",
                options: ["1", "2", "3", "4", "5"],
                answer: 1,
                explanation: ["Inradius r = Area / semi-perimeter.", "Area = (1/2)(6)(8) = 24.", "Perimeter = 6 + 8 + 10 = 24, s = 12.", "r = 24/12 = 2.", "The answer is B: 2."]
            },
            {
                id: 13,
                question: "In a right triangle, the altitude to the hypotenuse divides it into segments of 4 and 9. What is the length of this altitude?",
                options: ["5", "6", "7", "√13", "13"],
                answer: 1,
                explanation: ["Altitude = geometric mean of segments.", "h = √(4 × 9) = √36 = 6.", "This is the altitude-on-hypotenuse theorem.", "Also: legs are √(4×13) and √(9×13).", "The answer is B: 6."]
            },
            {
                id: 14,
                question: "In triangle ABC, the angle bisector from A meets BC at D. If AB = 6, AC = 9, and BC = 10, what is BD?",
                options: ["3", "4", "5", "6", "7"],
                answer: 1,
                explanation: ["Angle bisector theorem: BD/DC = AB/AC.", "BD/DC = 6/9 = 2/3.", "BD + DC = 10.", "Let BD = 2k, DC = 3k. 5k = 10, k = 2.", "BD = 4. The answer is B: 4."]
            },
            {
                id: 15,
                question: "In a right triangle, the median to the hypotenuse has length 5. What is the length of the hypotenuse?",
                options: ["5", "10", "15", "20", "25"],
                answer: 1,
                explanation: ["In a right triangle, median to hypotenuse = half of hypotenuse.", "So hypotenuse = 2 × median.", "= 2 × 5 = 10.", "Special property of right triangles.", "The answer is B: 10."]
            },
            {
                id: 16,
                question: "A 30-60-90 triangle has hypotenuse 12. What is the area?",
                options: ["18", "18√3", "36", "36√3", "72"],
                answer: 1,
                explanation: ["In 30-60-90: sides are x, x√3, 2x.", "2x = 12, so x = 6.", "Legs: 6 and 6√3.", "Area = (1/2)(6)(6√3) = 18√3.", "The answer is B: 18√3."]
            },
            {
                id: 17,
                question: "A tangent from external point P to a circle has length 8. If P is 10 from the center, what is the radius?",
                options: ["4", "5", "6", "7", "8"],
                answer: 2,
                explanation: ["Tangent perpendicular to radius at point of tangency.", "Right triangle: r² + 8² = 10².", "r² = 100 - 64 = 36.", "r = 6.", "The answer is C: 6."]
            },
            {
                id: 18,
                question: "Two circles have radii 5 and 3 with centers 12 apart. How many common tangents do they have?",
                options: ["0", "1", "2", "3", "4"],
                answer: 4,
                explanation: ["Sum of radii = 8 < 12 (distance).", "Circles don't overlap and don't touch.", "External circles: 4 common tangents.", "2 external + 2 internal tangents.", "The answer is E: 4."]
            },
            {
                id: 19,
                question: "Based on the scatter plot, which best estimates the slope of the line of best fit?",
                hasGraph: true,
                graphImage: "images/ex8_q19_scatter.png",
                options: ["0.5", "1", "1.5", "2", "2.5"],
                answer: 3,
                explanation: ["Observe points: from x=1 to x=10, y goes from ~5 to ~23.", "Change: Δy ≈ 18, Δx = 9.", "Slope ≈ 18/9 = 2.", "Line of best fit has positive slope ~2.", "The answer is D: 2."]
            },
            {
                id: 20,
                question: "A sector of a circle with radius 8 has arc length 6π. What is the area of the sector?",
                options: ["12π", "18π", "24π", "32π", "48π"],
                answer: 2,
                explanation: ["Arc length = rθ, so 6π = 8θ.", "θ = 6π/8 = 3π/4 radians.", "Sector area = (1/2)r²θ = (1/2)(64)(3π/4).", "= 32 × 3π/4 = 24π.", "The answer is C: 24π."]
            },
            // ===== Q21-25: COORDINATE GEOMETRY (12.5%) =====
            {
                id: 21,
                question: "Point A(3, 4) is reflected over the line y = x. What are the coordinates of the image?",
                options: ["(4, 3)", "(-3, -4)", "(3, -4)", "(-4, -3)", "(4, -3)"],
                answer: 0,
                explanation: ["Reflection over y = x swaps coordinates.", "(x, y) → (y, x).", "(3, 4) → (4, 3).", "Simple reflection rule.", "The answer is A: (4, 3)."]
            },
            {
                id: 22,
                question: "What is the area of the triangle with vertices (0, 0), (4, 0), and (2, 6)?",
                options: ["6", "8", "10", "12", "24"],
                answer: 3,
                explanation: ["Base on x-axis = 4.", "Height = y-coord of (2,6) = 6.", "Area = (1/2)(4)(6) = 12.", "Triangle area formula.", "The answer is D: 12."]
            },
            {
                id: 23,
                question: "The line 3x - y = 4 is perpendicular to ax + 3y = 7. What is a?",
                options: ["-3", "-1", "1", "3", "9"],
                answer: 2,
                explanation: ["Line 1: 3x - y = 4 → y = 3x - 4, m₁ = 3.", "For perpendicular: m₁ × m₂ = -1.", "3 × m₂ = -1, m₂ = -1/3.", "Line 2: ax + 3y = 7 → y = (-a/3)x + 7/3.", "-a/3 = -1/3, a = 1. The answer is C: 1."]
            },
            {
                id: 24,
                question: "A circle has center (2, -1) and is tangent to the y-axis. What is its equation?",
                options: ["(x-2)² + (y+1)² = 1", "(x-2)² + (y+1)² = 2", "(x-2)² + (y+1)² = 4", "(x+2)² + (y-1)² = 4", "(x-2)² + (y+1)² = 5"],
                answer: 2,
                explanation: ["Tangent to y-axis means radius = distance to y-axis.", "Distance from (2, -1) to y-axis = |2| = 2.", "r = 2, r² = 4.", "Equation: (x-2)² + (y+1)² = 4.", "The answer is C."]
            },
            {
                id: 25,
                question: "What is the equation of the perpendicular bisector of segment AB where A(1, 3) and B(5, 7)?",
                options: ["x + y = 8", "x - y = -2", "x + y = 6", "y = x", "x + y = 10"],
                answer: 0,
                explanation: ["Midpoint M = ((1+5)/2, (3+7)/2) = (3, 5).", "Slope of AB = (7-3)/(5-1) = 1.", "Perpendicular slope = -1.", "Line through (3,5) with slope -1: y - 5 = -1(x - 3).", "y = -x + 8, x + y = 8. The answer is A."]
            },
            // ===== Q26-32: STATISTICS & PROBABILITY (17.5%) =====
            {
                id: 26,
                question: "In a class, P(student plays soccer) = 0.6 and P(plays basketball) = 0.5. If P(plays both) = 0.3, what is P(plays neither)?",
                options: ["0.1", "0.2", "0.3", "0.4", "0.5"],
                answer: 1,
                explanation: ["P(A ∪ B) = P(A) + P(B) - P(A ∩ B).", "= 0.6 + 0.5 - 0.3 = 0.8.", "P(neither) = 1 - P(A ∪ B) = 0.2.", "Inclusion-exclusion principle.", "The answer is B: 0.2."]
            },
            {
                id: 27,
                question: "A box has 4 red and 6 blue balls. Two balls drawn without replacement. P(both same color) = ?",
                options: ["1/3", "7/15", "8/15", "2/3", "7/10"],
                answer: 1,
                explanation: ["P(both red) = (4/10)(3/9) = 12/90.", "P(both blue) = (6/10)(5/9) = 30/90.", "P(same) = 12/90 + 30/90 = 42/90 = 7/15.", "Add probabilities of disjoint events.", "The answer is B: 7/15."]
            },
            {
                id: 28,
                question: "How many ways can 7 people sit in a row if 2 specific people must sit together?",
                options: ["720", "1440", "2520", "5040", "10080"],
                answer: 1,
                explanation: ["Treat 2 people as 1 unit: 6 units.", "Arrange 6 units: 6! = 720.", "The 2 people can switch: 2! = 2.", "Total = 720 × 2 = 1440.", "The answer is B: 1440."]
            },
            {
                id: 29,
                question: "A fair die is rolled. Given the result is even, what is P(result > 4)?",
                options: ["1/6", "1/4", "1/3", "1/2", "2/3"],
                answer: 2,
                explanation: ["Even results: {2, 4, 6}.", "Result > 4 from evens: {6}.", "Conditional: P(>4 | even) = 1/3.", "Conditional probability.", "The answer is C: 1/3."]
            },
            {
                id: 30,
                question: "For data {2, 4, 6, 8, 10}, what is the standard deviation?",
                options: ["2", "2√2", "4", "8", "10"],
                answer: 1,
                explanation: ["Mean = 30/5 = 6.", "Deviations: -4, -2, 0, 2, 4.", "Squared: 16, 4, 0, 4, 16. Sum = 40.", "Variance = 40/5 = 8.", "SD = √8 = 2√2. The answer is B."]
            },
            {
                id: 31,
                question: "In how many ways can 5 different books be arranged if 2 specific books must NOT be adjacent?",
                options: ["48", "60", "72", "96", "120"],
                answer: 2,
                explanation: ["Total arrangements = 5! = 120.", "Adjacent arrangements: treat 2 as unit = 4! × 2! = 48.", "Not adjacent = 120 - 48 = 72.", "Complement counting.", "The answer is C: 72."]
            },
            {
                id: 32,
                question: "From the ogive (cumulative frequency graph), the median class is:",
                hasGraph: true,
                graphImage: "images/ex8_q32_ogive.png",
                options: ["0-10", "10-20", "20-30", "30-40", "40-50"],
                answer: 2,
                explanation: ["Total frequency = 50.", "Median position = 25.", "From ogive: 25 falls in 20-30 class.", "Cumulative at 20 is 15, at 30 is 30.", "The answer is C: 20-30."]
            },
            // ===== Q33-37: NUMERATIONS & OPERATIONS (12.5%) =====
            {
                id: 33,
                question: "In a geometric sequence, a₁ = 2 and a₄ = 54. What is a₆?",
                options: ["162", "324", "486", "972", "1458"],
                answer: 2,
                explanation: ["a₄ = a₁ × r³ = 2r³ = 54.", "r³ = 27, r = 3.", "a₆ = a₁ × r⁵ = 2 × 3⁵ = 2 × 243 = 486.", "Geometric sequence formula.", "The answer is C: 486."]
            },
            {
                id: 34,
                question: "If \\(\\sqrt{2x + 3} = x\\), what is x?",
                options: ["-1", "1", "3", "-1 and 3", "No solution"],
                answer: 2,
                explanation: ["Square both sides: 2x + 3 = x².", "x² - 2x - 3 = 0.", "(x-3)(x+1) = 0, x = 3 or -1.", "Check: √(2(3)+3) = √9 = 3 ✓.", "√(2(-1)+3) = √1 = 1 ≠ -1 ✗. The answer is C: 3."]
            },
            {
                id: 35,
                question: "If \\(3^x = 27\\) and \\(2^y = 16\\), what is xy?",
                options: ["7", "12", "15", "21", "28"],
                answer: 1,
                explanation: ["3^x = 27 = 3³, so x = 3.", "2^y = 16 = 2⁴, so y = 4.", "xy = 3 × 4 = 12.", "Solving exponential equations.", "The answer is B: 12."]
            },
            {
                id: 36,
                question: "The sum of an arithmetic series with first term 3, last term 47, and 12 terms is:",
                options: ["250", "275", "300", "325", "350"],
                answer: 2,
                explanation: ["Sum = n(a₁ + aₙ)/2.", "= 12(3 + 47)/2.", "= 12 × 50/2 = 300.", "Arithmetic series formula.", "The answer is C: 300."]
            },
            {
                id: 37,
                question: "If \\(x^{1/3} = 2\\), what is \\(x^{2/3} + x^{-1/3}\\)?",
                options: ["4", "4.5", "5", "5.5", "6"],
                answer: 1,
                explanation: ["x^(1/3) = 2.", "x^(2/3) = (x^(1/3))² = 4.", "x^(-1/3) = 1/x^(1/3) = 1/2.", "Sum = 4 + 0.5 = 4.5.", "The answer is B: 4.5."]
            },
            // ===== Q38-40: TRIGONOMETRY (7.5%) =====
            {
                id: 38,
                question: "On the unit circle, point P corresponds to angle θ = 5π/6. What is cos θ?",
                hasGraph: true,
                graphImage: "images/ex8_q38_unitcircle.png",
                options: ["-√3/2", "-1/2", "1/2", "√3/2", "-√2/2"],
                answer: 0,
                explanation: ["5π/6 is in Quadrant II.", "Reference angle = π - 5π/6 = π/6.", "cos(π/6) = √3/2.", "In Q2, cos is negative.", "cos(5π/6) = -√3/2. The answer is A."]
            },
            {
                id: 39,
                question: "If sin θ = 5/13 and θ is in Quadrant I, what is tan θ?",
                options: ["5/12", "5/13", "12/13", "12/5", "13/12"],
                answer: 0,
                explanation: ["sin θ = opp/hyp = 5/13.", "adj = √(13² - 5²) = √144 = 12.", "tan θ = opp/adj = 5/12.", "Using Pythagorean theorem.", "The answer is A: 5/12."]
            },
            {
                id: 40,
                question: "Which is equal to sin(π - x)?<br>I. sin x<br>II. -sin x<br>III. cos x",
                options: ["I only", "II only", "III only", "I and III only", "None"],
                answer: 0,
                explanation: ["sin(π - x) = sin π cos x - cos π sin x.", "= 0 × cos x - (-1) × sin x = sin x.", "I: TRUE.", "II: FALSE, III: FALSE.", "The answer is A: I only."]
            }
        ];

        // State
        let timeRemaining = 60 * 60;
        let timerInterval = null;
        let userAnswers = new Array(40).fill(null);
        let examSubmitted = false;
        let reviewMode = false;

        function startExam() {
            document.getElementById('coverPage').style.display = 'none';
            document.getElementById('timerBar').style.display = 'flex';
            document.getElementById('examContainer').classList.add('active');
            renderQuestions();
            renderNavigator();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (timeRemaining <= 300) {
                document.getElementById('timer').classList.add('warning');
            }
        }

        function renderGraph(imagePath) {
            return `<div class="graph-container">
                <img src="${imagePath}" alt="Graph" onerror="this.style.display='none'">
            </div>`;
        }

        function renderQuestions() {
            const container = document.getElementById('questionsSection');
            let html = '';

            questions.forEach((q, index) => {
                const graphHtml = q.hasGraph ? renderGraph(q.graphImage) : '';
                const explanationSteps = q.explanation.map((step, i) =>
                    `<div class="explanation-step"><span class="step-num">${i + 1}</span><span>${step}</span></div>`
                ).join('');

                html += `
                    <div class="question-container" id="question-${q.id}">
                        <div class="question-header">
                            <div class="question-number">${q.id}</div>
                            <div class="question-text">${q.question}</div>
                        </div>
                        ${graphHtml}
                        <ul class="options-list">
                            ${q.options.map((opt, optIndex) => `
                                <li class="option-item" data-question="${index}" data-option="${optIndex}" onclick="selectOption(${index}, ${optIndex})">
                                    <span class="option-letter">${String.fromCharCode(65 + optIndex)}</span>
                                    <span class="option-text">${opt}</span>
                                </li>
                            `).join('')}
                        </ul>
                        <div class="explanation-box" id="explanation-${q.id}">
                            <div class="explanation-title">✓ Correct Answer: ${String.fromCharCode(65 + q.answer)}</div>
                            ${explanationSteps}
                        </div>
                    </div>
                `;
            });

            html += `<div class="submit-section">
                <button class="submit-btn" onclick="submitExam()">Submit Exam</button>
            </div>`;

            container.innerHTML = html;
            if (window.MathJax) MathJax.typesetPromise();
        }

        function renderNavigator() {
            const container = document.getElementById('navigatorGrid');
            let html = '';
            for (let i = 1; i <= 40; i++) {
                html += `<div class="nav-item" id="nav-${i}" onclick="scrollToQuestion(${i})">${i}</div>`;
            }
            container.innerHTML = html;
        }

        function selectOption(questionIndex, optionIndex) {
            const question = questions[questionIndex];
            const options = document.querySelectorAll(`[data-question="${questionIndex}"]`);

            // Check if already answered
            if (options[0].classList.contains('correct') || options[0].classList.contains('incorrect')) {
                return; // Already answered, don't allow changing
            }

            userAnswers[questionIndex] = optionIndex;

            // Mark selected and show correct/incorrect
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                opt.style.pointerEvents = 'none'; // Disable further clicks

                if (idx === question.answer) {
                    opt.classList.add('correct');
                } else if (idx === optionIndex && idx !== question.answer) {
                    opt.classList.add('incorrect');
                }
            });

            // Update navigator
            const nav = document.getElementById(`nav-${questionIndex + 1}`);
            nav.classList.add('answered');
            if (optionIndex === question.answer) {
                nav.classList.add('correct-review');
            } else {
                nav.classList.add('incorrect-review');
            }

            // Show explanation immediately
            const explanation = document.getElementById(`explanation-${question.id}`);
            explanation.classList.add('show');

            // Re-render MathJax in explanation
            if (window.MathJax) {
                MathJax.typesetPromise([explanation]);
            }

            updateAnsweredCount();
        }

        function updateAnsweredCount() {
            document.getElementById('answeredCount').textContent =
                userAnswers.filter(a => a !== null).length;
        }

        function scrollToQuestion(id) {
            document.getElementById(`question-${id}`).scrollIntoView({ behavior: 'smooth' });
        }

        function submitExam() {
            if (examSubmitted) return;
            examSubmitted = true;
            clearInterval(timerInterval);

            let correct = 0, incorrect = 0, unanswered = 0;
            questions.forEach((q, i) => {
                if (userAnswers[i] === null) unanswered++;
                else if (userAnswers[i] === q.answer) correct++;
                else incorrect++;
            });

            document.getElementById('examContainer').classList.remove('active');
            document.getElementById('timerBar').style.display = 'none';
            document.getElementById('resultsContainer').classList.add('active');
            document.getElementById('scoreNumber').textContent = correct;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('incorrectCount').textContent = incorrect;
            document.getElementById('unansweredCount').textContent = unanswered;
            document.getElementById('percentageScore').textContent = Math.round((correct / 40) * 100) + '%';
        }

        function reviewAnswers() {
            reviewMode = true;
            document.getElementById('resultsContainer').classList.remove('active');
            document.getElementById('examContainer').classList.add('active');
            document.getElementById('timerBar').style.display = 'flex';
            document.getElementById('timeDisplay').textContent = 'Review Mode';
            document.getElementById('timer').classList.remove('warning');

            questions.forEach((q, index) => {
                const options = document.querySelectorAll(`[data-question="${index}"]`);
                options.forEach((opt, optIndex) => {
                    opt.classList.remove('selected');
                    if (optIndex === q.answer) opt.classList.add('correct');
                    else if (userAnswers[index] === optIndex) opt.classList.add('incorrect');
                });
                document.getElementById(`explanation-${q.id}`).classList.add('show');
                const nav = document.getElementById(`nav-${q.id}`);
                nav.classList.remove('answered');
                nav.classList.add(userAnswers[index] === q.answer ? 'correct-review' :
                    userAnswers[index] !== null ? 'incorrect-review' : '');
            });
            if (window.MathJax) MathJax.typesetPromise();
        }
    </script>
</body>

</html>