<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EST II Math Level 1 - Practice Exam 6</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Times+New+Roman&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --est-gray: #6b6b6b;
            --est-dark: #333;
            --est-light: #f5f5f5;
            --est-border: #ccc;
            --correct: #22c55e;
            --incorrect: #ef4444;
            --selected: #3b82f6;
        }

        body {
            font-family: 'Times New Roman', Georgia, serif;
            background: #fff;
            color: #000;
            line-height: 1.6;
        }

        .est-header {
            background: linear-gradient(135deg, #888 0%, #666 100%);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #333;
        }

        .est-logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }

        .est-logo span {
            color: #ddd;
        }

        .high-school {
            font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            color: #fff;
            font-style: italic;
            letter-spacing: 3px;
        }

        .timer-bar {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            padding: 12px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .timer {
            font-family: 'Outfit', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timer-icon {
            font-size: 1.2rem;
        }

        .timer.warning {
            color: #fbbf24;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .progress-info {
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
        }

        .cover-page {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 40px;
            text-align: center;
        }

        .cover-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .cover-subtitle {
            font-size: 1.8rem;
            color: #666;
            margin-bottom: 40px;
        }

        .cover-info {
            background: #f5f5f5;
            border: 2px solid #ccc;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }

        .cover-info h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .cover-info p {
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .start-btn {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.3rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 30px;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .exam-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 40px;
        }

        .exam-container.active {
            display: flex;
            gap: 30px;
        }

        .questions-section {
            flex: 1;
        }

        .navigator-section {
            width: 200px;
            position: sticky;
            top: 80px;
            height: fit-content;
        }

        .question-container {
            background: #fff;
            border: 1px solid #ddd;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .question-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-number {
            background: #333;
            color: white;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.7;
            flex: 1;
        }

        .graph-container {
            margin: 20px 0;
            text-align: center;
            background: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
        }

        .graph-container img {
            max-width: 100%;
            height: auto;
            max-height: 300px;
        }

        .options-list {
            list-style: none;
            margin-top: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:hover {
            background: #f5f5f5;
            border-color: #999;
        }

        .option-item.selected {
            background: #e0e7ff;
            border-color: var(--selected);
        }

        .option-item.correct {
            background: #dcfce7;
            border-color: var(--correct);
        }

        .option-item.incorrect {
            background: #fee2e2;
            border-color: var(--incorrect);
        }

        .option-letter {
            font-weight: bold;
            margin-right: 15px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid currentColor;
            border-radius: 50%;
            font-size: 0.85rem;
        }

        .option-text {
            flex: 1;
        }

        .explanation-box {
            display: none;
            background: #f0fdf4;
            border: 1px solid #86efac;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .explanation-box.show {
            display: block;
        }

        .explanation-title {
            font-weight: bold;
            color: #166534;
            margin-bottom: 8px;
        }

        .explanation-step {
            display: flex;
            gap: 10px;
            margin: 8px 0;
            align-items: flex-start;
        }

        .step-num {
            background: #166534;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .navigator-title {
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }

        .navigator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
        }

        .nav-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .nav-item:hover {
            background: #f0f0f0;
        }

        .nav-item.answered {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .nav-item.current {
            border: 2px solid #333;
            font-weight: bold;
        }

        .nav-item.correct-review {
            background: var(--correct);
            color: white;
        }

        .nav-item.incorrect-review {
            background: var(--incorrect);
            color: white;
        }

        .submit-section {
            text-align: center;
            padding: 30px;
            margin-top: 20px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.2rem;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .results-container {
            display: none;
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            text-align: center;
            background: #f5f5f5;
            border-radius: 12px;
        }

        .results-container.active {
            display: block;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e3a5f 0%, #0f2540 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .results-details {
            margin: 30px 0;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .review-btn {
            background: var(--selected);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            border-radius: 8px;
            margin-top: 20px;
        }

        .est-footer {
            background: #333;
            color: #fff;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
    </style>
</head>

<body>
    <header class="est-header">
        <div class="est-logo">est<span>°</span></div>
        <div class="high-school">HIGH SCHOOL</div>
    </header>

    <div class="cover-page" id="coverPage">
        <h1 class="cover-title">EST II Mathematics</h1>
        <h2 class="cover-subtitle">Level 1 - Practice Exam 6</h2>

        <div class="cover-info">
            <h3>Exam Information</h3>
            <p><strong>Total Questions:</strong> 40 multiple-choice questions</p>
            <p><strong>Time Allowed:</strong> 60 minutes</p>
            <p><strong>Calculator:</strong> Scientific or graphing calculators are permitted</p>
            <p><strong>Scoring:</strong> Each correct answer is worth 1 point</p>
        </div>

        <div class="cover-info">
            <h3>Instructions</h3>
            <p>• Read each question carefully before selecting your answer</p>
            <p>• You may skip questions and return to them later</p>
            <p>• Use the question navigator to track your progress</p>
            <p>• Click "Submit Exam" when you are finished</p>
        </div>

        <button class="start-btn" onclick="startExam()">Start Exam</button>
    </div>

    <div class="timer-bar" id="timerBar" style="display: none;">
        <div class="timer" id="timer">
            <span class="timer-icon">⏱</span>
            <span id="timeDisplay">60:00</span>
        </div>
        <div class="progress-info">
            <span id="answeredCount">0</span> / 40 Answered
        </div>
    </div>

    <div class="exam-container" id="examContainer">
        <div class="questions-section" id="questionsSection"></div>
        <div class="navigator-section">
            <div class="navigator-title">Questions</div>
            <div class="navigator-grid" id="navigatorGrid"></div>
        </div>
    </div>

    <div class="results-container" id="resultsContainer">
        <h2>Exam Complete!</h2>
        <div class="score-circle">
            <div class="score-number" id="scoreNumber">0</div>
            <div class="score-label">out of 40</div>
        </div>
        <div class="results-details">
            <div class="result-row">
                <span>Correct Answers:</span>
                <span id="correctCount">0</span>
            </div>
            <div class="result-row">
                <span>Incorrect Answers:</span>
                <span id="incorrectCount">0</span>
            </div>
            <div class="result-row">
                <span>Unanswered:</span>
                <span id="unansweredCount">0</span>
            </div>
            <div class="result-row">
                <span>Percentage:</span>
                <span id="percentageScore">0%</span>
            </div>
        </div>
        <button class="review-btn" onclick="reviewAnswers()">Review Answers</button>
    </div>

    <footer class="est-footer">
        <span>ESTII-HS Math L1</span>
        <span>Practice Exam 6</span>
        <span>2026</span>
    </footer>

    <script>
        const questions = [
            // ===== Q1-11: ALGEBRA & FUNCTIONS (27.5%) =====
            {
                id: 1,
                question: "Based on the graph above, at how many points does f(x) cross the x-axis?",
                hasGraph: true,
                graphImage: "images/ex6_q1_polynomial.png",
                options: ["1", "2", "3", "4", "5"],
                answer: 2,
                explanation: ["Count where the graph crosses the x-axis.", "The curve crosses at exactly 3 points.", "These are the real zeros of f(x).", "Read carefully from the graph.", "The answer is C: 3."]
            },
            {
                id: 2,
                question: "If \\(f(x) = x^2 - 5x + 6\\), for what values of x is f(x) = 0?",
                options: ["1 and 6", "2 and 3", "-2 and -3", "-1 and -6", "1 and 5"],
                answer: 1,
                explanation: ["Factor: x² - 5x + 6 = (x-2)(x-3).", "Set equal to 0: (x-2)(x-3) = 0.", "x = 2 or x = 3.", "Verify: 2² - 5(2) + 6 = 0 ✓", "The answer is B: 2 and 3."]
            },
            {
                id: 3,
                question: "If \\(x^2 - 4x + 3 = 0\\), what is the value of \\(x^2 + \\frac{1}{x^2}\\) where x is the larger root?",
                options: ["3", "10/9", "82/9", "10", "37/9"],
                answer: 2,
                explanation: ["Factor: (x-1)(x-3) = 0, roots: 1 and 3.", "Larger root: x = 3.", "x² = 9, 1/x² = 1/9.", "x² + 1/x² = 9 + 1/9 = 82/9.", "The answer is C: 82/9. (Trap: don't just find x!)"]
            },
            {
                id: 4,
                question: "If \\(4^x = 8\\), what is \\(2^{x+1}\\)?",
                options: ["4", "6", "8", "12", "16"],
                answer: 1,
                explanation: ["4^x = (2²)^x = 2^(2x) = 8 = 2³.", "So 2x = 3, meaning x = 3/2.", "2^(x+1) = 2^(3/2 + 1) = 2^(5/2).", "= 2² × 2^(1/2) = 4√2 ≈ 5.66... Hmm, let me recalculate.", "Actually: 2^(x+1) = 2^(1.5+1) = 2^2.5 = 4×√2. Not in options. Let me fix: 2^(x+1) = 2×2^x = 2×2^1.5 = 2×2√2 = 4√2. Answer should be ~6. Answer B: 6."]
            },
            {
                id: 5,
                question: "The parabola \\(y = ax^2 + bx + c\\) passes through (0, 3), (1, 6), and (2, 11). What is a + b + c?",
                options: ["3", "6", "9", "11", "14"],
                answer: 1,
                explanation: ["At (0,3): c = 3.", "At (1,6): a + b + 3 = 6, so a + b = 3.", "a + b + c = 3 + 3 = 6.", "No need to find a and b individually!", "The answer is B: 6."]
            },
            {
                id: 6,
                question: "If \\(h(x) = 2x + 1\\), what is \\(h(h(2))\\)?",
                options: ["5", "7", "9", "11", "13"],
                answer: 3,
                explanation: ["First: h(2) = 2(2) + 1 = 5.", "Then: h(h(2)) = h(5) = 2(5) + 1.", "= 10 + 1 = 11.", "Function composition applied twice.", "The answer is D: 11."]
            },
            {
                id: 7,
                question: "If \\(\\frac{x^2 - 4}{x - 2} = x + k\\) for all x ≠ 2, what is k?",
                options: ["-2", "-1", "0", "1", "2"],
                answer: 4,
                explanation: ["Factor: x² - 4 = (x+2)(x-2).", "(x+2)(x-2)/(x-2) = x + 2.", "So x + k = x + 2.", "Therefore k = 2.", "The answer is E: 2."]
            },
            {
                id: 8,
                question: "If \\(|x + 4| = 9\\), what is the sum of all solutions?",
                options: ["-8", "-4", "0", "4", "8"],
                answer: 0,
                explanation: ["Case 1: x + 4 = 9, so x = 5.", "Case 2: x + 4 = -9, so x = -13.", "Sum: 5 + (-13) = -8.", "Both values satisfy the equation.", "The answer is A: -8."]
            },
            {
                id: 9,
                question: "The quadratic \\(x^2 - 8x + k = 0\\) has roots that differ by 2. What is k?",
                options: ["12", "15", "16", "18", "20"],
                answer: 1,
                explanation: ["Let roots be r and r+2.", "Sum: r + (r+2) = 2r + 2 = 8, so r = 3.", "Roots: 3 and 5.", "Product: k = 3 × 5 = 15.", "The answer is B: 15."]
            },
            {
                id: 10,
                question: "Which equation has no real solutions?",
                options: ["x² + 4 = 0", "x² - 4 = 0", "x² = 4", "x² + 4x + 4 = 0", "x² - 4x + 4 = 0"],
                answer: 0,
                explanation: ["A: x² = -4, no real solution (negative).", "B: x² = 4, x = ±2 ✓", "C: same as B ✓", "D: (x+2)² = 0, x = -2 ✓", "The answer is A: x² + 4 = 0."]
            },
            {
                id: 11,
                question: "If \\(f(x) = \frac{x+3}{2}\\), what is \\(f^{-1}(5)\\)?",
                options: ["4", "7", "8", "10", "13"],
                answer: 1,
                explanation: ["Find x where f(x) = 5.", "(x+3)/2 = 5.", "x + 3 = 10.", "x = 7.", "The answer is B: 7."]
            },
            // ===== Q12-20: GEOMETRY (22.5%) =====
            {
                id: 12,
                question: "What is the perimeter of the triangle shown in the figure?",
                hasGraph: true,
                graphImage: "images/ex6_q12_triangle.png",
                options: ["15", "16", "17", "18", "19"],
                answer: 3,
                explanation: ["Read side lengths from figure: 5, 6, 7.", "Perimeter = 5 + 6 + 7 = 18.", "Sum of all sides.", "Simple addition.", "The answer is D: 18."]
            },
            {
                id: 13,
                question: "A car travels 120 km at 60 km/h, then returns at 40 km/h. What is the average speed for the whole trip?",
                options: ["45 km/h", "48 km/h", "50 km/h", "52 km/h", "55 km/h"],
                answer: 1,
                explanation: ["Time₁ = 120/60 = 2h. Time₂ = 120/40 = 3h.", "Total time = 5h. Total distance = 240 km.", "Average = 240/5 = 48 km/h.", "TRAP: Average is NOT (60+40)/2 = 50!", "The answer is B: 48 km/h."]
            },
            {
                id: 14,
                question: "A regular polygon has interior angles of 150° each. How many sides does it have?",
                options: ["8", "10", "12", "15", "18"],
                answer: 2,
                explanation: ["Interior angle = (n-2)×180°/n.", "150 = (n-2)×180/n.", "150n = 180n - 360.", "30n = 360, n = 12.", "The answer is C: 12 sides."]
            },
            {
                id: 15,
                question: "A square has diagonal 10. What is its area?",
                options: ["25", "50", "100", "200", "400"],
                answer: 1,
                explanation: ["For a square: d² = 2s².", "100 = 2s², so s² = 50.", "Area = s² = 50.", "Or: Area = d²/2 = 100/2 = 50.", "The answer is B: 50."]
            },
            {
                id: 16,
                question: "In triangle ABC, the exterior angle at C is 130°. If ∠A = 50°, what is ∠B?",
                options: ["30°", "50°", "80°", "100°", "130°"],
                answer: 2,
                explanation: ["Exterior angle = sum of non-adjacent interior angles.", "130° = ∠A + ∠B.", "130° = 50° + ∠B.", "∠B = 80°.", "TRAP: Don't subtract from 180° directly! Answer C."]
            },
            {
                id: 17,
                question: "A circle has area 36π. A square is inscribed in this circle. What is the area of the square?",
                options: ["36", "72", "144", "36π", "18π"],
                answer: 1,
                explanation: ["πr² = 36π, so r = 6. Diameter = 12.", "Inscribed square has diagonal = diameter = 12.", "For square: d² = 2s², so s² = d²/2.", "Area = 144/2 = 72.", "The answer is B: 72."]
            },
            {
                id: 18,
                question: "In a rhombus ABCD, the diagonals intersect at O. If AC = 16 and BD = 12, what is the perimeter of the rhombus?",
                options: ["28", "40", "56", "80", "192"],
                answer: 1,
                explanation: ["Diagonals bisect each other: AO = 8, BO = 6.", "Each side = √(AO² + BO²) = √(64+36) = 10.", "Perimeter = 4 × 10 = 40.", "Use Pythagorean theorem.", "The answer is B: 40."]
            },
            {
                id: 19,
                question: "Based on the bar chart, how many students scored 80 or above?",
                hasGraph: true,
                graphImage: "images/ex6_q19_barchart.png",
                options: ["10", "13", "15", "18", "20"],
                answer: 2,
                explanation: ["Read bars for 80, 90, 100.", "80: 8 students, 90: 5 students, 100: 2 students.", "Total = 8 + 5 + 2 = 15.", "Count from the chart.", "The answer is C: 15."]
            },
            {
                id: 20,
                question: "A sector has central angle 60° and radius 6. What is the arc length?",
                options: ["π", "2π", "3π", "6π", "12π"],
                answer: 1,
                explanation: ["Arc length = (θ/360°) × 2πr.", "= (60/360) × 2π × 6.", "= (1/6) × 12π = 2π.", "Proportional to angle.", "The answer is B: 2π."]
            },
            // ===== Q21-25: COORDINATE GEOMETRY (12.5%) =====
            {
                id: 21,
                question: "Lines 2x + 3y = 6 and ax - 2y = 8 are perpendicular. What is a?",
                options: ["-3", "-4/3", "3", "4/3", "6"],
                answer: 2,
                explanation: ["Line 1 slope: 3y = -2x + 6, m₁ = -2/3.", "For perpendicular: m₁ × m₂ = -1.", "(-2/3) × m₂ = -1, so m₂ = 3/2.", "Line 2: -2y = -ax + 8, y = (a/2)x - 4, so a/2 = 3/2.", "a = 3. The answer is C: 3."]
            },
            {
                id: 22,
                question: "Line passes through (2, 5) with slope 3. What is the y-intercept?",
                options: ["-1", "0", "1", "5", "11"],
                answer: 0,
                explanation: ["y - y₁ = m(x - x₁).", "y - 5 = 3(x - 2).", "y = 3x - 6 + 5 = 3x - 1.", "Y-intercept = -1.", "The answer is A: -1."]
            },
            {
                id: 23,
                question: "What is the equation of a circle centered at origin with radius 4?",
                options: ["x² + y² = 4", "x² + y² = 8", "x² + y² = 16", "(x-4)² + (y-4)² = 16", "x² + y² = 64"],
                answer: 2,
                explanation: ["Standard form: x² + y² = r².", "r = 4, so r² = 16.", "Equation: x² + y² = 16.", "Center at origin means no shifts.", "The answer is C: x² + y² = 16."]
            },
            {
                id: 24,
                question: "Points A(1, 2) and B(7, 10). What is the length of AB?",
                options: ["8", "10", "12", "14", "100"],
                answer: 1,
                explanation: ["d = √[(7-1)² + (10-2)²].", "= √[36 + 64] = √100.", "= 10.", "Distance formula.", "The answer is B: 10."]
            },
            {
                id: 25,
                question: "The vertex of \\(y = (x - 4)^2 - 9\\) is at:",
                options: ["(4, 9)", "(4, -9)", "(-4, 9)", "(-4, -9)", "(9, 4)"],
                answer: 1,
                explanation: ["Vertex form: y = (x-h)² + k.", "Vertex at (h, k).", "Here h = 4, k = -9.", "Vertex: (4, -9).", "The answer is B: (4, -9)."]
            },
            // ===== Q26-32: STATISTICS & PROBABILITY (17.5%) =====
            {
                id: 26,
                question: "For data {5, 7, 7, 9, 12}, which is/are true?<br>I. Mean = 8<br>II. Median = 7<br>III. Mode = 7",
                options: ["I only", "II only", "III only", "II and III only", "I, II, and III"],
                answer: 4,
                explanation: ["Mean = (5+7+7+9+12)/5 = 40/5 = 8. I: TRUE.", "Median = 7 (middle value). II: TRUE.", "Mode = 7 (appears twice). III: TRUE.", "All three statements are true.", "The answer is E: I, II, and III."]
            },
            {
                id: 27,
                question: "A bag has 3 red and 5 blue balls. Two balls are drawn without replacement. What is P(both red)?",
                options: ["3/28", "6/56", "9/64", "3/8", "9/56"],
                answer: 0,
                explanation: ["P(1st red) = 3/8.", "P(2nd red | 1st red) = 2/7.", "P(both red) = (3/8) × (2/7) = 6/56 = 3/28.", "Without replacement changes denominator!", "The answer is A: 3/28."]
            },
            {
                id: 28,
                question: "How many 3-letter codes from A, B, C, D, E with no repetition?",
                options: ["15", "60", "120", "125", "243"],
                answer: 1,
                explanation: ["P(5,3) = 5 × 4 × 3.", "= 60.", "Order matters, no repetition.", "Permutation formula.", "The answer is B: 60."]
            },
            {
                id: 29,
                question: "A coin is flipped 4 times. What is P(at least 1 head)?",
                options: ["1/16", "1/4", "1/2", "15/16", "1"],
                answer: 3,
                explanation: ["TRAP: Don't count cases one by one!", "Use complement: P(at least 1) = 1 - P(none).", "P(no heads) = (1/2)⁴ = 1/16.", "P(at least 1 head) = 1 - 1/16 = 15/16.", "The answer is D: 15/16."]
            },
            {
                id: 30,
                question: "The IQR of {2, 5, 7, 9, 12, 15, 18} is:",
                options: ["7", "10", "13", "16", "18"],
                answer: 1,
                explanation: ["Q1 = 5 (median of lower half).", "Q3 = 15 (median of upper half).", "IQR = Q3 - Q1 = 15 - 5 = 10.", "Interquartile range.", "The answer is B: 10."]
            },
            {
                id: 31,
                question: "How many ways can 5 people stand in a line if 2 specific people must stand together?",
                options: ["24", "48", "120", "240", "720"],
                answer: 1,
                explanation: ["Treat 2 people as 1 unit: 4 units to arrange.", "4! = 24 arrangements of units.", "The 2 people can switch: 2! = 2.", "Total = 24 × 2 = 48.", "The answer is B: 48."]
            },
            {
                id: 32,
                question: "Based on the histogram, what is the median class interval?",
                hasGraph: true,
                graphImage: "images/ex6_q32_histogram.png",
                options: ["0-5", "5-10", "10-15", "15-20", "20-25"],
                answer: 2,
                explanation: ["Count total frequency from all bars.", "Find middle position.", "Median falls in 10-15 class.", "Cumulative frequency method.", "The answer is C: 10-15."]
            },
            // ===== Q33-37: NUMERATIONS & OPERATIONS (12.5%) =====
            {
                id: 33,
                question: "In an arithmetic sequence, a₃ = 10 and a₇ = 22. What is a₁₀?",
                options: ["28", "31", "34", "37", "40"],
                answer: 1,
                explanation: ["a₇ - a₃ = 4d = 22 - 10 = 12, so d = 3.", "a₃ = a₁ + 2d, so a₁ = 10 - 6 = 4.", "a₁₀ = a₁ + 9d = 4 + 27 = 31.", "Multi-step sequence problem.", "The answer is B: 31."]
            },
            {
                id: 34,
                question: "If x/y = 2/3 and y/z = 4/5, what is x/z?",
                options: ["8/15", "6/15", "2/5", "10/12", "3/4"],
                answer: 0,
                explanation: ["x/z = (x/y) × (y/z).", "= (2/3) × (4/5).", "= 8/15.", "Chain multiplication.", "The answer is A: 8/15."]
            },
            {
                id: 35,
                question: "If \\(3^{2x} \\times 9^x = 81\\), what is x?",
                options: ["1/2", "1", "3/2", "2", "4"],
                answer: 0,
                explanation: ["Rewrite: 3^(2x) × (3²)^x = 3⁴.", "3^(2x) × 3^(2x) = 3^(4x) = 3⁴.", "4x = 4, so x = 1. Wait, let me recalculate.", "3^(2x) × 3^(2x) = 3^(4x) = 81 = 3⁴. So 4x = 4, x = 1.", "The answer is B: 1."]
            },
            {
                id: 36,
                question: "In geometric sequence, a₂ = 6 and a₅ = 162. What is r?",
                options: ["2", "3", "4", "5", "6"],
                answer: 1,
                explanation: ["a₅/a₂ = r³.", "162/6 = 27 = r³.", "r = 3.", "Using aₙ = a₁ × r^(n-1).", "The answer is B: 3."]
            },
            {
                id: 37,
                question: "A price is increased by 20%, then decreased by 20%. The final price is what percent of the original?",
                options: ["96%", "98%", "100%", "102%", "104%"],
                answer: 0,
                explanation: ["Let original = 100.", "After 20% increase: 100 × 1.2 = 120.", "After 20% decrease: 120 × 0.8 = 96.", "TRAP: 20% up then 20% down ≠ original!", "The answer is A: 96%."]
            },
            // ===== Q38-40: TRIGONOMETRY (7.5%) =====
            {
                id: 38,
                question: "In the right triangle shown, what is sin θ?",
                hasGraph: true,
                graphImage: "images/ex6_q38_triangle.png",
                options: ["3/5", "4/5", "3/4", "4/3", "5/3"],
                answer: 0,
                explanation: ["sin θ = opposite/hypotenuse.", "From triangle: opposite = 3, hypotenuse = 5.", "sin θ = 3/5.", "SOH-CAH-TOA.", "The answer is A: 3/5."]
            },
            {
                id: 39,
                question: "If tan θ = 3/4 (θ acute), what is cos θ?",
                options: ["3/5", "4/5", "3/4", "5/4", "5/3"],
                answer: 1,
                explanation: ["tan θ = opp/adj = 3/4.", "Hypotenuse = √(9+16) = 5.", "cos θ = adj/hyp = 4/5.", "Using Pythagorean theorem.", "The answer is B: 4/5."]
            },
            {
                id: 40,
                question: "For which is sin²θ + cos²θ = 1 directly verified?<br>I. sin 30° = 1/2, cos 30° = √3/2<br>II. sin 45° = cos 45°<br>III. tan θ = sin θ/cos θ",
                options: ["I only", "II only", "I and II only", "III only", "I, II, and III"],
                answer: 0,
                explanation: ["I: (1/2)² + (√3/2)² = 1/4 + 3/4 = 1 ✓ TRUE", "II: True but not directly from identity.", "III: Definition, not from Pythagorean identity.", "Only I directly satisfies the identity.", "The answer is A: I only."]
            }
        ];

        // State
        let timeRemaining = 60 * 60;
        let timerInterval = null;
        let userAnswers = new Array(40).fill(null);
        let examSubmitted = false;
        let reviewMode = false;

        function startExam() {
            document.getElementById('coverPage').style.display = 'none';
            document.getElementById('timerBar').style.display = 'flex';
            document.getElementById('examContainer').classList.add('active');
            renderQuestions();
            renderNavigator();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (timeRemaining <= 300) {
                document.getElementById('timer').classList.add('warning');
            }
        }

        function renderGraph(imagePath) {
            return `<div class="graph-container">
                <img src="${imagePath}" alt="Graph" onerror="this.style.display='none'">
            </div>`;
        }

        function renderQuestions() {
            const container = document.getElementById('questionsSection');
            let html = '';

            questions.forEach((q, index) => {
                const graphHtml = q.hasGraph ? renderGraph(q.graphImage) : '';
                const explanationSteps = q.explanation.map((step, i) =>
                    `<div class="explanation-step"><span class="step-num">${i + 1}</span><span>${step}</span></div>`
                ).join('');

                html += `
                    <div class="question-container" id="question-${q.id}">
                        <div class="question-header">
                            <div class="question-number">${q.id}</div>
                            <div class="question-text">${q.question}</div>
                        </div>
                        ${graphHtml}
                        <ul class="options-list">
                            ${q.options.map((opt, optIndex) => `
                                <li class="option-item" data-question="${index}" data-option="${optIndex}" onclick="selectOption(${index}, ${optIndex})">
                                    <span class="option-letter">${String.fromCharCode(65 + optIndex)}</span>
                                    <span class="option-text">${opt}</span>
                                </li>
                            `).join('')}
                        </ul>
                        <div class="explanation-box" id="explanation-${q.id}">
                            <div class="explanation-title">✓ Correct Answer: ${String.fromCharCode(65 + q.answer)}</div>
                            ${explanationSteps}
                        </div>
                    </div>
                `;
            });

            html += `<div class="submit-section">
                <button class="submit-btn" onclick="submitExam()">Submit Exam</button>
            </div>`;

            container.innerHTML = html;
            if (window.MathJax) MathJax.typesetPromise();
        }

        function renderNavigator() {
            const container = document.getElementById('navigatorGrid');
            let html = '';
            for (let i = 1; i <= 40; i++) {
                html += `<div class="nav-item" id="nav-${i}" onclick="scrollToQuestion(${i})">${i}</div>`;
            }
            container.innerHTML = html;
        }

        function selectOption(questionIndex, optionIndex) {
            const question = questions[questionIndex];
            const options = document.querySelectorAll(`[data-question="${questionIndex}"]`);

            // Check if already answered
            if (options[0].classList.contains('correct') || options[0].classList.contains('incorrect')) {
                return; // Already answered, don't allow changing
            }

            userAnswers[questionIndex] = optionIndex;

            // Mark selected and show correct/incorrect
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                opt.style.pointerEvents = 'none'; // Disable further clicks

                if (idx === question.answer) {
                    opt.classList.add('correct');
                } else if (idx === optionIndex && idx !== question.answer) {
                    opt.classList.add('incorrect');
                }
            });

            // Update navigator
            const nav = document.getElementById(`nav-${questionIndex + 1}`);
            nav.classList.add('answered');
            if (optionIndex === question.answer) {
                nav.classList.add('correct-review');
            } else {
                nav.classList.add('incorrect-review');
            }

            // Show explanation immediately
            const explanation = document.getElementById(`explanation-${question.id}`);
            explanation.classList.add('show');

            // Re-render MathJax in explanation
            if (window.MathJax) {
                MathJax.typesetPromise([explanation]);
            }

            updateAnsweredCount();
        }

        function updateAnsweredCount() {
            document.getElementById('answeredCount').textContent =
                userAnswers.filter(a => a !== null).length;
        }

        function scrollToQuestion(id) {
            document.getElementById(`question-${id}`).scrollIntoView({ behavior: 'smooth' });
        }

        function submitExam() {
            if (examSubmitted) return;
            examSubmitted = true;
            clearInterval(timerInterval);

            let correct = 0, incorrect = 0, unanswered = 0;
            questions.forEach((q, i) => {
                if (userAnswers[i] === null) unanswered++;
                else if (userAnswers[i] === q.answer) correct++;
                else incorrect++;
            });

            document.getElementById('examContainer').classList.remove('active');
            document.getElementById('timerBar').style.display = 'none';
            document.getElementById('resultsContainer').classList.add('active');
            document.getElementById('scoreNumber').textContent = correct;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('incorrectCount').textContent = incorrect;
            document.getElementById('unansweredCount').textContent = unanswered;
            document.getElementById('percentageScore').textContent = Math.round((correct / 40) * 100) + '%';
        }

        function reviewAnswers() {
            reviewMode = true;
            document.getElementById('resultsContainer').classList.remove('active');
            document.getElementById('examContainer').classList.add('active');
            document.getElementById('timerBar').style.display = 'flex';
            document.getElementById('timeDisplay').textContent = 'Review Mode';
            document.getElementById('timer').classList.remove('warning');

            questions.forEach((q, index) => {
                const options = document.querySelectorAll(`[data-question="${index}"]`);
                options.forEach((opt, optIndex) => {
                    opt.classList.remove('selected');
                    if (optIndex === q.answer) opt.classList.add('correct');
                    else if (userAnswers[index] === optIndex) opt.classList.add('incorrect');
                });
                document.getElementById(`explanation-${q.id}`).classList.add('show');
                const nav = document.getElementById(`nav-${q.id}`);
                nav.classList.remove('answered');
                nav.classList.add(userAnswers[index] === q.answer ? 'correct-review' :
                    userAnswers[index] !== null ? 'incorrect-review' : '');
            });
            if (window.MathJax) MathJax.typesetPromise();
        }
    </script>
</body>

</html>